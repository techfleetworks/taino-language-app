"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@aws-sdk+middleware-bucket-endpoint@3.693.0";
exports.ids = ["vendor-chunks/@aws-sdk+middleware-bucket-endpoint@3.693.0"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.693.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.693.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js ***!
  \*******************************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS,\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME,\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME,\n  NODE_USE_ARN_REGION_CONFIG_OPTIONS: () => NODE_USE_ARN_REGION_CONFIG_OPTIONS,\n  NODE_USE_ARN_REGION_ENV_NAME: () => NODE_USE_ARN_REGION_ENV_NAME,\n  NODE_USE_ARN_REGION_INI_NAME: () => NODE_USE_ARN_REGION_INI_NAME,\n  bucketEndpointMiddleware: () => bucketEndpointMiddleware,\n  bucketEndpointMiddlewareOptions: () => bucketEndpointMiddlewareOptions,\n  bucketHostname: () => bucketHostname,\n  getArnResources: () => getArnResources,\n  getBucketEndpointPlugin: () => getBucketEndpointPlugin,\n  getSuffixForArnEndpoint: () => getSuffixForArnEndpoint,\n  resolveBucketEndpointConfig: () => resolveBucketEndpointConfig,\n  validateAccountId: () => validateAccountId,\n  validateDNSHostLabel: () => validateDNSHostLabel,\n  validateNoDualstack: () => validateNoDualstack,\n  validateNoFIPS: () => validateNoFIPS,\n  validateOutpostService: () => validateOutpostService,\n  validatePartition: () => validatePartition,\n  validateRegion: () => validateRegion\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/NodeDisableMultiregionAccessPointConfigOptions.ts\nvar import_util_config_provider = __webpack_require__(/*! @smithy/util-config-provider */ \"(rsc)/./node_modules/.pnpm/@smithy+util-config-provider@3.0.0/node_modules/@smithy/util-config-provider/dist-es/index.js\");\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME = \"AWS_S3_DISABLE_MULTIREGION_ACCESS_POINTS\";\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME = \"s3_disable_multiregion_access_points\";\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS = {\n  environmentVariableSelector: (env) => (0, import_util_config_provider.booleanSelector)(env, NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME, import_util_config_provider.SelectorType.ENV),\n  configFileSelector: (profile) => (0, import_util_config_provider.booleanSelector)(profile, NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME, import_util_config_provider.SelectorType.CONFIG),\n  default: false\n};\n\n// src/NodeUseArnRegionConfigOptions.ts\n\nvar NODE_USE_ARN_REGION_ENV_NAME = \"AWS_S3_USE_ARN_REGION\";\nvar NODE_USE_ARN_REGION_INI_NAME = \"s3_use_arn_region\";\nvar NODE_USE_ARN_REGION_CONFIG_OPTIONS = {\n  environmentVariableSelector: (env) => (0, import_util_config_provider.booleanSelector)(env, NODE_USE_ARN_REGION_ENV_NAME, import_util_config_provider.SelectorType.ENV),\n  configFileSelector: (profile) => (0, import_util_config_provider.booleanSelector)(profile, NODE_USE_ARN_REGION_INI_NAME, import_util_config_provider.SelectorType.CONFIG),\n  default: false\n};\n\n// src/bucketEndpointMiddleware.ts\nvar import_util_arn_parser = __webpack_require__(/*! @aws-sdk/util-arn-parser */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+util-arn-parser@3.693.0/node_modules/@aws-sdk/util-arn-parser/dist-es/index.js\");\nvar import_protocol_http = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/./node_modules/.pnpm/@smithy+protocol-http@4.1.7/node_modules/@smithy/protocol-http/dist-es/index.js\");\n\n// src/bucketHostnameUtils.ts\nvar DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/;\nvar IP_ADDRESS_PATTERN = /(\\d+\\.){3}\\d+/;\nvar DOTS_PATTERN = /\\.\\./;\nvar DOT_PATTERN = /\\./;\nvar S3_HOSTNAME_PATTERN = /^(.+\\.)?s3(-fips)?(\\.dualstack)?[.-]([a-z0-9-]+)\\./;\nvar S3_US_EAST_1_ALTNAME_PATTERN = /^s3(-external-1)?\\.amazonaws\\.com$/;\nvar AWS_PARTITION_SUFFIX = \"amazonaws.com\";\nvar isBucketNameOptions = /* @__PURE__ */ __name((options) => typeof options.bucketName === \"string\", \"isBucketNameOptions\");\nvar isDnsCompatibleBucketName = /* @__PURE__ */ __name((bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName), \"isDnsCompatibleBucketName\");\nvar getRegionalSuffix = /* @__PURE__ */ __name((hostname) => {\n  const parts = hostname.match(S3_HOSTNAME_PATTERN);\n  return [parts[4], hostname.replace(new RegExp(`^${parts[0]}`), \"\")];\n}, \"getRegionalSuffix\");\nvar getSuffix = /* @__PURE__ */ __name((hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname) ? [\"us-east-1\", AWS_PARTITION_SUFFIX] : getRegionalSuffix(hostname), \"getSuffix\");\nvar getSuffixForArnEndpoint = /* @__PURE__ */ __name((hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname) ? [hostname.replace(`.${AWS_PARTITION_SUFFIX}`, \"\"), AWS_PARTITION_SUFFIX] : getRegionalSuffix(hostname), \"getSuffixForArnEndpoint\");\nvar validateArnEndpointOptions = /* @__PURE__ */ __name((options) => {\n  if (options.pathStyleEndpoint) {\n    throw new Error(\"Path-style S3 endpoint is not supported when bucket is an ARN\");\n  }\n  if (options.accelerateEndpoint) {\n    throw new Error(\"Accelerate endpoint is not supported when bucket is an ARN\");\n  }\n  if (!options.tlsCompatible) {\n    throw new Error(\"HTTPS is required when bucket is an ARN\");\n  }\n}, \"validateArnEndpointOptions\");\nvar validateService = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3\" && service !== \"s3-outposts\" && service !== \"s3-object-lambda\") {\n    throw new Error(\"Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component\");\n  }\n}, \"validateService\");\nvar validateS3Service = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3\") {\n    throw new Error(\"Expect 's3' in Accesspoint ARN service component\");\n  }\n}, \"validateS3Service\");\nvar validateOutpostService = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3-outposts\") {\n    throw new Error(\"Expect 's3-posts' in Outpost ARN service component\");\n  }\n}, \"validateOutpostService\");\nvar validatePartition = /* @__PURE__ */ __name((partition, options) => {\n  if (partition !== options.clientPartition) {\n    throw new Error(`Partition in ARN is incompatible, got \"${partition}\" but expected \"${options.clientPartition}\"`);\n  }\n}, \"validatePartition\");\nvar validateRegion = /* @__PURE__ */ __name((region, options) => {\n  if (region === \"\") {\n    throw new Error(\"ARN region is empty\");\n  }\n  if (options.useFipsEndpoint) {\n    if (!options.allowFipsRegion) {\n      throw new Error(\"FIPS region is not supported\");\n    } else if (!isEqualRegions(region, options.clientRegion)) {\n      throw new Error(`Client FIPS region ${options.clientRegion} doesn't match region ${region} in ARN`);\n    }\n  }\n  if (!options.useArnRegion && !isEqualRegions(region, options.clientRegion || \"\") && !isEqualRegions(region, options.clientSigningRegion || \"\")) {\n    throw new Error(`Region in ARN is incompatible, got ${region} but expected ${options.clientRegion}`);\n  }\n}, \"validateRegion\");\nvar validateRegionalClient = /* @__PURE__ */ __name((region) => {\n  if ([\"s3-external-1\", \"aws-global\"].includes(region)) {\n    throw new Error(`Client region ${region} is not regional`);\n  }\n}, \"validateRegionalClient\");\nvar isEqualRegions = /* @__PURE__ */ __name((regionA, regionB) => regionA === regionB, \"isEqualRegions\");\nvar validateAccountId = /* @__PURE__ */ __name((accountId) => {\n  if (!/[0-9]{12}/.exec(accountId)) {\n    throw new Error(\"Access point ARN accountID does not match regex '[0-9]{12}'\");\n  }\n}, \"validateAccountId\");\nvar validateDNSHostLabel = /* @__PURE__ */ __name((label, options = { tlsCompatible: true }) => {\n  if (label.length >= 64 || !/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(label) || /(\\d+\\.){3}\\d+/.test(label) || /[.-]{2}/.test(label) || (options == null ? void 0 : options.tlsCompatible) && DOT_PATTERN.test(label)) {\n    throw new Error(`Invalid DNS label ${label}`);\n  }\n}, \"validateDNSHostLabel\");\nvar validateCustomEndpoint = /* @__PURE__ */ __name((options) => {\n  if (options.isCustomEndpoint) {\n    if (options.dualstackEndpoint)\n      throw new Error(\"Dualstack endpoint is not supported with custom endpoint\");\n    if (options.accelerateEndpoint)\n      throw new Error(\"Accelerate endpoint is not supported with custom endpoint\");\n  }\n}, \"validateCustomEndpoint\");\nvar getArnResources = /* @__PURE__ */ __name((resource) => {\n  const delimiter = resource.includes(\":\") ? \":\" : \"/\";\n  const [resourceType, ...rest] = resource.split(delimiter);\n  if (resourceType === \"accesspoint\") {\n    if (rest.length !== 1 || rest[0] === \"\") {\n      throw new Error(`Access Point ARN should have one resource accesspoint${delimiter}{accesspointname}`);\n    }\n    return { accesspointName: rest[0] };\n  } else if (resourceType === \"outpost\") {\n    if (!rest[0] || rest[1] !== \"accesspoint\" || !rest[2] || rest.length !== 3) {\n      throw new Error(\n        `Outpost ARN should have resource outpost${delimiter}{outpostId}${delimiter}accesspoint${delimiter}{accesspointName}`\n      );\n    }\n    const [outpostId, _, accesspointName] = rest;\n    return { outpostId, accesspointName };\n  } else {\n    throw new Error(`ARN resource should begin with 'accesspoint${delimiter}' or 'outpost${delimiter}'`);\n  }\n}, \"getArnResources\");\nvar validateNoDualstack = /* @__PURE__ */ __name((dualstackEndpoint) => {\n  if (dualstackEndpoint)\n    throw new Error(\"Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.\");\n}, \"validateNoDualstack\");\nvar validateNoFIPS = /* @__PURE__ */ __name((useFipsEndpoint) => {\n  if (useFipsEndpoint)\n    throw new Error(`FIPS region is not supported with Outpost.`);\n}, \"validateNoFIPS\");\nvar validateMrapAlias = /* @__PURE__ */ __name((name) => {\n  try {\n    name.split(\".\").forEach((label) => {\n      validateDNSHostLabel(label);\n    });\n  } catch (e) {\n    throw new Error(`\"${name}\" is not a DNS compatible name.`);\n  }\n}, \"validateMrapAlias\");\n\n// src/bucketHostname.ts\nvar bucketHostname = /* @__PURE__ */ __name((options) => {\n  validateCustomEndpoint(options);\n  return isBucketNameOptions(options) ? (\n    // Construct endpoint when bucketName is a string referring to a bucket name\n    getEndpointFromBucketName(options)\n  ) : (\n    // Construct endpoint when bucketName is an ARN referring to an S3 resource like Access Point\n    getEndpointFromArn(options)\n  );\n}, \"bucketHostname\");\nvar getEndpointFromBucketName = /* @__PURE__ */ __name(({\n  accelerateEndpoint = false,\n  clientRegion: region,\n  baseHostname,\n  bucketName,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  pathStyleEndpoint = false,\n  tlsCompatible = true,\n  isCustomEndpoint = false\n}) => {\n  const [clientRegion, hostnameSuffix] = isCustomEndpoint ? [region, baseHostname] : getSuffix(baseHostname);\n  if (pathStyleEndpoint || !isDnsCompatibleBucketName(bucketName) || tlsCompatible && DOT_PATTERN.test(bucketName)) {\n    return {\n      bucketEndpoint: false,\n      hostname: dualstackEndpoint ? `s3.dualstack.${clientRegion}.${hostnameSuffix}` : baseHostname\n    };\n  }\n  if (accelerateEndpoint) {\n    baseHostname = `s3-accelerate${dualstackEndpoint ? \".dualstack\" : \"\"}.${hostnameSuffix}`;\n  } else if (dualstackEndpoint) {\n    baseHostname = `s3.dualstack.${clientRegion}.${hostnameSuffix}`;\n  }\n  return {\n    bucketEndpoint: true,\n    hostname: `${bucketName}.${baseHostname}`\n  };\n}, \"getEndpointFromBucketName\");\nvar getEndpointFromArn = /* @__PURE__ */ __name((options) => {\n  const { isCustomEndpoint, baseHostname, clientRegion } = options;\n  const hostnameSuffix = isCustomEndpoint ? baseHostname : getSuffixForArnEndpoint(baseHostname)[1];\n  const {\n    pathStyleEndpoint,\n    accelerateEndpoint = false,\n    fipsEndpoint = false,\n    tlsCompatible = true,\n    bucketName,\n    clientPartition = \"aws\"\n  } = options;\n  validateArnEndpointOptions({ pathStyleEndpoint, accelerateEndpoint, tlsCompatible });\n  const { service, partition, accountId, region, resource } = bucketName;\n  validateService(service);\n  validatePartition(partition, { clientPartition });\n  validateAccountId(accountId);\n  const { accesspointName, outpostId } = getArnResources(resource);\n  if (service === \"s3-object-lambda\") {\n    return getEndpointFromObjectLambdaArn({ ...options, tlsCompatible, bucketName, accesspointName, hostnameSuffix });\n  }\n  if (region === \"\") {\n    return getEndpointFromMRAPArn({ ...options, clientRegion, mrapAlias: accesspointName, hostnameSuffix });\n  }\n  if (outpostId) {\n    return getEndpointFromOutpostArn({ ...options, clientRegion, outpostId, accesspointName, hostnameSuffix });\n  }\n  return getEndpointFromAccessPointArn({ ...options, clientRegion, accesspointName, hostnameSuffix });\n}, \"getEndpointFromArn\");\nvar getEndpointFromObjectLambdaArn = /* @__PURE__ */ __name(({\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  accesspointName,\n  bucketName,\n  hostnameSuffix\n}) => {\n  const { accountId, region, service } = bucketName;\n  validateRegionalClient(clientRegion);\n  validateRegion(region, {\n    useArnRegion,\n    clientRegion,\n    clientSigningRegion,\n    allowFipsRegion: true,\n    useFipsEndpoint: fipsEndpoint\n  });\n  validateNoDualstack(dualstackEndpoint);\n  const DNSHostLabel = `${accesspointName}-${accountId}`;\n  validateDNSHostLabel(DNSHostLabel, { tlsCompatible });\n  const endpointRegion = useArnRegion ? region : clientRegion;\n  const signingRegion = useArnRegion ? region : clientSigningRegion;\n  return {\n    bucketEndpoint: true,\n    hostname: `${DNSHostLabel}.${service}${fipsEndpoint ? \"-fips\" : \"\"}.${endpointRegion}.${hostnameSuffix}`,\n    signingRegion,\n    signingService: service\n  };\n}, \"getEndpointFromObjectLambdaArn\");\nvar getEndpointFromMRAPArn = /* @__PURE__ */ __name(({\n  disableMultiregionAccessPoints,\n  dualstackEndpoint = false,\n  isCustomEndpoint,\n  mrapAlias,\n  hostnameSuffix\n}) => {\n  if (disableMultiregionAccessPoints === true) {\n    throw new Error(\"SDK is attempting to use a MRAP ARN. Please enable to feature.\");\n  }\n  validateMrapAlias(mrapAlias);\n  validateNoDualstack(dualstackEndpoint);\n  return {\n    bucketEndpoint: true,\n    hostname: `${mrapAlias}${isCustomEndpoint ? \"\" : `.accesspoint.s3-global`}.${hostnameSuffix}`,\n    signingRegion: \"*\"\n  };\n}, \"getEndpointFromMRAPArn\");\nvar getEndpointFromOutpostArn = /* @__PURE__ */ __name(({\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  bucketName,\n  outpostId,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  accesspointName,\n  isCustomEndpoint,\n  hostnameSuffix\n}) => {\n  validateRegionalClient(clientRegion);\n  validateRegion(bucketName.region, { useArnRegion, clientRegion, clientSigningRegion, useFipsEndpoint: fipsEndpoint });\n  const DNSHostLabel = `${accesspointName}-${bucketName.accountId}`;\n  validateDNSHostLabel(DNSHostLabel, { tlsCompatible });\n  const endpointRegion = useArnRegion ? bucketName.region : clientRegion;\n  const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;\n  validateOutpostService(bucketName.service);\n  validateDNSHostLabel(outpostId, { tlsCompatible });\n  validateNoDualstack(dualstackEndpoint);\n  validateNoFIPS(fipsEndpoint);\n  const hostnamePrefix = `${DNSHostLabel}.${outpostId}`;\n  return {\n    bucketEndpoint: true,\n    hostname: `${hostnamePrefix}${isCustomEndpoint ? \"\" : `.s3-outposts.${endpointRegion}`}.${hostnameSuffix}`,\n    signingRegion,\n    signingService: \"s3-outposts\"\n  };\n}, \"getEndpointFromOutpostArn\");\nvar getEndpointFromAccessPointArn = /* @__PURE__ */ __name(({\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  bucketName,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  accesspointName,\n  isCustomEndpoint,\n  hostnameSuffix\n}) => {\n  validateRegionalClient(clientRegion);\n  validateRegion(bucketName.region, {\n    useArnRegion,\n    clientRegion,\n    clientSigningRegion,\n    allowFipsRegion: true,\n    useFipsEndpoint: fipsEndpoint\n  });\n  const hostnamePrefix = `${accesspointName}-${bucketName.accountId}`;\n  validateDNSHostLabel(hostnamePrefix, { tlsCompatible });\n  const endpointRegion = useArnRegion ? bucketName.region : clientRegion;\n  const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;\n  validateS3Service(bucketName.service);\n  return {\n    bucketEndpoint: true,\n    hostname: `${hostnamePrefix}${isCustomEndpoint ? \"\" : `.s3-accesspoint${fipsEndpoint ? \"-fips\" : \"\"}${dualstackEndpoint ? \".dualstack\" : \"\"}.${endpointRegion}`}.${hostnameSuffix}`,\n    signingRegion\n  };\n}, \"getEndpointFromAccessPointArn\");\n\n// src/bucketEndpointMiddleware.ts\nvar bucketEndpointMiddleware = /* @__PURE__ */ __name((options) => (next, context) => async (args) => {\n  const { Bucket: bucketName } = args.input;\n  let replaceBucketInPath = options.bucketEndpoint;\n  const request = args.request;\n  if (import_protocol_http.HttpRequest.isInstance(request)) {\n    if (options.bucketEndpoint) {\n      request.hostname = bucketName;\n    } else if ((0, import_util_arn_parser.validate)(bucketName)) {\n      const bucketArn = (0, import_util_arn_parser.parse)(bucketName);\n      const clientRegion = await options.region();\n      const useDualstackEndpoint = await options.useDualstackEndpoint();\n      const useFipsEndpoint = await options.useFipsEndpoint();\n      const { partition, signingRegion = clientRegion } = await options.regionInfoProvider(clientRegion, { useDualstackEndpoint, useFipsEndpoint }) || {};\n      const useArnRegion = await options.useArnRegion();\n      const {\n        hostname,\n        bucketEndpoint,\n        signingRegion: modifiedSigningRegion,\n        signingService\n      } = bucketHostname({\n        bucketName: bucketArn,\n        baseHostname: request.hostname,\n        accelerateEndpoint: options.useAccelerateEndpoint,\n        dualstackEndpoint: useDualstackEndpoint,\n        fipsEndpoint: useFipsEndpoint,\n        pathStyleEndpoint: options.forcePathStyle,\n        tlsCompatible: request.protocol === \"https:\",\n        useArnRegion,\n        clientPartition: partition,\n        clientSigningRegion: signingRegion,\n        clientRegion,\n        isCustomEndpoint: options.isCustomEndpoint,\n        disableMultiregionAccessPoints: await options.disableMultiregionAccessPoints()\n      });\n      if (modifiedSigningRegion && modifiedSigningRegion !== signingRegion) {\n        context[\"signing_region\"] = modifiedSigningRegion;\n      }\n      if (signingService && signingService !== \"s3\") {\n        context[\"signing_service\"] = signingService;\n      }\n      request.hostname = hostname;\n      replaceBucketInPath = bucketEndpoint;\n    } else {\n      const clientRegion = await options.region();\n      const dualstackEndpoint = await options.useDualstackEndpoint();\n      const fipsEndpoint = await options.useFipsEndpoint();\n      const { hostname, bucketEndpoint } = bucketHostname({\n        bucketName,\n        clientRegion,\n        baseHostname: request.hostname,\n        accelerateEndpoint: options.useAccelerateEndpoint,\n        dualstackEndpoint,\n        fipsEndpoint,\n        pathStyleEndpoint: options.forcePathStyle,\n        tlsCompatible: request.protocol === \"https:\",\n        isCustomEndpoint: options.isCustomEndpoint\n      });\n      request.hostname = hostname;\n      replaceBucketInPath = bucketEndpoint;\n    }\n    if (replaceBucketInPath) {\n      request.path = request.path.replace(/^(\\/)?[^\\/]+/, \"\");\n      if (request.path === \"\") {\n        request.path = \"/\";\n      }\n    }\n  }\n  return next({ ...args, request });\n}, \"bucketEndpointMiddleware\");\nvar bucketEndpointMiddlewareOptions = {\n  tags: [\"BUCKET_ENDPOINT\"],\n  name: \"bucketEndpointMiddleware\",\n  relation: \"before\",\n  toMiddleware: \"hostHeaderMiddleware\",\n  override: true\n};\nvar getBucketEndpointPlugin = /* @__PURE__ */ __name((options) => ({\n  applyToStack: (clientStack) => {\n    clientStack.addRelativeTo(bucketEndpointMiddleware(options), bucketEndpointMiddlewareOptions);\n  }\n}), \"getBucketEndpointPlugin\");\n\n// src/configurations.ts\nfunction resolveBucketEndpointConfig(input) {\n  const {\n    bucketEndpoint = false,\n    forcePathStyle = false,\n    useAccelerateEndpoint = false,\n    useArnRegion = false,\n    disableMultiregionAccessPoints = false\n  } = input;\n  return {\n    ...input,\n    bucketEndpoint,\n    forcePathStyle,\n    useAccelerateEndpoint,\n    useArnRegion: typeof useArnRegion === \"function\" ? useArnRegion : () => Promise.resolve(useArnRegion),\n    disableMultiregionAccessPoints: typeof disableMultiregionAccessPoints === \"function\" ? disableMultiregionAccessPoints : () => Promise.resolve(disableMultiregionAccessPoints)\n  };\n}\n__name(resolveBucketEndpointConfig, \"resolveBucketEndpointConfig\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (0);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGF3cy1zZGsrbWlkZGxld2FyZS1idWNrZXQtZW5kcG9pbnRAMy42OTMuMC9ub2RlX21vZHVsZXMvQGF3cy1zZGsvbWlkZGxld2FyZS1idWNrZXQtZW5kcG9pbnQvZGlzdC1janMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhOztBQUVuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0Esa0NBQWtDLG1CQUFPLENBQUMsOEpBQThCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkJBQTZCLG1CQUFPLENBQUMsb0pBQTBCO0FBQy9ELDJCQUEyQixtQkFBTyxDQUFDLHlJQUF1Qjs7QUFFMUQ7QUFDQSw0Q0FBNEMsS0FBSztBQUNqRCxrQ0FBa0MsRUFBRTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsU0FBUztBQUM3RCxDQUFDO0FBQ0Q7QUFDQSx1SUFBdUkscUJBQXFCO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0JBQWtCO0FBQ2xDLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxDQXFCTCIsInNvdXJjZXMiOlsiL1VzZXJzL2thcmVsbGUvdnNjcHJvamVjdHMvdGVjaC1mbGVldC90YWluby1sYW5ndWFnZS1hcHAvbGVzc29uLWF1dGhvcmluZy9ub2RlX21vZHVsZXMvLnBucG0vQGF3cy1zZGsrbWlkZGxld2FyZS1idWNrZXQtZW5kcG9pbnRAMy42OTMuMC9ub2RlX21vZHVsZXMvQGF3cy1zZGsvbWlkZGxld2FyZS1idWNrZXQtZW5kcG9pbnQvZGlzdC1janMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBzcmNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc3JjX2V4cG9ydHMsIHtcbiAgTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9DT05GSUdfT1BUSU9OUzogKCkgPT4gTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9DT05GSUdfT1BUSU9OUyxcbiAgTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9FTlZfTkFNRTogKCkgPT4gTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9FTlZfTkFNRSxcbiAgTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9JTklfTkFNRTogKCkgPT4gTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9JTklfTkFNRSxcbiAgTk9ERV9VU0VfQVJOX1JFR0lPTl9DT05GSUdfT1BUSU9OUzogKCkgPT4gTk9ERV9VU0VfQVJOX1JFR0lPTl9DT05GSUdfT1BUSU9OUyxcbiAgTk9ERV9VU0VfQVJOX1JFR0lPTl9FTlZfTkFNRTogKCkgPT4gTk9ERV9VU0VfQVJOX1JFR0lPTl9FTlZfTkFNRSxcbiAgTk9ERV9VU0VfQVJOX1JFR0lPTl9JTklfTkFNRTogKCkgPT4gTk9ERV9VU0VfQVJOX1JFR0lPTl9JTklfTkFNRSxcbiAgYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlOiAoKSA9PiBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmUsXG4gIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZU9wdGlvbnM6ICgpID0+IGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZU9wdGlvbnMsXG4gIGJ1Y2tldEhvc3RuYW1lOiAoKSA9PiBidWNrZXRIb3N0bmFtZSxcbiAgZ2V0QXJuUmVzb3VyY2VzOiAoKSA9PiBnZXRBcm5SZXNvdXJjZXMsXG4gIGdldEJ1Y2tldEVuZHBvaW50UGx1Z2luOiAoKSA9PiBnZXRCdWNrZXRFbmRwb2ludFBsdWdpbixcbiAgZ2V0U3VmZml4Rm9yQXJuRW5kcG9pbnQ6ICgpID0+IGdldFN1ZmZpeEZvckFybkVuZHBvaW50LFxuICByZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWc6ICgpID0+IHJlc29sdmVCdWNrZXRFbmRwb2ludENvbmZpZyxcbiAgdmFsaWRhdGVBY2NvdW50SWQ6ICgpID0+IHZhbGlkYXRlQWNjb3VudElkLFxuICB2YWxpZGF0ZUROU0hvc3RMYWJlbDogKCkgPT4gdmFsaWRhdGVETlNIb3N0TGFiZWwsXG4gIHZhbGlkYXRlTm9EdWFsc3RhY2s6ICgpID0+IHZhbGlkYXRlTm9EdWFsc3RhY2ssXG4gIHZhbGlkYXRlTm9GSVBTOiAoKSA9PiB2YWxpZGF0ZU5vRklQUyxcbiAgdmFsaWRhdGVPdXRwb3N0U2VydmljZTogKCkgPT4gdmFsaWRhdGVPdXRwb3N0U2VydmljZSxcbiAgdmFsaWRhdGVQYXJ0aXRpb246ICgpID0+IHZhbGlkYXRlUGFydGl0aW9uLFxuICB2YWxpZGF0ZVJlZ2lvbjogKCkgPT4gdmFsaWRhdGVSZWdpb25cbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xuXG4vLyBzcmMvTm9kZURpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50Q29uZmlnT3B0aW9ucy50c1xudmFyIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlciA9IHJlcXVpcmUoXCJAc21pdGh5L3V0aWwtY29uZmlnLXByb3ZpZGVyXCIpO1xudmFyIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfRU5WX05BTUUgPSBcIkFXU19TM19ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVFNcIjtcbnZhciBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0lOSV9OQU1FID0gXCJzM19kaXNhYmxlX211bHRpcmVnaW9uX2FjY2Vzc19wb2ludHNcIjtcbnZhciBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0NPTkZJR19PUFRJT05TID0ge1xuICBlbnZpcm9ubWVudFZhcmlhYmxlU2VsZWN0b3I6IChlbnYpID0+ICgwLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuYm9vbGVhblNlbGVjdG9yKShlbnYsIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfRU5WX05BTUUsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5TZWxlY3RvclR5cGUuRU5WKSxcbiAgY29uZmlnRmlsZVNlbGVjdG9yOiAocHJvZmlsZSkgPT4gKDAsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5ib29sZWFuU2VsZWN0b3IpKHByb2ZpbGUsIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfSU5JX05BTUUsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5TZWxlY3RvclR5cGUuQ09ORklHKSxcbiAgZGVmYXVsdDogZmFsc2Vcbn07XG5cbi8vIHNyYy9Ob2RlVXNlQXJuUmVnaW9uQ29uZmlnT3B0aW9ucy50c1xuXG52YXIgTk9ERV9VU0VfQVJOX1JFR0lPTl9FTlZfTkFNRSA9IFwiQVdTX1MzX1VTRV9BUk5fUkVHSU9OXCI7XG52YXIgTk9ERV9VU0VfQVJOX1JFR0lPTl9JTklfTkFNRSA9IFwiczNfdXNlX2Fybl9yZWdpb25cIjtcbnZhciBOT0RFX1VTRV9BUk5fUkVHSU9OX0NPTkZJR19PUFRJT05TID0ge1xuICBlbnZpcm9ubWVudFZhcmlhYmxlU2VsZWN0b3I6IChlbnYpID0+ICgwLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuYm9vbGVhblNlbGVjdG9yKShlbnYsIE5PREVfVVNFX0FSTl9SRUdJT05fRU5WX05BTUUsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5TZWxlY3RvclR5cGUuRU5WKSxcbiAgY29uZmlnRmlsZVNlbGVjdG9yOiAocHJvZmlsZSkgPT4gKDAsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5ib29sZWFuU2VsZWN0b3IpKHByb2ZpbGUsIE5PREVfVVNFX0FSTl9SRUdJT05fSU5JX05BTUUsIGltcG9ydF91dGlsX2NvbmZpZ19wcm92aWRlci5TZWxlY3RvclR5cGUuQ09ORklHKSxcbiAgZGVmYXVsdDogZmFsc2Vcbn07XG5cbi8vIHNyYy9idWNrZXRFbmRwb2ludE1pZGRsZXdhcmUudHNcbnZhciBpbXBvcnRfdXRpbF9hcm5fcGFyc2VyID0gcmVxdWlyZShcIkBhd3Mtc2RrL3V0aWwtYXJuLXBhcnNlclwiKTtcbnZhciBpbXBvcnRfcHJvdG9jb2xfaHR0cCA9IHJlcXVpcmUoXCJAc21pdGh5L3Byb3RvY29sLWh0dHBcIik7XG5cbi8vIHNyYy9idWNrZXRIb3N0bmFtZVV0aWxzLnRzXG52YXIgRE9NQUlOX1BBVFRFUk4gPSAvXlthLXowLTldW2EtejAtOVxcLlxcLV17MSw2MX1bYS16MC05XSQvO1xudmFyIElQX0FERFJFU1NfUEFUVEVSTiA9IC8oXFxkK1xcLil7M31cXGQrLztcbnZhciBET1RTX1BBVFRFUk4gPSAvXFwuXFwuLztcbnZhciBET1RfUEFUVEVSTiA9IC9cXC4vO1xudmFyIFMzX0hPU1ROQU1FX1BBVFRFUk4gPSAvXiguK1xcLik/czMoLWZpcHMpPyhcXC5kdWFsc3RhY2spP1suLV0oW2EtejAtOS1dKylcXC4vO1xudmFyIFMzX1VTX0VBU1RfMV9BTFROQU1FX1BBVFRFUk4gPSAvXnMzKC1leHRlcm5hbC0xKT9cXC5hbWF6b25hd3NcXC5jb20kLztcbnZhciBBV1NfUEFSVElUSU9OX1NVRkZJWCA9IFwiYW1hem9uYXdzLmNvbVwiO1xudmFyIGlzQnVja2V0TmFtZU9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB0eXBlb2Ygb3B0aW9ucy5idWNrZXROYW1lID09PSBcInN0cmluZ1wiLCBcImlzQnVja2V0TmFtZU9wdGlvbnNcIik7XG52YXIgaXNEbnNDb21wYXRpYmxlQnVja2V0TmFtZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGJ1Y2tldE5hbWUpID0+IERPTUFJTl9QQVRURVJOLnRlc3QoYnVja2V0TmFtZSkgJiYgIUlQX0FERFJFU1NfUEFUVEVSTi50ZXN0KGJ1Y2tldE5hbWUpICYmICFET1RTX1BBVFRFUk4udGVzdChidWNrZXROYW1lKSwgXCJpc0Ruc0NvbXBhdGlibGVCdWNrZXROYW1lXCIpO1xudmFyIGdldFJlZ2lvbmFsU3VmZml4ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoaG9zdG5hbWUpID0+IHtcbiAgY29uc3QgcGFydHMgPSBob3N0bmFtZS5tYXRjaChTM19IT1NUTkFNRV9QQVRURVJOKTtcbiAgcmV0dXJuIFtwYXJ0c1s0XSwgaG9zdG5hbWUucmVwbGFjZShuZXcgUmVnRXhwKGBeJHtwYXJ0c1swXX1gKSwgXCJcIildO1xufSwgXCJnZXRSZWdpb25hbFN1ZmZpeFwiKTtcbnZhciBnZXRTdWZmaXggPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChob3N0bmFtZSkgPT4gUzNfVVNfRUFTVF8xX0FMVE5BTUVfUEFUVEVSTi50ZXN0KGhvc3RuYW1lKSA/IFtcInVzLWVhc3QtMVwiLCBBV1NfUEFSVElUSU9OX1NVRkZJWF0gOiBnZXRSZWdpb25hbFN1ZmZpeChob3N0bmFtZSksIFwiZ2V0U3VmZml4XCIpO1xudmFyIGdldFN1ZmZpeEZvckFybkVuZHBvaW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoaG9zdG5hbWUpID0+IFMzX1VTX0VBU1RfMV9BTFROQU1FX1BBVFRFUk4udGVzdChob3N0bmFtZSkgPyBbaG9zdG5hbWUucmVwbGFjZShgLiR7QVdTX1BBUlRJVElPTl9TVUZGSVh9YCwgXCJcIiksIEFXU19QQVJUSVRJT05fU1VGRklYXSA6IGdldFJlZ2lvbmFsU3VmZml4KGhvc3RuYW1lKSwgXCJnZXRTdWZmaXhGb3JBcm5FbmRwb2ludFwiKTtcbnZhciB2YWxpZGF0ZUFybkVuZHBvaW50T3B0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9wdGlvbnMpID0+IHtcbiAgaWYgKG9wdGlvbnMucGF0aFN0eWxlRW5kcG9pbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXRoLXN0eWxlIFMzIGVuZHBvaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiBidWNrZXQgaXMgYW4gQVJOXCIpO1xuICB9XG4gIGlmIChvcHRpb25zLmFjY2VsZXJhdGVFbmRwb2ludCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFjY2VsZXJhdGUgZW5kcG9pbnQgaXMgbm90IHN1cHBvcnRlZCB3aGVuIGJ1Y2tldCBpcyBhbiBBUk5cIik7XG4gIH1cbiAgaWYgKCFvcHRpb25zLnRsc0NvbXBhdGlibGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJIVFRQUyBpcyByZXF1aXJlZCB3aGVuIGJ1Y2tldCBpcyBhbiBBUk5cIik7XG4gIH1cbn0sIFwidmFsaWRhdGVBcm5FbmRwb2ludE9wdGlvbnNcIik7XG52YXIgdmFsaWRhdGVTZXJ2aWNlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc2VydmljZSkgPT4ge1xuICBpZiAoc2VydmljZSAhPT0gXCJzM1wiICYmIHNlcnZpY2UgIT09IFwiczMtb3V0cG9zdHNcIiAmJiBzZXJ2aWNlICE9PSBcInMzLW9iamVjdC1sYW1iZGFcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdCAnczMnIG9yICdzMy1vdXRwb3N0cycgb3IgJ3MzLW9iamVjdC1sYW1iZGEnIGluIEFSTiBzZXJ2aWNlIGNvbXBvbmVudFwiKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZVNlcnZpY2VcIik7XG52YXIgdmFsaWRhdGVTM1NlcnZpY2UgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzZXJ2aWNlKSA9PiB7XG4gIGlmIChzZXJ2aWNlICE9PSBcInMzXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3QgJ3MzJyBpbiBBY2Nlc3Nwb2ludCBBUk4gc2VydmljZSBjb21wb25lbnRcIik7XG4gIH1cbn0sIFwidmFsaWRhdGVTM1NlcnZpY2VcIik7XG52YXIgdmFsaWRhdGVPdXRwb3N0U2VydmljZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHNlcnZpY2UpID0+IHtcbiAgaWYgKHNlcnZpY2UgIT09IFwiczMtb3V0cG9zdHNcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdCAnczMtcG9zdHMnIGluIE91dHBvc3QgQVJOIHNlcnZpY2UgY29tcG9uZW50XCIpO1xuICB9XG59LCBcInZhbGlkYXRlT3V0cG9zdFNlcnZpY2VcIik7XG52YXIgdmFsaWRhdGVQYXJ0aXRpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChwYXJ0aXRpb24sIG9wdGlvbnMpID0+IHtcbiAgaWYgKHBhcnRpdGlvbiAhPT0gb3B0aW9ucy5jbGllbnRQYXJ0aXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFBhcnRpdGlvbiBpbiBBUk4gaXMgaW5jb21wYXRpYmxlLCBnb3QgXCIke3BhcnRpdGlvbn1cIiBidXQgZXhwZWN0ZWQgXCIke29wdGlvbnMuY2xpZW50UGFydGl0aW9ufVwiYCk7XG4gIH1cbn0sIFwidmFsaWRhdGVQYXJ0aXRpb25cIik7XG52YXIgdmFsaWRhdGVSZWdpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZWdpb24sIG9wdGlvbnMpID0+IHtcbiAgaWYgKHJlZ2lvbiA9PT0gXCJcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFSTiByZWdpb24gaXMgZW1wdHlcIik7XG4gIH1cbiAgaWYgKG9wdGlvbnMudXNlRmlwc0VuZHBvaW50KSB7XG4gICAgaWYgKCFvcHRpb25zLmFsbG93Rmlwc1JlZ2lvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRklQUyByZWdpb24gaXMgbm90IHN1cHBvcnRlZFwiKTtcbiAgICB9IGVsc2UgaWYgKCFpc0VxdWFsUmVnaW9ucyhyZWdpb24sIG9wdGlvbnMuY2xpZW50UmVnaW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgRklQUyByZWdpb24gJHtvcHRpb25zLmNsaWVudFJlZ2lvbn0gZG9lc24ndCBtYXRjaCByZWdpb24gJHtyZWdpb259IGluIEFSTmApO1xuICAgIH1cbiAgfVxuICBpZiAoIW9wdGlvbnMudXNlQXJuUmVnaW9uICYmICFpc0VxdWFsUmVnaW9ucyhyZWdpb24sIG9wdGlvbnMuY2xpZW50UmVnaW9uIHx8IFwiXCIpICYmICFpc0VxdWFsUmVnaW9ucyhyZWdpb24sIG9wdGlvbnMuY2xpZW50U2lnbmluZ1JlZ2lvbiB8fCBcIlwiKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVnaW9uIGluIEFSTiBpcyBpbmNvbXBhdGlibGUsIGdvdCAke3JlZ2lvbn0gYnV0IGV4cGVjdGVkICR7b3B0aW9ucy5jbGllbnRSZWdpb259YCk7XG4gIH1cbn0sIFwidmFsaWRhdGVSZWdpb25cIik7XG52YXIgdmFsaWRhdGVSZWdpb25hbENsaWVudCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHJlZ2lvbikgPT4ge1xuICBpZiAoW1wiczMtZXh0ZXJuYWwtMVwiLCBcImF3cy1nbG9iYWxcIl0uaW5jbHVkZXMocmVnaW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2xpZW50IHJlZ2lvbiAke3JlZ2lvbn0gaXMgbm90IHJlZ2lvbmFsYCk7XG4gIH1cbn0sIFwidmFsaWRhdGVSZWdpb25hbENsaWVudFwiKTtcbnZhciBpc0VxdWFsUmVnaW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHJlZ2lvbkEsIHJlZ2lvbkIpID0+IHJlZ2lvbkEgPT09IHJlZ2lvbkIsIFwiaXNFcXVhbFJlZ2lvbnNcIik7XG52YXIgdmFsaWRhdGVBY2NvdW50SWQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhY2NvdW50SWQpID0+IHtcbiAgaWYgKCEvWzAtOV17MTJ9Ly5leGVjKGFjY291bnRJZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBY2Nlc3MgcG9pbnQgQVJOIGFjY291bnRJRCBkb2VzIG5vdCBtYXRjaCByZWdleCAnWzAtOV17MTJ9J1wiKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZUFjY291bnRJZFwiKTtcbnZhciB2YWxpZGF0ZUROU0hvc3RMYWJlbCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGxhYmVsLCBvcHRpb25zID0geyB0bHNDb21wYXRpYmxlOiB0cnVlIH0pID0+IHtcbiAgaWYgKGxhYmVsLmxlbmd0aCA+PSA2NCB8fCAhL15bYS16MC05XVthLXowLTkuLV0qW2EtejAtOV0kLy50ZXN0KGxhYmVsKSB8fCAvKFxcZCtcXC4pezN9XFxkKy8udGVzdChsYWJlbCkgfHwgL1suLV17Mn0vLnRlc3QobGFiZWwpIHx8IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnRsc0NvbXBhdGlibGUpICYmIERPVF9QQVRURVJOLnRlc3QobGFiZWwpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEROUyBsYWJlbCAke2xhYmVsfWApO1xuICB9XG59LCBcInZhbGlkYXRlRE5TSG9zdExhYmVsXCIpO1xudmFyIHZhbGlkYXRlQ3VzdG9tRW5kcG9pbnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB7XG4gIGlmIChvcHRpb25zLmlzQ3VzdG9tRW5kcG9pbnQpIHtcbiAgICBpZiAob3B0aW9ucy5kdWFsc3RhY2tFbmRwb2ludClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkR1YWxzdGFjayBlbmRwb2ludCBpcyBub3Qgc3VwcG9ydGVkIHdpdGggY3VzdG9tIGVuZHBvaW50XCIpO1xuICAgIGlmIChvcHRpb25zLmFjY2VsZXJhdGVFbmRwb2ludClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFjY2VsZXJhdGUgZW5kcG9pbnQgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGN1c3RvbSBlbmRwb2ludFwiKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZUN1c3RvbUVuZHBvaW50XCIpO1xudmFyIGdldEFyblJlc291cmNlcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHJlc291cmNlKSA9PiB7XG4gIGNvbnN0IGRlbGltaXRlciA9IHJlc291cmNlLmluY2x1ZGVzKFwiOlwiKSA/IFwiOlwiIDogXCIvXCI7XG4gIGNvbnN0IFtyZXNvdXJjZVR5cGUsIC4uLnJlc3RdID0gcmVzb3VyY2Uuc3BsaXQoZGVsaW1pdGVyKTtcbiAgaWYgKHJlc291cmNlVHlwZSA9PT0gXCJhY2Nlc3Nwb2ludFwiKSB7XG4gICAgaWYgKHJlc3QubGVuZ3RoICE9PSAxIHx8IHJlc3RbMF0gPT09IFwiXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWNjZXNzIFBvaW50IEFSTiBzaG91bGQgaGF2ZSBvbmUgcmVzb3VyY2UgYWNjZXNzcG9pbnQke2RlbGltaXRlcn17YWNjZXNzcG9pbnRuYW1lfWApO1xuICAgIH1cbiAgICByZXR1cm4geyBhY2Nlc3Nwb2ludE5hbWU6IHJlc3RbMF0gfTtcbiAgfSBlbHNlIGlmIChyZXNvdXJjZVR5cGUgPT09IFwib3V0cG9zdFwiKSB7XG4gICAgaWYgKCFyZXN0WzBdIHx8IHJlc3RbMV0gIT09IFwiYWNjZXNzcG9pbnRcIiB8fCAhcmVzdFsyXSB8fCByZXN0Lmxlbmd0aCAhPT0gMykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgT3V0cG9zdCBBUk4gc2hvdWxkIGhhdmUgcmVzb3VyY2Ugb3V0cG9zdCR7ZGVsaW1pdGVyfXtvdXRwb3N0SWR9JHtkZWxpbWl0ZXJ9YWNjZXNzcG9pbnQke2RlbGltaXRlcn17YWNjZXNzcG9pbnROYW1lfWBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IFtvdXRwb3N0SWQsIF8sIGFjY2Vzc3BvaW50TmFtZV0gPSByZXN0O1xuICAgIHJldHVybiB7IG91dHBvc3RJZCwgYWNjZXNzcG9pbnROYW1lIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBUk4gcmVzb3VyY2Ugc2hvdWxkIGJlZ2luIHdpdGggJ2FjY2Vzc3BvaW50JHtkZWxpbWl0ZXJ9JyBvciAnb3V0cG9zdCR7ZGVsaW1pdGVyfSdgKTtcbiAgfVxufSwgXCJnZXRBcm5SZXNvdXJjZXNcIik7XG52YXIgdmFsaWRhdGVOb0R1YWxzdGFjayA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGR1YWxzdGFja0VuZHBvaW50KSA9PiB7XG4gIGlmIChkdWFsc3RhY2tFbmRwb2ludClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEdWFsc3RhY2sgZW5kcG9pbnQgaXMgbm90IHN1cHBvcnRlZCB3aXRoIE91dHBvc3Qgb3IgTXVsdGktcmVnaW9uIEFjY2VzcyBQb2ludCBBUk4uXCIpO1xufSwgXCJ2YWxpZGF0ZU5vRHVhbHN0YWNrXCIpO1xudmFyIHZhbGlkYXRlTm9GSVBTID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgodXNlRmlwc0VuZHBvaW50KSA9PiB7XG4gIGlmICh1c2VGaXBzRW5kcG9pbnQpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGSVBTIHJlZ2lvbiBpcyBub3Qgc3VwcG9ydGVkIHdpdGggT3V0cG9zdC5gKTtcbn0sIFwidmFsaWRhdGVOb0ZJUFNcIik7XG52YXIgdmFsaWRhdGVNcmFwQWxpYXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChuYW1lKSA9PiB7XG4gIHRyeSB7XG4gICAgbmFtZS5zcGxpdChcIi5cIikuZm9yRWFjaCgobGFiZWwpID0+IHtcbiAgICAgIHZhbGlkYXRlRE5TSG9zdExhYmVsKGxhYmVsKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgXCIke25hbWV9XCIgaXMgbm90IGEgRE5TIGNvbXBhdGlibGUgbmFtZS5gKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZU1yYXBBbGlhc1wiKTtcblxuLy8gc3JjL2J1Y2tldEhvc3RuYW1lLnRzXG52YXIgYnVja2V0SG9zdG5hbWUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB7XG4gIHZhbGlkYXRlQ3VzdG9tRW5kcG9pbnQob3B0aW9ucyk7XG4gIHJldHVybiBpc0J1Y2tldE5hbWVPcHRpb25zKG9wdGlvbnMpID8gKFxuICAgIC8vIENvbnN0cnVjdCBlbmRwb2ludCB3aGVuIGJ1Y2tldE5hbWUgaXMgYSBzdHJpbmcgcmVmZXJyaW5nIHRvIGEgYnVja2V0IG5hbWVcbiAgICBnZXRFbmRwb2ludEZyb21CdWNrZXROYW1lKG9wdGlvbnMpXG4gICkgOiAoXG4gICAgLy8gQ29uc3RydWN0IGVuZHBvaW50IHdoZW4gYnVja2V0TmFtZSBpcyBhbiBBUk4gcmVmZXJyaW5nIHRvIGFuIFMzIHJlc291cmNlIGxpa2UgQWNjZXNzIFBvaW50XG4gICAgZ2V0RW5kcG9pbnRGcm9tQXJuKG9wdGlvbnMpXG4gICk7XG59LCBcImJ1Y2tldEhvc3RuYW1lXCIpO1xudmFyIGdldEVuZHBvaW50RnJvbUJ1Y2tldE5hbWUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh7XG4gIGFjY2VsZXJhdGVFbmRwb2ludCA9IGZhbHNlLFxuICBjbGllbnRSZWdpb246IHJlZ2lvbixcbiAgYmFzZUhvc3RuYW1lLFxuICBidWNrZXROYW1lLFxuICBkdWFsc3RhY2tFbmRwb2ludCA9IGZhbHNlLFxuICBmaXBzRW5kcG9pbnQgPSBmYWxzZSxcbiAgcGF0aFN0eWxlRW5kcG9pbnQgPSBmYWxzZSxcbiAgdGxzQ29tcGF0aWJsZSA9IHRydWUsXG4gIGlzQ3VzdG9tRW5kcG9pbnQgPSBmYWxzZVxufSkgPT4ge1xuICBjb25zdCBbY2xpZW50UmVnaW9uLCBob3N0bmFtZVN1ZmZpeF0gPSBpc0N1c3RvbUVuZHBvaW50ID8gW3JlZ2lvbiwgYmFzZUhvc3RuYW1lXSA6IGdldFN1ZmZpeChiYXNlSG9zdG5hbWUpO1xuICBpZiAocGF0aFN0eWxlRW5kcG9pbnQgfHwgIWlzRG5zQ29tcGF0aWJsZUJ1Y2tldE5hbWUoYnVja2V0TmFtZSkgfHwgdGxzQ29tcGF0aWJsZSAmJiBET1RfUEFUVEVSTi50ZXN0KGJ1Y2tldE5hbWUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJ1Y2tldEVuZHBvaW50OiBmYWxzZSxcbiAgICAgIGhvc3RuYW1lOiBkdWFsc3RhY2tFbmRwb2ludCA/IGBzMy5kdWFsc3RhY2suJHtjbGllbnRSZWdpb259LiR7aG9zdG5hbWVTdWZmaXh9YCA6IGJhc2VIb3N0bmFtZVxuICAgIH07XG4gIH1cbiAgaWYgKGFjY2VsZXJhdGVFbmRwb2ludCkge1xuICAgIGJhc2VIb3N0bmFtZSA9IGBzMy1hY2NlbGVyYXRlJHtkdWFsc3RhY2tFbmRwb2ludCA/IFwiLmR1YWxzdGFja1wiIDogXCJcIn0uJHtob3N0bmFtZVN1ZmZpeH1gO1xuICB9IGVsc2UgaWYgKGR1YWxzdGFja0VuZHBvaW50KSB7XG4gICAgYmFzZUhvc3RuYW1lID0gYHMzLmR1YWxzdGFjay4ke2NsaWVudFJlZ2lvbn0uJHtob3N0bmFtZVN1ZmZpeH1gO1xuICB9XG4gIHJldHVybiB7XG4gICAgYnVja2V0RW5kcG9pbnQ6IHRydWUsXG4gICAgaG9zdG5hbWU6IGAke2J1Y2tldE5hbWV9LiR7YmFzZUhvc3RuYW1lfWBcbiAgfTtcbn0sIFwiZ2V0RW5kcG9pbnRGcm9tQnVja2V0TmFtZVwiKTtcbnZhciBnZXRFbmRwb2ludEZyb21Bcm4gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHsgaXNDdXN0b21FbmRwb2ludCwgYmFzZUhvc3RuYW1lLCBjbGllbnRSZWdpb24gfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGhvc3RuYW1lU3VmZml4ID0gaXNDdXN0b21FbmRwb2ludCA/IGJhc2VIb3N0bmFtZSA6IGdldFN1ZmZpeEZvckFybkVuZHBvaW50KGJhc2VIb3N0bmFtZSlbMV07XG4gIGNvbnN0IHtcbiAgICBwYXRoU3R5bGVFbmRwb2ludCxcbiAgICBhY2NlbGVyYXRlRW5kcG9pbnQgPSBmYWxzZSxcbiAgICBmaXBzRW5kcG9pbnQgPSBmYWxzZSxcbiAgICB0bHNDb21wYXRpYmxlID0gdHJ1ZSxcbiAgICBidWNrZXROYW1lLFxuICAgIGNsaWVudFBhcnRpdGlvbiA9IFwiYXdzXCJcbiAgfSA9IG9wdGlvbnM7XG4gIHZhbGlkYXRlQXJuRW5kcG9pbnRPcHRpb25zKHsgcGF0aFN0eWxlRW5kcG9pbnQsIGFjY2VsZXJhdGVFbmRwb2ludCwgdGxzQ29tcGF0aWJsZSB9KTtcbiAgY29uc3QgeyBzZXJ2aWNlLCBwYXJ0aXRpb24sIGFjY291bnRJZCwgcmVnaW9uLCByZXNvdXJjZSB9ID0gYnVja2V0TmFtZTtcbiAgdmFsaWRhdGVTZXJ2aWNlKHNlcnZpY2UpO1xuICB2YWxpZGF0ZVBhcnRpdGlvbihwYXJ0aXRpb24sIHsgY2xpZW50UGFydGl0aW9uIH0pO1xuICB2YWxpZGF0ZUFjY291bnRJZChhY2NvdW50SWQpO1xuICBjb25zdCB7IGFjY2Vzc3BvaW50TmFtZSwgb3V0cG9zdElkIH0gPSBnZXRBcm5SZXNvdXJjZXMocmVzb3VyY2UpO1xuICBpZiAoc2VydmljZSA9PT0gXCJzMy1vYmplY3QtbGFtYmRhXCIpIHtcbiAgICByZXR1cm4gZ2V0RW5kcG9pbnRGcm9tT2JqZWN0TGFtYmRhQXJuKHsgLi4ub3B0aW9ucywgdGxzQ29tcGF0aWJsZSwgYnVja2V0TmFtZSwgYWNjZXNzcG9pbnROYW1lLCBob3N0bmFtZVN1ZmZpeCB9KTtcbiAgfVxuICBpZiAocmVnaW9uID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIGdldEVuZHBvaW50RnJvbU1SQVBBcm4oeyAuLi5vcHRpb25zLCBjbGllbnRSZWdpb24sIG1yYXBBbGlhczogYWNjZXNzcG9pbnROYW1lLCBob3N0bmFtZVN1ZmZpeCB9KTtcbiAgfVxuICBpZiAob3V0cG9zdElkKSB7XG4gICAgcmV0dXJuIGdldEVuZHBvaW50RnJvbU91dHBvc3RBcm4oeyAuLi5vcHRpb25zLCBjbGllbnRSZWdpb24sIG91dHBvc3RJZCwgYWNjZXNzcG9pbnROYW1lLCBob3N0bmFtZVN1ZmZpeCB9KTtcbiAgfVxuICByZXR1cm4gZ2V0RW5kcG9pbnRGcm9tQWNjZXNzUG9pbnRBcm4oeyAuLi5vcHRpb25zLCBjbGllbnRSZWdpb24sIGFjY2Vzc3BvaW50TmFtZSwgaG9zdG5hbWVTdWZmaXggfSk7XG59LCBcImdldEVuZHBvaW50RnJvbUFyblwiKTtcbnZhciBnZXRFbmRwb2ludEZyb21PYmplY3RMYW1iZGFBcm4gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh7XG4gIGR1YWxzdGFja0VuZHBvaW50ID0gZmFsc2UsXG4gIGZpcHNFbmRwb2ludCA9IGZhbHNlLFxuICB0bHNDb21wYXRpYmxlID0gdHJ1ZSxcbiAgdXNlQXJuUmVnaW9uLFxuICBjbGllbnRSZWdpb24sXG4gIGNsaWVudFNpZ25pbmdSZWdpb24gPSBjbGllbnRSZWdpb24sXG4gIGFjY2Vzc3BvaW50TmFtZSxcbiAgYnVja2V0TmFtZSxcbiAgaG9zdG5hbWVTdWZmaXhcbn0pID0+IHtcbiAgY29uc3QgeyBhY2NvdW50SWQsIHJlZ2lvbiwgc2VydmljZSB9ID0gYnVja2V0TmFtZTtcbiAgdmFsaWRhdGVSZWdpb25hbENsaWVudChjbGllbnRSZWdpb24pO1xuICB2YWxpZGF0ZVJlZ2lvbihyZWdpb24sIHtcbiAgICB1c2VBcm5SZWdpb24sXG4gICAgY2xpZW50UmVnaW9uLFxuICAgIGNsaWVudFNpZ25pbmdSZWdpb24sXG4gICAgYWxsb3dGaXBzUmVnaW9uOiB0cnVlLFxuICAgIHVzZUZpcHNFbmRwb2ludDogZmlwc0VuZHBvaW50XG4gIH0pO1xuICB2YWxpZGF0ZU5vRHVhbHN0YWNrKGR1YWxzdGFja0VuZHBvaW50KTtcbiAgY29uc3QgRE5TSG9zdExhYmVsID0gYCR7YWNjZXNzcG9pbnROYW1lfS0ke2FjY291bnRJZH1gO1xuICB2YWxpZGF0ZUROU0hvc3RMYWJlbChETlNIb3N0TGFiZWwsIHsgdGxzQ29tcGF0aWJsZSB9KTtcbiAgY29uc3QgZW5kcG9pbnRSZWdpb24gPSB1c2VBcm5SZWdpb24gPyByZWdpb24gOiBjbGllbnRSZWdpb247XG4gIGNvbnN0IHNpZ25pbmdSZWdpb24gPSB1c2VBcm5SZWdpb24gPyByZWdpb24gOiBjbGllbnRTaWduaW5nUmVnaW9uO1xuICByZXR1cm4ge1xuICAgIGJ1Y2tldEVuZHBvaW50OiB0cnVlLFxuICAgIGhvc3RuYW1lOiBgJHtETlNIb3N0TGFiZWx9LiR7c2VydmljZX0ke2ZpcHNFbmRwb2ludCA/IFwiLWZpcHNcIiA6IFwiXCJ9LiR7ZW5kcG9pbnRSZWdpb259LiR7aG9zdG5hbWVTdWZmaXh9YCxcbiAgICBzaWduaW5nUmVnaW9uLFxuICAgIHNpZ25pbmdTZXJ2aWNlOiBzZXJ2aWNlXG4gIH07XG59LCBcImdldEVuZHBvaW50RnJvbU9iamVjdExhbWJkYUFyblwiKTtcbnZhciBnZXRFbmRwb2ludEZyb21NUkFQQXJuID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoe1xuICBkaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHMsXG4gIGR1YWxzdGFja0VuZHBvaW50ID0gZmFsc2UsXG4gIGlzQ3VzdG9tRW5kcG9pbnQsXG4gIG1yYXBBbGlhcyxcbiAgaG9zdG5hbWVTdWZmaXhcbn0pID0+IHtcbiAgaWYgKGRpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50cyA9PT0gdHJ1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNESyBpcyBhdHRlbXB0aW5nIHRvIHVzZSBhIE1SQVAgQVJOLiBQbGVhc2UgZW5hYmxlIHRvIGZlYXR1cmUuXCIpO1xuICB9XG4gIHZhbGlkYXRlTXJhcEFsaWFzKG1yYXBBbGlhcyk7XG4gIHZhbGlkYXRlTm9EdWFsc3RhY2soZHVhbHN0YWNrRW5kcG9pbnQpO1xuICByZXR1cm4ge1xuICAgIGJ1Y2tldEVuZHBvaW50OiB0cnVlLFxuICAgIGhvc3RuYW1lOiBgJHttcmFwQWxpYXN9JHtpc0N1c3RvbUVuZHBvaW50ID8gXCJcIiA6IGAuYWNjZXNzcG9pbnQuczMtZ2xvYmFsYH0uJHtob3N0bmFtZVN1ZmZpeH1gLFxuICAgIHNpZ25pbmdSZWdpb246IFwiKlwiXG4gIH07XG59LCBcImdldEVuZHBvaW50RnJvbU1SQVBBcm5cIik7XG52YXIgZ2V0RW5kcG9pbnRGcm9tT3V0cG9zdEFybiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHtcbiAgdXNlQXJuUmVnaW9uLFxuICBjbGllbnRSZWdpb24sXG4gIGNsaWVudFNpZ25pbmdSZWdpb24gPSBjbGllbnRSZWdpb24sXG4gIGJ1Y2tldE5hbWUsXG4gIG91dHBvc3RJZCxcbiAgZHVhbHN0YWNrRW5kcG9pbnQgPSBmYWxzZSxcbiAgZmlwc0VuZHBvaW50ID0gZmFsc2UsXG4gIHRsc0NvbXBhdGlibGUgPSB0cnVlLFxuICBhY2Nlc3Nwb2ludE5hbWUsXG4gIGlzQ3VzdG9tRW5kcG9pbnQsXG4gIGhvc3RuYW1lU3VmZml4XG59KSA9PiB7XG4gIHZhbGlkYXRlUmVnaW9uYWxDbGllbnQoY2xpZW50UmVnaW9uKTtcbiAgdmFsaWRhdGVSZWdpb24oYnVja2V0TmFtZS5yZWdpb24sIHsgdXNlQXJuUmVnaW9uLCBjbGllbnRSZWdpb24sIGNsaWVudFNpZ25pbmdSZWdpb24sIHVzZUZpcHNFbmRwb2ludDogZmlwc0VuZHBvaW50IH0pO1xuICBjb25zdCBETlNIb3N0TGFiZWwgPSBgJHthY2Nlc3Nwb2ludE5hbWV9LSR7YnVja2V0TmFtZS5hY2NvdW50SWR9YDtcbiAgdmFsaWRhdGVETlNIb3N0TGFiZWwoRE5TSG9zdExhYmVsLCB7IHRsc0NvbXBhdGlibGUgfSk7XG4gIGNvbnN0IGVuZHBvaW50UmVnaW9uID0gdXNlQXJuUmVnaW9uID8gYnVja2V0TmFtZS5yZWdpb24gOiBjbGllbnRSZWdpb247XG4gIGNvbnN0IHNpZ25pbmdSZWdpb24gPSB1c2VBcm5SZWdpb24gPyBidWNrZXROYW1lLnJlZ2lvbiA6IGNsaWVudFNpZ25pbmdSZWdpb247XG4gIHZhbGlkYXRlT3V0cG9zdFNlcnZpY2UoYnVja2V0TmFtZS5zZXJ2aWNlKTtcbiAgdmFsaWRhdGVETlNIb3N0TGFiZWwob3V0cG9zdElkLCB7IHRsc0NvbXBhdGlibGUgfSk7XG4gIHZhbGlkYXRlTm9EdWFsc3RhY2soZHVhbHN0YWNrRW5kcG9pbnQpO1xuICB2YWxpZGF0ZU5vRklQUyhmaXBzRW5kcG9pbnQpO1xuICBjb25zdCBob3N0bmFtZVByZWZpeCA9IGAke0ROU0hvc3RMYWJlbH0uJHtvdXRwb3N0SWR9YDtcbiAgcmV0dXJuIHtcbiAgICBidWNrZXRFbmRwb2ludDogdHJ1ZSxcbiAgICBob3N0bmFtZTogYCR7aG9zdG5hbWVQcmVmaXh9JHtpc0N1c3RvbUVuZHBvaW50ID8gXCJcIiA6IGAuczMtb3V0cG9zdHMuJHtlbmRwb2ludFJlZ2lvbn1gfS4ke2hvc3RuYW1lU3VmZml4fWAsXG4gICAgc2lnbmluZ1JlZ2lvbixcbiAgICBzaWduaW5nU2VydmljZTogXCJzMy1vdXRwb3N0c1wiXG4gIH07XG59LCBcImdldEVuZHBvaW50RnJvbU91dHBvc3RBcm5cIik7XG52YXIgZ2V0RW5kcG9pbnRGcm9tQWNjZXNzUG9pbnRBcm4gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh7XG4gIHVzZUFyblJlZ2lvbixcbiAgY2xpZW50UmVnaW9uLFxuICBjbGllbnRTaWduaW5nUmVnaW9uID0gY2xpZW50UmVnaW9uLFxuICBidWNrZXROYW1lLFxuICBkdWFsc3RhY2tFbmRwb2ludCA9IGZhbHNlLFxuICBmaXBzRW5kcG9pbnQgPSBmYWxzZSxcbiAgdGxzQ29tcGF0aWJsZSA9IHRydWUsXG4gIGFjY2Vzc3BvaW50TmFtZSxcbiAgaXNDdXN0b21FbmRwb2ludCxcbiAgaG9zdG5hbWVTdWZmaXhcbn0pID0+IHtcbiAgdmFsaWRhdGVSZWdpb25hbENsaWVudChjbGllbnRSZWdpb24pO1xuICB2YWxpZGF0ZVJlZ2lvbihidWNrZXROYW1lLnJlZ2lvbiwge1xuICAgIHVzZUFyblJlZ2lvbixcbiAgICBjbGllbnRSZWdpb24sXG4gICAgY2xpZW50U2lnbmluZ1JlZ2lvbixcbiAgICBhbGxvd0ZpcHNSZWdpb246IHRydWUsXG4gICAgdXNlRmlwc0VuZHBvaW50OiBmaXBzRW5kcG9pbnRcbiAgfSk7XG4gIGNvbnN0IGhvc3RuYW1lUHJlZml4ID0gYCR7YWNjZXNzcG9pbnROYW1lfS0ke2J1Y2tldE5hbWUuYWNjb3VudElkfWA7XG4gIHZhbGlkYXRlRE5TSG9zdExhYmVsKGhvc3RuYW1lUHJlZml4LCB7IHRsc0NvbXBhdGlibGUgfSk7XG4gIGNvbnN0IGVuZHBvaW50UmVnaW9uID0gdXNlQXJuUmVnaW9uID8gYnVja2V0TmFtZS5yZWdpb24gOiBjbGllbnRSZWdpb247XG4gIGNvbnN0IHNpZ25pbmdSZWdpb24gPSB1c2VBcm5SZWdpb24gPyBidWNrZXROYW1lLnJlZ2lvbiA6IGNsaWVudFNpZ25pbmdSZWdpb247XG4gIHZhbGlkYXRlUzNTZXJ2aWNlKGJ1Y2tldE5hbWUuc2VydmljZSk7XG4gIHJldHVybiB7XG4gICAgYnVja2V0RW5kcG9pbnQ6IHRydWUsXG4gICAgaG9zdG5hbWU6IGAke2hvc3RuYW1lUHJlZml4fSR7aXNDdXN0b21FbmRwb2ludCA/IFwiXCIgOiBgLnMzLWFjY2Vzc3BvaW50JHtmaXBzRW5kcG9pbnQgPyBcIi1maXBzXCIgOiBcIlwifSR7ZHVhbHN0YWNrRW5kcG9pbnQgPyBcIi5kdWFsc3RhY2tcIiA6IFwiXCJ9LiR7ZW5kcG9pbnRSZWdpb259YH0uJHtob3N0bmFtZVN1ZmZpeH1gLFxuICAgIHNpZ25pbmdSZWdpb25cbiAgfTtcbn0sIFwiZ2V0RW5kcG9pbnRGcm9tQWNjZXNzUG9pbnRBcm5cIik7XG5cbi8vIHNyYy9idWNrZXRFbmRwb2ludE1pZGRsZXdhcmUudHNcbnZhciBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiAobmV4dCwgY29udGV4dCkgPT4gYXN5bmMgKGFyZ3MpID0+IHtcbiAgY29uc3QgeyBCdWNrZXQ6IGJ1Y2tldE5hbWUgfSA9IGFyZ3MuaW5wdXQ7XG4gIGxldCByZXBsYWNlQnVja2V0SW5QYXRoID0gb3B0aW9ucy5idWNrZXRFbmRwb2ludDtcbiAgY29uc3QgcmVxdWVzdCA9IGFyZ3MucmVxdWVzdDtcbiAgaWYgKGltcG9ydF9wcm90b2NvbF9odHRwLkh0dHBSZXF1ZXN0LmlzSW5zdGFuY2UocmVxdWVzdCkpIHtcbiAgICBpZiAob3B0aW9ucy5idWNrZXRFbmRwb2ludCkge1xuICAgICAgcmVxdWVzdC5ob3N0bmFtZSA9IGJ1Y2tldE5hbWU7XG4gICAgfSBlbHNlIGlmICgoMCwgaW1wb3J0X3V0aWxfYXJuX3BhcnNlci52YWxpZGF0ZSkoYnVja2V0TmFtZSkpIHtcbiAgICAgIGNvbnN0IGJ1Y2tldEFybiA9ICgwLCBpbXBvcnRfdXRpbF9hcm5fcGFyc2VyLnBhcnNlKShidWNrZXROYW1lKTtcbiAgICAgIGNvbnN0IGNsaWVudFJlZ2lvbiA9IGF3YWl0IG9wdGlvbnMucmVnaW9uKCk7XG4gICAgICBjb25zdCB1c2VEdWFsc3RhY2tFbmRwb2ludCA9IGF3YWl0IG9wdGlvbnMudXNlRHVhbHN0YWNrRW5kcG9pbnQoKTtcbiAgICAgIGNvbnN0IHVzZUZpcHNFbmRwb2ludCA9IGF3YWl0IG9wdGlvbnMudXNlRmlwc0VuZHBvaW50KCk7XG4gICAgICBjb25zdCB7IHBhcnRpdGlvbiwgc2lnbmluZ1JlZ2lvbiA9IGNsaWVudFJlZ2lvbiB9ID0gYXdhaXQgb3B0aW9ucy5yZWdpb25JbmZvUHJvdmlkZXIoY2xpZW50UmVnaW9uLCB7IHVzZUR1YWxzdGFja0VuZHBvaW50LCB1c2VGaXBzRW5kcG9pbnQgfSkgfHwge307XG4gICAgICBjb25zdCB1c2VBcm5SZWdpb24gPSBhd2FpdCBvcHRpb25zLnVzZUFyblJlZ2lvbigpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBob3N0bmFtZSxcbiAgICAgICAgYnVja2V0RW5kcG9pbnQsXG4gICAgICAgIHNpZ25pbmdSZWdpb246IG1vZGlmaWVkU2lnbmluZ1JlZ2lvbixcbiAgICAgICAgc2lnbmluZ1NlcnZpY2VcbiAgICAgIH0gPSBidWNrZXRIb3N0bmFtZSh7XG4gICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldEFybixcbiAgICAgICAgYmFzZUhvc3RuYW1lOiByZXF1ZXN0Lmhvc3RuYW1lLFxuICAgICAgICBhY2NlbGVyYXRlRW5kcG9pbnQ6IG9wdGlvbnMudXNlQWNjZWxlcmF0ZUVuZHBvaW50LFxuICAgICAgICBkdWFsc3RhY2tFbmRwb2ludDogdXNlRHVhbHN0YWNrRW5kcG9pbnQsXG4gICAgICAgIGZpcHNFbmRwb2ludDogdXNlRmlwc0VuZHBvaW50LFxuICAgICAgICBwYXRoU3R5bGVFbmRwb2ludDogb3B0aW9ucy5mb3JjZVBhdGhTdHlsZSxcbiAgICAgICAgdGxzQ29tcGF0aWJsZTogcmVxdWVzdC5wcm90b2NvbCA9PT0gXCJodHRwczpcIixcbiAgICAgICAgdXNlQXJuUmVnaW9uLFxuICAgICAgICBjbGllbnRQYXJ0aXRpb246IHBhcnRpdGlvbixcbiAgICAgICAgY2xpZW50U2lnbmluZ1JlZ2lvbjogc2lnbmluZ1JlZ2lvbixcbiAgICAgICAgY2xpZW50UmVnaW9uLFxuICAgICAgICBpc0N1c3RvbUVuZHBvaW50OiBvcHRpb25zLmlzQ3VzdG9tRW5kcG9pbnQsXG4gICAgICAgIGRpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50czogYXdhaXQgb3B0aW9ucy5kaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHMoKVxuICAgICAgfSk7XG4gICAgICBpZiAobW9kaWZpZWRTaWduaW5nUmVnaW9uICYmIG1vZGlmaWVkU2lnbmluZ1JlZ2lvbiAhPT0gc2lnbmluZ1JlZ2lvbikge1xuICAgICAgICBjb250ZXh0W1wic2lnbmluZ19yZWdpb25cIl0gPSBtb2RpZmllZFNpZ25pbmdSZWdpb247XG4gICAgICB9XG4gICAgICBpZiAoc2lnbmluZ1NlcnZpY2UgJiYgc2lnbmluZ1NlcnZpY2UgIT09IFwiczNcIikge1xuICAgICAgICBjb250ZXh0W1wic2lnbmluZ19zZXJ2aWNlXCJdID0gc2lnbmluZ1NlcnZpY2U7XG4gICAgICB9XG4gICAgICByZXF1ZXN0Lmhvc3RuYW1lID0gaG9zdG5hbWU7XG4gICAgICByZXBsYWNlQnVja2V0SW5QYXRoID0gYnVja2V0RW5kcG9pbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNsaWVudFJlZ2lvbiA9IGF3YWl0IG9wdGlvbnMucmVnaW9uKCk7XG4gICAgICBjb25zdCBkdWFsc3RhY2tFbmRwb2ludCA9IGF3YWl0IG9wdGlvbnMudXNlRHVhbHN0YWNrRW5kcG9pbnQoKTtcbiAgICAgIGNvbnN0IGZpcHNFbmRwb2ludCA9IGF3YWl0IG9wdGlvbnMudXNlRmlwc0VuZHBvaW50KCk7XG4gICAgICBjb25zdCB7IGhvc3RuYW1lLCBidWNrZXRFbmRwb2ludCB9ID0gYnVja2V0SG9zdG5hbWUoe1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICBjbGllbnRSZWdpb24sXG4gICAgICAgIGJhc2VIb3N0bmFtZTogcmVxdWVzdC5ob3N0bmFtZSxcbiAgICAgICAgYWNjZWxlcmF0ZUVuZHBvaW50OiBvcHRpb25zLnVzZUFjY2VsZXJhdGVFbmRwb2ludCxcbiAgICAgICAgZHVhbHN0YWNrRW5kcG9pbnQsXG4gICAgICAgIGZpcHNFbmRwb2ludCxcbiAgICAgICAgcGF0aFN0eWxlRW5kcG9pbnQ6IG9wdGlvbnMuZm9yY2VQYXRoU3R5bGUsXG4gICAgICAgIHRsc0NvbXBhdGlibGU6IHJlcXVlc3QucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIsXG4gICAgICAgIGlzQ3VzdG9tRW5kcG9pbnQ6IG9wdGlvbnMuaXNDdXN0b21FbmRwb2ludFxuICAgICAgfSk7XG4gICAgICByZXF1ZXN0Lmhvc3RuYW1lID0gaG9zdG5hbWU7XG4gICAgICByZXBsYWNlQnVja2V0SW5QYXRoID0gYnVja2V0RW5kcG9pbnQ7XG4gICAgfVxuICAgIGlmIChyZXBsYWNlQnVja2V0SW5QYXRoKSB7XG4gICAgICByZXF1ZXN0LnBhdGggPSByZXF1ZXN0LnBhdGgucmVwbGFjZSgvXihcXC8pP1teXFwvXSsvLCBcIlwiKTtcbiAgICAgIGlmIChyZXF1ZXN0LnBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgcmVxdWVzdC5wYXRoID0gXCIvXCI7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXh0KHsgLi4uYXJncywgcmVxdWVzdCB9KTtcbn0sIFwiYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlXCIpO1xudmFyIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZU9wdGlvbnMgPSB7XG4gIHRhZ3M6IFtcIkJVQ0tFVF9FTkRQT0lOVFwiXSxcbiAgbmFtZTogXCJidWNrZXRFbmRwb2ludE1pZGRsZXdhcmVcIixcbiAgcmVsYXRpb246IFwiYmVmb3JlXCIsXG4gIHRvTWlkZGxld2FyZTogXCJob3N0SGVhZGVyTWlkZGxld2FyZVwiLFxuICBvdmVycmlkZTogdHJ1ZVxufTtcbnZhciBnZXRCdWNrZXRFbmRwb2ludFBsdWdpbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9wdGlvbnMpID0+ICh7XG4gIGFwcGx5VG9TdGFjazogKGNsaWVudFN0YWNrKSA9PiB7XG4gICAgY2xpZW50U3RhY2suYWRkUmVsYXRpdmVUbyhidWNrZXRFbmRwb2ludE1pZGRsZXdhcmUob3B0aW9ucyksIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZU9wdGlvbnMpO1xuICB9XG59KSwgXCJnZXRCdWNrZXRFbmRwb2ludFBsdWdpblwiKTtcblxuLy8gc3JjL2NvbmZpZ3VyYXRpb25zLnRzXG5mdW5jdGlvbiByZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWcoaW5wdXQpIHtcbiAgY29uc3Qge1xuICAgIGJ1Y2tldEVuZHBvaW50ID0gZmFsc2UsXG4gICAgZm9yY2VQYXRoU3R5bGUgPSBmYWxzZSxcbiAgICB1c2VBY2NlbGVyYXRlRW5kcG9pbnQgPSBmYWxzZSxcbiAgICB1c2VBcm5SZWdpb24gPSBmYWxzZSxcbiAgICBkaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHMgPSBmYWxzZVxuICB9ID0gaW5wdXQ7XG4gIHJldHVybiB7XG4gICAgLi4uaW5wdXQsXG4gICAgYnVja2V0RW5kcG9pbnQsXG4gICAgZm9yY2VQYXRoU3R5bGUsXG4gICAgdXNlQWNjZWxlcmF0ZUVuZHBvaW50LFxuICAgIHVzZUFyblJlZ2lvbjogdHlwZW9mIHVzZUFyblJlZ2lvbiA9PT0gXCJmdW5jdGlvblwiID8gdXNlQXJuUmVnaW9uIDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVzZUFyblJlZ2lvbiksXG4gICAgZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzOiB0eXBlb2YgZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzID09PSBcImZ1bmN0aW9uXCIgPyBkaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHMgOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzKVxuICB9O1xufVxuX19uYW1lKHJlc29sdmVCdWNrZXRFbmRwb2ludENvbmZpZywgXCJyZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWdcIik7XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG5cbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRBcm5SZXNvdXJjZXMsXG4gIGdldFN1ZmZpeEZvckFybkVuZHBvaW50LFxuICB2YWxpZGF0ZU91dHBvc3RTZXJ2aWNlLFxuICB2YWxpZGF0ZVBhcnRpdGlvbixcbiAgdmFsaWRhdGVBY2NvdW50SWQsXG4gIHZhbGlkYXRlUmVnaW9uLFxuICB2YWxpZGF0ZUROU0hvc3RMYWJlbCxcbiAgdmFsaWRhdGVOb0R1YWxzdGFjayxcbiAgdmFsaWRhdGVOb0ZJUFMsXG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfRU5WX05BTUUsXG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfSU5JX05BTUUsXG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfQ09ORklHX09QVElPTlMsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fRU5WX05BTUUsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fSU5JX05BTUUsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fQ09ORklHX09QVElPTlMsXG4gIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZSxcbiAgYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlT3B0aW9ucyxcbiAgZ2V0QnVja2V0RW5kcG9pbnRQbHVnaW4sXG4gIGJ1Y2tldEhvc3RuYW1lLFxuICByZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWdcbn0pO1xuXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.693.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js\n");

/***/ })

};
;