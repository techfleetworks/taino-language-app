/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@smithy+node-http-handler@3.3.1";
exports.ids = ["vendor-chunks/@smithy+node-http-handler@3.3.1"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-cjs/index.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-cjs/index.js ***!
  \*********************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  DEFAULT_REQUEST_TIMEOUT: () => DEFAULT_REQUEST_TIMEOUT,\n  NodeHttp2Handler: () => NodeHttp2Handler,\n  NodeHttpHandler: () => NodeHttpHandler,\n  streamCollector: () => streamCollector\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/node-http-handler.ts\nvar import_protocol_http = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/./node_modules/.pnpm/@smithy+protocol-http@4.1.7/node_modules/@smithy/protocol-http/dist-es/index.js\");\nvar import_querystring_builder = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/./node_modules/.pnpm/@smithy+querystring-builder@3.0.10/node_modules/@smithy/querystring-builder/dist-es/index.js\");\nvar import_http = __webpack_require__(/*! http */ \"http\");\nvar import_https = __webpack_require__(/*! https */ \"https\");\n\n// src/constants.ts\nvar NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"EPIPE\", \"ETIMEDOUT\"];\n\n// src/get-transformed-headers.ts\nvar getTransformedHeaders = /* @__PURE__ */ __name((headers) => {\n  const transformedHeaders = {};\n  for (const name of Object.keys(headers)) {\n    const headerValues = headers[name];\n    transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(\",\") : headerValues;\n  }\n  return transformedHeaders;\n}, \"getTransformedHeaders\");\n\n// src/timing.ts\nvar timing = {\n  setTimeout,\n  clearTimeout\n};\n\n// src/set-connection-timeout.ts\nvar DEFER_EVENT_LISTENER_TIME = 1e3;\nvar setConnectionTimeout = /* @__PURE__ */ __name((request, reject, timeoutInMs = 0) => {\n  if (!timeoutInMs) {\n    return -1;\n  }\n  const registerTimeout = /* @__PURE__ */ __name((offset) => {\n    const timeoutId = timing.setTimeout(() => {\n      request.destroy();\n      reject(\n        Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {\n          name: \"TimeoutError\"\n        })\n      );\n    }, timeoutInMs - offset);\n    const doWithSocket = /* @__PURE__ */ __name((socket) => {\n      if (socket == null ? void 0 : socket.connecting) {\n        socket.on(\"connect\", () => {\n          timing.clearTimeout(timeoutId);\n        });\n      } else {\n        timing.clearTimeout(timeoutId);\n      }\n    }, \"doWithSocket\");\n    if (request.socket) {\n      doWithSocket(request.socket);\n    } else {\n      request.on(\"socket\", doWithSocket);\n    }\n  }, \"registerTimeout\");\n  if (timeoutInMs < 2e3) {\n    registerTimeout(0);\n    return 0;\n  }\n  return timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n}, \"setConnectionTimeout\");\n\n// src/set-socket-keep-alive.ts\nvar DEFER_EVENT_LISTENER_TIME2 = 3e3;\nvar setSocketKeepAlive = /* @__PURE__ */ __name((request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME2) => {\n  if (keepAlive !== true) {\n    return -1;\n  }\n  const registerListener = /* @__PURE__ */ __name(() => {\n    if (request.socket) {\n      request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n    } else {\n      request.on(\"socket\", (socket) => {\n        socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n      });\n    }\n  }, \"registerListener\");\n  if (deferTimeMs === 0) {\n    registerListener();\n    return 0;\n  }\n  return timing.setTimeout(registerListener, deferTimeMs);\n}, \"setSocketKeepAlive\");\n\n// src/set-socket-timeout.ts\nvar DEFER_EVENT_LISTENER_TIME3 = 3e3;\nvar setSocketTimeout = /* @__PURE__ */ __name((request, reject, timeoutInMs = 0) => {\n  const registerTimeout = /* @__PURE__ */ __name((offset) => {\n    request.setTimeout(timeoutInMs - offset, () => {\n      request.destroy();\n      reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n    });\n  }, \"registerTimeout\");\n  if (0 < timeoutInMs && timeoutInMs < 6e3) {\n    registerTimeout(0);\n    return 0;\n  }\n  return timing.setTimeout(\n    registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME3),\n    DEFER_EVENT_LISTENER_TIME3\n  );\n}, \"setSocketTimeout\");\n\n// src/write-request-body.ts\nvar import_stream = __webpack_require__(/*! stream */ \"stream\");\nvar MIN_WAIT_TIME = 1e3;\nasync function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {\n  const headers = request.headers ?? {};\n  const expect = headers[\"Expect\"] || headers[\"expect\"];\n  let timeoutId = -1;\n  let hasError = false;\n  if (expect === \"100-continue\") {\n    await Promise.race([\n      new Promise((resolve) => {\n        timeoutId = Number(timing.setTimeout(resolve, Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));\n      }),\n      new Promise((resolve) => {\n        httpRequest.on(\"continue\", () => {\n          timing.clearTimeout(timeoutId);\n          resolve();\n        });\n        httpRequest.on(\"error\", () => {\n          hasError = true;\n          timing.clearTimeout(timeoutId);\n          resolve();\n        });\n      })\n    ]);\n  }\n  if (!hasError) {\n    writeBody(httpRequest, request.body);\n  }\n}\n__name(writeRequestBody, \"writeRequestBody\");\nfunction writeBody(httpRequest, body) {\n  if (body instanceof import_stream.Readable) {\n    body.pipe(httpRequest);\n    return;\n  }\n  if (body) {\n    if (Buffer.isBuffer(body) || typeof body === \"string\") {\n      httpRequest.end(body);\n      return;\n    }\n    const uint8 = body;\n    if (typeof uint8 === \"object\" && uint8.buffer && typeof uint8.byteOffset === \"number\" && typeof uint8.byteLength === \"number\") {\n      httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));\n      return;\n    }\n    httpRequest.end(Buffer.from(body));\n    return;\n  }\n  httpRequest.end();\n}\n__name(writeBody, \"writeBody\");\n\n// src/node-http-handler.ts\nvar DEFAULT_REQUEST_TIMEOUT = 0;\nvar _NodeHttpHandler = class _NodeHttpHandler {\n  constructor(options) {\n    this.socketWarningTimestamp = 0;\n    // Node http handler is hard-coded to http/1.1: https://github.com/nodejs/node/blob/ff5664b83b89c55e4ab5d5f60068fb457f1f5872/lib/_http_server.js#L286\n    this.metadata = { handlerProtocol: \"http/1.1\" };\n    this.configProvider = new Promise((resolve, reject) => {\n      if (typeof options === \"function\") {\n        options().then((_options) => {\n          resolve(this.resolveDefaultConfig(_options));\n        }).catch(reject);\n      } else {\n        resolve(this.resolveDefaultConfig(options));\n      }\n    });\n  }\n  /**\n   * @returns the input if it is an HttpHandler of any class,\n   * or instantiates a new instance of this handler.\n   */\n  static create(instanceOrOptions) {\n    if (typeof (instanceOrOptions == null ? void 0 : instanceOrOptions.handle) === \"function\") {\n      return instanceOrOptions;\n    }\n    return new _NodeHttpHandler(instanceOrOptions);\n  }\n  /**\n   * @internal\n   *\n   * @param agent - http(s) agent in use by the NodeHttpHandler instance.\n   * @param socketWarningTimestamp - last socket usage check timestamp.\n   * @param logger - channel for the warning.\n   * @returns timestamp of last emitted warning.\n   */\n  static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {\n    var _a, _b, _c;\n    const { sockets, requests, maxSockets } = agent;\n    if (typeof maxSockets !== \"number\" || maxSockets === Infinity) {\n      return socketWarningTimestamp;\n    }\n    const interval = 15e3;\n    if (Date.now() - interval < socketWarningTimestamp) {\n      return socketWarningTimestamp;\n    }\n    if (sockets && requests) {\n      for (const origin in sockets) {\n        const socketsInUse = ((_a = sockets[origin]) == null ? void 0 : _a.length) ?? 0;\n        const requestsEnqueued = ((_b = requests[origin]) == null ? void 0 : _b.length) ?? 0;\n        if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {\n          (_c = logger == null ? void 0 : logger.warn) == null ? void 0 : _c.call(\n            logger,\n            `@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`\n          );\n          return Date.now();\n        }\n      }\n    }\n    return socketWarningTimestamp;\n  }\n  resolveDefaultConfig(options) {\n    const { requestTimeout, connectionTimeout, socketTimeout, httpAgent, httpsAgent } = options || {};\n    const keepAlive = true;\n    const maxSockets = 50;\n    return {\n      connectionTimeout,\n      requestTimeout: requestTimeout ?? socketTimeout,\n      httpAgent: (() => {\n        if (httpAgent instanceof import_http.Agent || typeof (httpAgent == null ? void 0 : httpAgent.destroy) === \"function\") {\n          return httpAgent;\n        }\n        return new import_http.Agent({ keepAlive, maxSockets, ...httpAgent });\n      })(),\n      httpsAgent: (() => {\n        if (httpsAgent instanceof import_https.Agent || typeof (httpsAgent == null ? void 0 : httpsAgent.destroy) === \"function\") {\n          return httpsAgent;\n        }\n        return new import_https.Agent({ keepAlive, maxSockets, ...httpsAgent });\n      })(),\n      logger: console\n    };\n  }\n  destroy() {\n    var _a, _b, _c, _d;\n    (_b = (_a = this.config) == null ? void 0 : _a.httpAgent) == null ? void 0 : _b.destroy();\n    (_d = (_c = this.config) == null ? void 0 : _c.httpsAgent) == null ? void 0 : _d.destroy();\n  }\n  async handle(request, { abortSignal } = {}) {\n    if (!this.config) {\n      this.config = await this.configProvider;\n    }\n    return new Promise((_resolve, _reject) => {\n      let writeRequestBodyPromise = void 0;\n      const timeouts = [];\n      const resolve = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        timeouts.forEach(timing.clearTimeout);\n        _resolve(arg);\n      }, \"resolve\");\n      const reject = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        timeouts.forEach(timing.clearTimeout);\n        _reject(arg);\n      }, \"reject\");\n      if (!this.config) {\n        throw new Error(\"Node HTTP request handler config is not resolved\");\n      }\n      if (abortSignal == null ? void 0 : abortSignal.aborted) {\n        const abortError = new Error(\"Request aborted\");\n        abortError.name = \"AbortError\";\n        reject(abortError);\n        return;\n      }\n      const isSSL = request.protocol === \"https:\";\n      const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;\n      timeouts.push(\n        timing.setTimeout(\n          () => {\n            this.socketWarningTimestamp = _NodeHttpHandler.checkSocketUsage(\n              agent,\n              this.socketWarningTimestamp,\n              this.config.logger\n            );\n          },\n          this.config.socketAcquisitionWarningTimeout ?? (this.config.requestTimeout ?? 2e3) + (this.config.connectionTimeout ?? 1e3)\n        )\n      );\n      const queryString = (0, import_querystring_builder.buildQueryString)(request.query || {});\n      let auth = void 0;\n      if (request.username != null || request.password != null) {\n        const username = request.username ?? \"\";\n        const password = request.password ?? \"\";\n        auth = `${username}:${password}`;\n      }\n      let path = request.path;\n      if (queryString) {\n        path += `?${queryString}`;\n      }\n      if (request.fragment) {\n        path += `#${request.fragment}`;\n      }\n      let hostname = request.hostname ?? \"\";\n      if (hostname[0] === \"[\" && hostname.endsWith(\"]\")) {\n        hostname = request.hostname.slice(1, -1);\n      } else {\n        hostname = request.hostname;\n      }\n      const nodeHttpsOptions = {\n        headers: request.headers,\n        host: hostname,\n        method: request.method,\n        path,\n        port: request.port,\n        agent,\n        auth\n      };\n      const requestFunc = isSSL ? import_https.request : import_http.request;\n      const req = requestFunc(nodeHttpsOptions, (res) => {\n        const httpResponse = new import_protocol_http.HttpResponse({\n          statusCode: res.statusCode || -1,\n          reason: res.statusMessage,\n          headers: getTransformedHeaders(res.headers),\n          body: res\n        });\n        resolve({ response: httpResponse });\n      });\n      req.on(\"error\", (err) => {\n        if (NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {\n          reject(Object.assign(err, { name: \"TimeoutError\" }));\n        } else {\n          reject(err);\n        }\n      });\n      if (abortSignal) {\n        const onAbort = /* @__PURE__ */ __name(() => {\n          req.destroy();\n          const abortError = new Error(\"Request aborted\");\n          abortError.name = \"AbortError\";\n          reject(abortError);\n        }, \"onAbort\");\n        if (typeof abortSignal.addEventListener === \"function\") {\n          const signal = abortSignal;\n          signal.addEventListener(\"abort\", onAbort, { once: true });\n          req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n        } else {\n          abortSignal.onabort = onAbort;\n        }\n      }\n      timeouts.push(setConnectionTimeout(req, reject, this.config.connectionTimeout));\n      timeouts.push(setSocketTimeout(req, reject, this.config.requestTimeout));\n      const httpAgent = nodeHttpsOptions.agent;\n      if (typeof httpAgent === \"object\" && \"keepAlive\" in httpAgent) {\n        timeouts.push(\n          setSocketKeepAlive(req, {\n            // @ts-expect-error keepAlive is not public on httpAgent.\n            keepAlive: httpAgent.keepAlive,\n            // @ts-expect-error keepAliveMsecs is not public on httpAgent.\n            keepAliveMsecs: httpAgent.keepAliveMsecs\n          })\n        );\n      }\n      writeRequestBodyPromise = writeRequestBody(req, request, this.config.requestTimeout).catch((e) => {\n        timeouts.forEach(timing.clearTimeout);\n        return _reject(e);\n      });\n    });\n  }\n  updateHttpClientConfig(key, value) {\n    this.config = void 0;\n    this.configProvider = this.configProvider.then((config) => {\n      return {\n        ...config,\n        [key]: value\n      };\n    });\n  }\n  httpHandlerConfigs() {\n    return this.config ?? {};\n  }\n};\n__name(_NodeHttpHandler, \"NodeHttpHandler\");\nvar NodeHttpHandler = _NodeHttpHandler;\n\n// src/node-http2-handler.ts\n\n\nvar import_http22 = __webpack_require__(/*! http2 */ \"http2\");\n\n// src/node-http2-connection-manager.ts\nvar import_http2 = __toESM(__webpack_require__(/*! http2 */ \"http2\"));\n\n// src/node-http2-connection-pool.ts\nvar _NodeHttp2ConnectionPool = class _NodeHttp2ConnectionPool {\n  constructor(sessions) {\n    this.sessions = [];\n    this.sessions = sessions ?? [];\n  }\n  poll() {\n    if (this.sessions.length > 0) {\n      return this.sessions.shift();\n    }\n  }\n  offerLast(session) {\n    this.sessions.push(session);\n  }\n  contains(session) {\n    return this.sessions.includes(session);\n  }\n  remove(session) {\n    this.sessions = this.sessions.filter((s) => s !== session);\n  }\n  [Symbol.iterator]() {\n    return this.sessions[Symbol.iterator]();\n  }\n  destroy(connection) {\n    for (const session of this.sessions) {\n      if (session === connection) {\n        if (!session.destroyed) {\n          session.destroy();\n        }\n      }\n    }\n  }\n};\n__name(_NodeHttp2ConnectionPool, \"NodeHttp2ConnectionPool\");\nvar NodeHttp2ConnectionPool = _NodeHttp2ConnectionPool;\n\n// src/node-http2-connection-manager.ts\nvar _NodeHttp2ConnectionManager = class _NodeHttp2ConnectionManager {\n  constructor(config) {\n    this.sessionCache = /* @__PURE__ */ new Map();\n    this.config = config;\n    if (this.config.maxConcurrency && this.config.maxConcurrency <= 0) {\n      throw new RangeError(\"maxConcurrency must be greater than zero.\");\n    }\n  }\n  lease(requestContext, connectionConfiguration) {\n    const url = this.getUrlString(requestContext);\n    const existingPool = this.sessionCache.get(url);\n    if (existingPool) {\n      const existingSession = existingPool.poll();\n      if (existingSession && !this.config.disableConcurrency) {\n        return existingSession;\n      }\n    }\n    const session = import_http2.default.connect(url);\n    if (this.config.maxConcurrency) {\n      session.settings({ maxConcurrentStreams: this.config.maxConcurrency }, (err) => {\n        if (err) {\n          throw new Error(\n            \"Fail to set maxConcurrentStreams to \" + this.config.maxConcurrency + \"when creating new session for \" + requestContext.destination.toString()\n          );\n        }\n      });\n    }\n    session.unref();\n    const destroySessionCb = /* @__PURE__ */ __name(() => {\n      session.destroy();\n      this.deleteSession(url, session);\n    }, \"destroySessionCb\");\n    session.on(\"goaway\", destroySessionCb);\n    session.on(\"error\", destroySessionCb);\n    session.on(\"frameError\", destroySessionCb);\n    session.on(\"close\", () => this.deleteSession(url, session));\n    if (connectionConfiguration.requestTimeout) {\n      session.setTimeout(connectionConfiguration.requestTimeout, destroySessionCb);\n    }\n    const connectionPool = this.sessionCache.get(url) || new NodeHttp2ConnectionPool();\n    connectionPool.offerLast(session);\n    this.sessionCache.set(url, connectionPool);\n    return session;\n  }\n  /**\n   * Delete a session from the connection pool.\n   * @param authority The authority of the session to delete.\n   * @param session The session to delete.\n   */\n  deleteSession(authority, session) {\n    const existingConnectionPool = this.sessionCache.get(authority);\n    if (!existingConnectionPool) {\n      return;\n    }\n    if (!existingConnectionPool.contains(session)) {\n      return;\n    }\n    existingConnectionPool.remove(session);\n    this.sessionCache.set(authority, existingConnectionPool);\n  }\n  release(requestContext, session) {\n    var _a;\n    const cacheKey = this.getUrlString(requestContext);\n    (_a = this.sessionCache.get(cacheKey)) == null ? void 0 : _a.offerLast(session);\n  }\n  destroy() {\n    for (const [key, connectionPool] of this.sessionCache) {\n      for (const session of connectionPool) {\n        if (!session.destroyed) {\n          session.destroy();\n        }\n        connectionPool.remove(session);\n      }\n      this.sessionCache.delete(key);\n    }\n  }\n  setMaxConcurrentStreams(maxConcurrentStreams) {\n    if (maxConcurrentStreams && maxConcurrentStreams <= 0) {\n      throw new RangeError(\"maxConcurrentStreams must be greater than zero.\");\n    }\n    this.config.maxConcurrency = maxConcurrentStreams;\n  }\n  setDisableConcurrentStreams(disableConcurrentStreams) {\n    this.config.disableConcurrency = disableConcurrentStreams;\n  }\n  getUrlString(request) {\n    return request.destination.toString();\n  }\n};\n__name(_NodeHttp2ConnectionManager, \"NodeHttp2ConnectionManager\");\nvar NodeHttp2ConnectionManager = _NodeHttp2ConnectionManager;\n\n// src/node-http2-handler.ts\nvar _NodeHttp2Handler = class _NodeHttp2Handler {\n  constructor(options) {\n    this.metadata = { handlerProtocol: \"h2\" };\n    this.connectionManager = new NodeHttp2ConnectionManager({});\n    this.configProvider = new Promise((resolve, reject) => {\n      if (typeof options === \"function\") {\n        options().then((opts) => {\n          resolve(opts || {});\n        }).catch(reject);\n      } else {\n        resolve(options || {});\n      }\n    });\n  }\n  /**\n   * @returns the input if it is an HttpHandler of any class,\n   * or instantiates a new instance of this handler.\n   */\n  static create(instanceOrOptions) {\n    if (typeof (instanceOrOptions == null ? void 0 : instanceOrOptions.handle) === \"function\") {\n      return instanceOrOptions;\n    }\n    return new _NodeHttp2Handler(instanceOrOptions);\n  }\n  destroy() {\n    this.connectionManager.destroy();\n  }\n  async handle(request, { abortSignal } = {}) {\n    if (!this.config) {\n      this.config = await this.configProvider;\n      this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams || false);\n      if (this.config.maxConcurrentStreams) {\n        this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams);\n      }\n    }\n    const { requestTimeout, disableConcurrentStreams } = this.config;\n    return new Promise((_resolve, _reject) => {\n      var _a;\n      let fulfilled = false;\n      let writeRequestBodyPromise = void 0;\n      const resolve = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        _resolve(arg);\n      }, \"resolve\");\n      const reject = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        _reject(arg);\n      }, \"reject\");\n      if (abortSignal == null ? void 0 : abortSignal.aborted) {\n        fulfilled = true;\n        const abortError = new Error(\"Request aborted\");\n        abortError.name = \"AbortError\";\n        reject(abortError);\n        return;\n      }\n      const { hostname, method, port, protocol, query } = request;\n      let auth = \"\";\n      if (request.username != null || request.password != null) {\n        const username = request.username ?? \"\";\n        const password = request.password ?? \"\";\n        auth = `${username}:${password}@`;\n      }\n      const authority = `${protocol}//${auth}${hostname}${port ? `:${port}` : \"\"}`;\n      const requestContext = { destination: new URL(authority) };\n      const session = this.connectionManager.lease(requestContext, {\n        requestTimeout: (_a = this.config) == null ? void 0 : _a.sessionTimeout,\n        disableConcurrentStreams: disableConcurrentStreams || false\n      });\n      const rejectWithDestroy = /* @__PURE__ */ __name((err) => {\n        if (disableConcurrentStreams) {\n          this.destroySession(session);\n        }\n        fulfilled = true;\n        reject(err);\n      }, \"rejectWithDestroy\");\n      const queryString = (0, import_querystring_builder.buildQueryString)(query || {});\n      let path = request.path;\n      if (queryString) {\n        path += `?${queryString}`;\n      }\n      if (request.fragment) {\n        path += `#${request.fragment}`;\n      }\n      const req = session.request({\n        ...request.headers,\n        [import_http22.constants.HTTP2_HEADER_PATH]: path,\n        [import_http22.constants.HTTP2_HEADER_METHOD]: method\n      });\n      session.ref();\n      req.on(\"response\", (headers) => {\n        const httpResponse = new import_protocol_http.HttpResponse({\n          statusCode: headers[\":status\"] || -1,\n          headers: getTransformedHeaders(headers),\n          body: req\n        });\n        fulfilled = true;\n        resolve({ response: httpResponse });\n        if (disableConcurrentStreams) {\n          session.close();\n          this.connectionManager.deleteSession(authority, session);\n        }\n      });\n      if (requestTimeout) {\n        req.setTimeout(requestTimeout, () => {\n          req.close();\n          const timeoutError = new Error(`Stream timed out because of no activity for ${requestTimeout} ms`);\n          timeoutError.name = \"TimeoutError\";\n          rejectWithDestroy(timeoutError);\n        });\n      }\n      if (abortSignal) {\n        const onAbort = /* @__PURE__ */ __name(() => {\n          req.close();\n          const abortError = new Error(\"Request aborted\");\n          abortError.name = \"AbortError\";\n          rejectWithDestroy(abortError);\n        }, \"onAbort\");\n        if (typeof abortSignal.addEventListener === \"function\") {\n          const signal = abortSignal;\n          signal.addEventListener(\"abort\", onAbort, { once: true });\n          req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n        } else {\n          abortSignal.onabort = onAbort;\n        }\n      }\n      req.on(\"frameError\", (type, code, id) => {\n        rejectWithDestroy(new Error(`Frame type id ${type} in stream id ${id} has failed with code ${code}.`));\n      });\n      req.on(\"error\", rejectWithDestroy);\n      req.on(\"aborted\", () => {\n        rejectWithDestroy(\n          new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${req.rstCode}.`)\n        );\n      });\n      req.on(\"close\", () => {\n        session.unref();\n        if (disableConcurrentStreams) {\n          session.destroy();\n        }\n        if (!fulfilled) {\n          rejectWithDestroy(new Error(\"Unexpected error: http2 request did not get a response\"));\n        }\n      });\n      writeRequestBodyPromise = writeRequestBody(req, request, requestTimeout);\n    });\n  }\n  updateHttpClientConfig(key, value) {\n    this.config = void 0;\n    this.configProvider = this.configProvider.then((config) => {\n      return {\n        ...config,\n        [key]: value\n      };\n    });\n  }\n  httpHandlerConfigs() {\n    return this.config ?? {};\n  }\n  /**\n   * Destroys a session.\n   * @param session The session to destroy.\n   */\n  destroySession(session) {\n    if (!session.destroyed) {\n      session.destroy();\n    }\n  }\n};\n__name(_NodeHttp2Handler, \"NodeHttp2Handler\");\nvar NodeHttp2Handler = _NodeHttp2Handler;\n\n// src/stream-collector/collector.ts\n\nvar _Collector = class _Collector extends import_stream.Writable {\n  constructor() {\n    super(...arguments);\n    this.bufferedBytes = [];\n  }\n  _write(chunk, encoding, callback) {\n    this.bufferedBytes.push(chunk);\n    callback();\n  }\n};\n__name(_Collector, \"Collector\");\nvar Collector = _Collector;\n\n// src/stream-collector/index.ts\nvar streamCollector = /* @__PURE__ */ __name((stream) => {\n  if (isReadableStreamInstance(stream)) {\n    return collectReadableStream(stream);\n  }\n  return new Promise((resolve, reject) => {\n    const collector = new Collector();\n    stream.pipe(collector);\n    stream.on(\"error\", (err) => {\n      collector.end();\n      reject(err);\n    });\n    collector.on(\"error\", reject);\n    collector.on(\"finish\", function() {\n      const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));\n      resolve(bytes);\n    });\n  });\n}, \"streamCollector\");\nvar isReadableStreamInstance = /* @__PURE__ */ __name((stream) => typeof ReadableStream === \"function\" && stream instanceof ReadableStream, \"isReadableStreamInstance\");\nasync function collectReadableStream(stream) {\n  const chunks = [];\n  const reader = stream.getReader();\n  let isDone = false;\n  let length = 0;\n  while (!isDone) {\n    const { done, value } = await reader.read();\n    if (value) {\n      chunks.push(value);\n      length += value.length;\n    }\n    isDone = done;\n  }\n  const collected = new Uint8Array(length);\n  let offset = 0;\n  for (const chunk of chunks) {\n    collected.set(chunk, offset);\n    offset += chunk.length;\n  }\n  return collected;\n}\n__name(collectReadableStream, \"collectReadableStream\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (0);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWNqcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTs7QUFFbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQSwyQkFBMkIsbUJBQU8sQ0FBQyx5SUFBdUI7QUFDMUQsaUNBQWlDLG1CQUFPLENBQUMsNEpBQTZCO0FBQ3RFLGtCQUFrQixtQkFBTyxDQUFDLGtCQUFNO0FBQ2hDLG1CQUFtQixtQkFBTyxDQUFDLG9CQUFPOztBQUVsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkYsYUFBYTtBQUMxRztBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLGFBQWEsUUFBUSxzQkFBc0I7QUFDOUcsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLHNCQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQ0FBZ0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxjQUFjLE1BQU0sa0JBQWtCO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwRUFBMEU7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHFDQUFxQztBQUM1RSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0NBQXNDO0FBQzlFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGNBQWMsSUFBSTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSw4RkFBOEY7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBUyxHQUFHLFNBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGtCQUFrQix3QkFBd0I7QUFDMUMsT0FBTztBQUNQO0FBQ0E7QUFDQSxzQ0FBc0Msc0JBQXNCO0FBQzVELFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQXNELFlBQVk7QUFDbEU7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0Esb0JBQW9CLG1CQUFPLENBQUMsb0JBQU87O0FBRW5DO0FBQ0EsMkJBQTJCLG1CQUFPLENBQUMsb0JBQU87O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrREFBa0Q7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsU0FBUztBQUNULFFBQVE7QUFDUiw2QkFBNkI7QUFDN0I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixjQUFjLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJDQUEyQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDBDQUEwQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTLEdBQUcsU0FBUztBQUN2QztBQUNBLDJCQUEyQixTQUFTLElBQUksS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEtBQUssT0FBTztBQUNqRiwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsZ0JBQWdCO0FBQ3hHO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFzRCxZQUFZO0FBQ2xFO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELE1BQU0sZUFBZSxJQUFJLHVCQUF1QixLQUFLO0FBQzFHLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsWUFBWTtBQUM3RztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLENBS0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjEvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1janMvaW5kZXguanM/NzlmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBzcmNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc3JjX2V4cG9ydHMsIHtcbiAgREVGQVVMVF9SRVFVRVNUX1RJTUVPVVQ6ICgpID0+IERFRkFVTFRfUkVRVUVTVF9USU1FT1VULFxuICBOb2RlSHR0cDJIYW5kbGVyOiAoKSA9PiBOb2RlSHR0cDJIYW5kbGVyLFxuICBOb2RlSHR0cEhhbmRsZXI6ICgpID0+IE5vZGVIdHRwSGFuZGxlcixcbiAgc3RyZWFtQ29sbGVjdG9yOiAoKSA9PiBzdHJlYW1Db2xsZWN0b3Jcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xuXG4vLyBzcmMvbm9kZS1odHRwLWhhbmRsZXIudHNcbnZhciBpbXBvcnRfcHJvdG9jb2xfaHR0cCA9IHJlcXVpcmUoXCJAc21pdGh5L3Byb3RvY29sLWh0dHBcIik7XG52YXIgaW1wb3J0X3F1ZXJ5c3RyaW5nX2J1aWxkZXIgPSByZXF1aXJlKFwiQHNtaXRoeS9xdWVyeXN0cmluZy1idWlsZGVyXCIpO1xudmFyIGltcG9ydF9odHRwID0gcmVxdWlyZShcImh0dHBcIik7XG52YXIgaW1wb3J0X2h0dHBzID0gcmVxdWlyZShcImh0dHBzXCIpO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMgPSBbXCJFQ09OTlJFU0VUXCIsIFwiRVBJUEVcIiwgXCJFVElNRURPVVRcIl07XG5cbi8vIHNyYy9nZXQtdHJhbnNmb3JtZWQtaGVhZGVycy50c1xudmFyIGdldFRyYW5zZm9ybWVkSGVhZGVycyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGhlYWRlcnMpID0+IHtcbiAgY29uc3QgdHJhbnNmb3JtZWRIZWFkZXJzID0ge307XG4gIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhoZWFkZXJzKSkge1xuICAgIGNvbnN0IGhlYWRlclZhbHVlcyA9IGhlYWRlcnNbbmFtZV07XG4gICAgdHJhbnNmb3JtZWRIZWFkZXJzW25hbWVdID0gQXJyYXkuaXNBcnJheShoZWFkZXJWYWx1ZXMpID8gaGVhZGVyVmFsdWVzLmpvaW4oXCIsXCIpIDogaGVhZGVyVmFsdWVzO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1lZEhlYWRlcnM7XG59LCBcImdldFRyYW5zZm9ybWVkSGVhZGVyc1wiKTtcblxuLy8gc3JjL3RpbWluZy50c1xudmFyIHRpbWluZyA9IHtcbiAgc2V0VGltZW91dCxcbiAgY2xlYXJUaW1lb3V0XG59O1xuXG4vLyBzcmMvc2V0LWNvbm5lY3Rpb24tdGltZW91dC50c1xudmFyIERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUgPSAxZTM7XG52YXIgc2V0Q29ubmVjdGlvblRpbWVvdXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZXF1ZXN0LCByZWplY3QsIHRpbWVvdXRJbk1zID0gMCkgPT4ge1xuICBpZiAoIXRpbWVvdXRJbk1zKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGNvbnN0IHJlZ2lzdGVyVGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9mZnNldCkgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRpbWluZy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgcmVqZWN0KFxuICAgICAgICBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihgU29ja2V0IHRpbWVkIG91dCB3aXRob3V0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb24gd2l0aGluICR7dGltZW91dEluTXN9IG1zYCksIHtcbiAgICAgICAgICBuYW1lOiBcIlRpbWVvdXRFcnJvclwiXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sIHRpbWVvdXRJbk1zIC0gb2Zmc2V0KTtcbiAgICBjb25zdCBkb1dpdGhTb2NrZXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzb2NrZXQpID0+IHtcbiAgICAgIGlmIChzb2NrZXQgPT0gbnVsbCA/IHZvaWQgMCA6IHNvY2tldC5jb25uZWN0aW5nKSB7XG4gICAgICAgIHNvY2tldC5vbihcImNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfSwgXCJkb1dpdGhTb2NrZXRcIik7XG4gICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICBkb1dpdGhTb2NrZXQocmVxdWVzdC5zb2NrZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0Lm9uKFwic29ja2V0XCIsIGRvV2l0aFNvY2tldCk7XG4gICAgfVxuICB9LCBcInJlZ2lzdGVyVGltZW91dFwiKTtcbiAgaWYgKHRpbWVvdXRJbk1zIDwgMmUzKSB7XG4gICAgcmVnaXN0ZXJUaW1lb3V0KDApO1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChyZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FKSwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSk7XG59LCBcInNldENvbm5lY3Rpb25UaW1lb3V0XCIpO1xuXG4vLyBzcmMvc2V0LXNvY2tldC1rZWVwLWFsaXZlLnRzXG52YXIgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTIgPSAzZTM7XG52YXIgc2V0U29ja2V0S2VlcEFsaXZlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocmVxdWVzdCwgeyBrZWVwQWxpdmUsIGtlZXBBbGl2ZU1zZWNzIH0sIGRlZmVyVGltZU1zID0gREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTIpID0+IHtcbiAgaWYgKGtlZXBBbGl2ZSAhPT0gdHJ1ZSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBjb25zdCByZWdpc3Rlckxpc3RlbmVyID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiB7XG4gICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICByZXF1ZXN0LnNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVxdWVzdC5vbihcInNvY2tldFwiLCAoc29ja2V0KSA9PiB7XG4gICAgICAgIHNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgXCJyZWdpc3Rlckxpc3RlbmVyXCIpO1xuICBpZiAoZGVmZXJUaW1lTXMgPT09IDApIHtcbiAgICByZWdpc3Rlckxpc3RlbmVyKCk7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHRpbWluZy5zZXRUaW1lb3V0KHJlZ2lzdGVyTGlzdGVuZXIsIGRlZmVyVGltZU1zKTtcbn0sIFwic2V0U29ja2V0S2VlcEFsaXZlXCIpO1xuXG4vLyBzcmMvc2V0LXNvY2tldC10aW1lb3V0LnRzXG52YXIgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTMgPSAzZTM7XG52YXIgc2V0U29ja2V0VGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHJlcXVlc3QsIHJlamVjdCwgdGltZW91dEluTXMgPSAwKSA9PiB7XG4gIGNvbnN0IHJlZ2lzdGVyVGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9mZnNldCkgPT4ge1xuICAgIHJlcXVlc3Quc2V0VGltZW91dCh0aW1lb3V0SW5NcyAtIG9mZnNldCwgKCkgPT4ge1xuICAgICAgcmVxdWVzdC5kZXN0cm95KCk7XG4gICAgICByZWplY3QoT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoYENvbm5lY3Rpb24gdGltZWQgb3V0IGFmdGVyICR7dGltZW91dEluTXN9IG1zYCksIHsgbmFtZTogXCJUaW1lb3V0RXJyb3JcIiB9KSk7XG4gICAgfSk7XG4gIH0sIFwicmVnaXN0ZXJUaW1lb3V0XCIpO1xuICBpZiAoMCA8IHRpbWVvdXRJbk1zICYmIHRpbWVvdXRJbk1zIDwgNmUzKSB7XG4gICAgcmVnaXN0ZXJUaW1lb3V0KDApO1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChcbiAgICByZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCB0aW1lb3V0SW5NcyA9PT0gMCA/IDAgOiBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FMyksXG4gICAgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTNcbiAgKTtcbn0sIFwic2V0U29ja2V0VGltZW91dFwiKTtcblxuLy8gc3JjL3dyaXRlLXJlcXVlc3QtYm9keS50c1xudmFyIGltcG9ydF9zdHJlYW0gPSByZXF1aXJlKFwic3RyZWFtXCIpO1xudmFyIE1JTl9XQUlUX1RJTUUgPSAxZTM7XG5hc3luYyBmdW5jdGlvbiB3cml0ZVJlcXVlc3RCb2R5KGh0dHBSZXF1ZXN0LCByZXF1ZXN0LCBtYXhDb250aW51ZVRpbWVvdXRNcyA9IE1JTl9XQUlUX1RJTUUpIHtcbiAgY29uc3QgaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVycyA/PyB7fTtcbiAgY29uc3QgZXhwZWN0ID0gaGVhZGVyc1tcIkV4cGVjdFwiXSB8fCBoZWFkZXJzW1wiZXhwZWN0XCJdO1xuICBsZXQgdGltZW91dElkID0gLTE7XG4gIGxldCBoYXNFcnJvciA9IGZhbHNlO1xuICBpZiAoZXhwZWN0ID09PSBcIjEwMC1jb250aW51ZVwiKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRpbWVvdXRJZCA9IE51bWJlcih0aW1pbmcuc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLm1heChNSU5fV0FJVF9USU1FLCBtYXhDb250aW51ZVRpbWVvdXRNcykpKTtcbiAgICAgIH0pLFxuICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJjb250aW51ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgdGltaW5nLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGh0dHBSZXF1ZXN0Lm9uKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgICAgIGhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgXSk7XG4gIH1cbiAgaWYgKCFoYXNFcnJvcikge1xuICAgIHdyaXRlQm9keShodHRwUmVxdWVzdCwgcmVxdWVzdC5ib2R5KTtcbiAgfVxufVxuX19uYW1lKHdyaXRlUmVxdWVzdEJvZHksIFwid3JpdGVSZXF1ZXN0Qm9keVwiKTtcbmZ1bmN0aW9uIHdyaXRlQm9keShodHRwUmVxdWVzdCwgYm9keSkge1xuICBpZiAoYm9keSBpbnN0YW5jZW9mIGltcG9ydF9zdHJlYW0uUmVhZGFibGUpIHtcbiAgICBib2R5LnBpcGUoaHR0cFJlcXVlc3QpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYm9keSkge1xuICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkgfHwgdHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGh0dHBSZXF1ZXN0LmVuZChib2R5KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdWludDggPSBib2R5O1xuICAgIGlmICh0eXBlb2YgdWludDggPT09IFwib2JqZWN0XCIgJiYgdWludDguYnVmZmVyICYmIHR5cGVvZiB1aW50OC5ieXRlT2Zmc2V0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiB1aW50OC5ieXRlTGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICBodHRwUmVxdWVzdC5lbmQoQnVmZmVyLmZyb20odWludDguYnVmZmVyLCB1aW50OC5ieXRlT2Zmc2V0LCB1aW50OC5ieXRlTGVuZ3RoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGh0dHBSZXF1ZXN0LmVuZChCdWZmZXIuZnJvbShib2R5KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGh0dHBSZXF1ZXN0LmVuZCgpO1xufVxuX19uYW1lKHdyaXRlQm9keSwgXCJ3cml0ZUJvZHlcIik7XG5cbi8vIHNyYy9ub2RlLWh0dHAtaGFuZGxlci50c1xudmFyIERFRkFVTFRfUkVRVUVTVF9USU1FT1VUID0gMDtcbnZhciBfTm9kZUh0dHBIYW5kbGVyID0gY2xhc3MgX05vZGVIdHRwSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnNvY2tldFdhcm5pbmdUaW1lc3RhbXAgPSAwO1xuICAgIC8vIE5vZGUgaHR0cCBoYW5kbGVyIGlzIGhhcmQtY29kZWQgdG8gaHR0cC8xLjE6IGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL2ZmNTY2NGI4M2I4OWM1NWU0YWI1ZDVmNjAwNjhmYjQ1N2YxZjU4NzIvbGliL19odHRwX3NlcnZlci5qcyNMMjg2XG4gICAgdGhpcy5tZXRhZGF0YSA9IHsgaGFuZGxlclByb3RvY29sOiBcImh0dHAvMS4xXCIgfTtcbiAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb3B0aW9ucygpLnRoZW4oKF9vcHRpb25zKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc29sdmVEZWZhdWx0Q29uZmlnKF9vcHRpb25zKSk7XG4gICAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHRoaXMucmVzb2x2ZURlZmF1bHRDb25maWcob3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB0aGUgaW5wdXQgaWYgaXQgaXMgYW4gSHR0cEhhbmRsZXIgb2YgYW55IGNsYXNzLFxuICAgKiBvciBpbnN0YW50aWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBoYW5kbGVyLlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShpbnN0YW5jZU9yT3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgKGluc3RhbmNlT3JPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZU9yT3B0aW9ucy5oYW5kbGUpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiBpbnN0YW5jZU9yT3B0aW9ucztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBfTm9kZUh0dHBIYW5kbGVyKGluc3RhbmNlT3JPcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBhZ2VudCAtIGh0dHAocykgYWdlbnQgaW4gdXNlIGJ5IHRoZSBOb2RlSHR0cEhhbmRsZXIgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSBzb2NrZXRXYXJuaW5nVGltZXN0YW1wIC0gbGFzdCBzb2NrZXQgdXNhZ2UgY2hlY2sgdGltZXN0YW1wLlxuICAgKiBAcGFyYW0gbG9nZ2VyIC0gY2hhbm5lbCBmb3IgdGhlIHdhcm5pbmcuXG4gICAqIEByZXR1cm5zIHRpbWVzdGFtcCBvZiBsYXN0IGVtaXR0ZWQgd2FybmluZy5cbiAgICovXG4gIHN0YXRpYyBjaGVja1NvY2tldFVzYWdlKGFnZW50LCBzb2NrZXRXYXJuaW5nVGltZXN0YW1wLCBsb2dnZXIgPSBjb25zb2xlKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgeyBzb2NrZXRzLCByZXF1ZXN0cywgbWF4U29ja2V0cyB9ID0gYWdlbnQ7XG4gICAgaWYgKHR5cGVvZiBtYXhTb2NrZXRzICE9PSBcIm51bWJlclwiIHx8IG1heFNvY2tldHMgPT09IEluZmluaXR5KSB7XG4gICAgICByZXR1cm4gc29ja2V0V2FybmluZ1RpbWVzdGFtcDtcbiAgICB9XG4gICAgY29uc3QgaW50ZXJ2YWwgPSAxNWUzO1xuICAgIGlmIChEYXRlLm5vdygpIC0gaW50ZXJ2YWwgPCBzb2NrZXRXYXJuaW5nVGltZXN0YW1wKSB7XG4gICAgICByZXR1cm4gc29ja2V0V2FybmluZ1RpbWVzdGFtcDtcbiAgICB9XG4gICAgaWYgKHNvY2tldHMgJiYgcmVxdWVzdHMpIHtcbiAgICAgIGZvciAoY29uc3Qgb3JpZ2luIGluIHNvY2tldHMpIHtcbiAgICAgICAgY29uc3Qgc29ja2V0c0luVXNlID0gKChfYSA9IHNvY2tldHNbb3JpZ2luXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPz8gMDtcbiAgICAgICAgY29uc3QgcmVxdWVzdHNFbnF1ZXVlZCA9ICgoX2IgPSByZXF1ZXN0c1tvcmlnaW5dKSA9PSBudWxsID8gdm9pZCAwIDogX2IubGVuZ3RoKSA/PyAwO1xuICAgICAgICBpZiAoc29ja2V0c0luVXNlID49IG1heFNvY2tldHMgJiYgcmVxdWVzdHNFbnF1ZXVlZCA+PSAyICogbWF4U29ja2V0cykge1xuICAgICAgICAgIChfYyA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLndhcm4pID09IG51bGwgPyB2b2lkIDAgOiBfYy5jYWxsKFxuICAgICAgICAgICAgbG9nZ2VyLFxuICAgICAgICAgICAgYEBzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXI6V0FSTiAtIHNvY2tldCB1c2FnZSBhdCBjYXBhY2l0eT0ke3NvY2tldHNJblVzZX0gYW5kICR7cmVxdWVzdHNFbnF1ZXVlZH0gYWRkaXRpb25hbCByZXF1ZXN0cyBhcmUgZW5xdWV1ZWQuXG5TZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL3Nkay1mb3ItamF2YXNjcmlwdC92My9kZXZlbG9wZXItZ3VpZGUvbm9kZS1jb25maWd1cmluZy1tYXhzb2NrZXRzLmh0bWxcbm9yIGluY3JlYXNlIHNvY2tldEFjcXVpc2l0aW9uV2FybmluZ1RpbWVvdXQ9KG1pbGxpcykgaW4gdGhlIE5vZGVIdHRwSGFuZGxlciBjb25maWcuYFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNvY2tldFdhcm5pbmdUaW1lc3RhbXA7XG4gIH1cbiAgcmVzb2x2ZURlZmF1bHRDb25maWcob3B0aW9ucykge1xuICAgIGNvbnN0IHsgcmVxdWVzdFRpbWVvdXQsIGNvbm5lY3Rpb25UaW1lb3V0LCBzb2NrZXRUaW1lb3V0LCBodHRwQWdlbnQsIGh0dHBzQWdlbnQgfSA9IG9wdGlvbnMgfHwge307XG4gICAgY29uc3Qga2VlcEFsaXZlID0gdHJ1ZTtcbiAgICBjb25zdCBtYXhTb2NrZXRzID0gNTA7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0LFxuICAgICAgcmVxdWVzdFRpbWVvdXQ6IHJlcXVlc3RUaW1lb3V0ID8/IHNvY2tldFRpbWVvdXQsXG4gICAgICBodHRwQWdlbnQ6ICgoKSA9PiB7XG4gICAgICAgIGlmIChodHRwQWdlbnQgaW5zdGFuY2VvZiBpbXBvcnRfaHR0cC5BZ2VudCB8fCB0eXBlb2YgKGh0dHBBZ2VudCA9PSBudWxsID8gdm9pZCAwIDogaHR0cEFnZW50LmRlc3Ryb3kpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICByZXR1cm4gaHR0cEFnZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgaW1wb3J0X2h0dHAuQWdlbnQoeyBrZWVwQWxpdmUsIG1heFNvY2tldHMsIC4uLmh0dHBBZ2VudCB9KTtcbiAgICAgIH0pKCksXG4gICAgICBodHRwc0FnZW50OiAoKCkgPT4ge1xuICAgICAgICBpZiAoaHR0cHNBZ2VudCBpbnN0YW5jZW9mIGltcG9ydF9odHRwcy5BZ2VudCB8fCB0eXBlb2YgKGh0dHBzQWdlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGh0dHBzQWdlbnQuZGVzdHJveSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHJldHVybiBodHRwc0FnZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgaW1wb3J0X2h0dHBzLkFnZW50KHsga2VlcEFsaXZlLCBtYXhTb2NrZXRzLCAuLi5odHRwc0FnZW50IH0pO1xuICAgICAgfSkoKSxcbiAgICAgIGxvZ2dlcjogY29uc29sZVxuICAgIH07XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgKF9iID0gKF9hID0gdGhpcy5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfYS5odHRwQWdlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5kZXN0cm95KCk7XG4gICAgKF9kID0gKF9jID0gdGhpcy5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfYy5odHRwc0FnZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2QuZGVzdHJveSgpO1xuICB9XG4gIGFzeW5jIGhhbmRsZShyZXF1ZXN0LCB7IGFib3J0U2lnbmFsIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5jb25maWcpIHtcbiAgICAgIHRoaXMuY29uZmlnID0gYXdhaXQgdGhpcy5jb25maWdQcm92aWRlcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgbGV0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlID0gdm9pZCAwO1xuICAgICAgY29uc3QgdGltZW91dHMgPSBbXTtcbiAgICAgIGNvbnN0IHJlc29sdmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgIF9yZXNvbHZlKGFyZyk7XG4gICAgICB9LCBcInJlc29sdmVcIik7XG4gICAgICBjb25zdCByZWplY3QgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgIF9yZWplY3QoYXJnKTtcbiAgICAgIH0sIFwicmVqZWN0XCIpO1xuICAgICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIEhUVFAgcmVxdWVzdCBoYW5kbGVyIGNvbmZpZyBpcyBub3QgcmVzb2x2ZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoYWJvcnRTaWduYWwgPT0gbnVsbCA/IHZvaWQgMCA6IGFib3J0U2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgY29uc3QgYWJvcnRFcnJvciA9IG5ldyBFcnJvcihcIlJlcXVlc3QgYWJvcnRlZFwiKTtcbiAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgIHJlamVjdChhYm9ydEVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNTU0wgPSByZXF1ZXN0LnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICAgICAgY29uc3QgYWdlbnQgPSBpc1NTTCA/IHRoaXMuY29uZmlnLmh0dHBzQWdlbnQgOiB0aGlzLmNvbmZpZy5odHRwQWdlbnQ7XG4gICAgICB0aW1lb3V0cy5wdXNoKFxuICAgICAgICB0aW1pbmcuc2V0VGltZW91dChcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldFdhcm5pbmdUaW1lc3RhbXAgPSBfTm9kZUh0dHBIYW5kbGVyLmNoZWNrU29ja2V0VXNhZ2UoXG4gICAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgICB0aGlzLnNvY2tldFdhcm5pbmdUaW1lc3RhbXAsXG4gICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvZ2dlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXMuY29uZmlnLnNvY2tldEFjcXVpc2l0aW9uV2FybmluZ1RpbWVvdXQgPz8gKHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0ID8/IDJlMykgKyAodGhpcy5jb25maWcuY29ubmVjdGlvblRpbWVvdXQgPz8gMWUzKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSAoMCwgaW1wb3J0X3F1ZXJ5c3RyaW5nX2J1aWxkZXIuYnVpbGRRdWVyeVN0cmluZykocmVxdWVzdC5xdWVyeSB8fCB7fSk7XG4gICAgICBsZXQgYXV0aCA9IHZvaWQgMDtcbiAgICAgIGlmIChyZXF1ZXN0LnVzZXJuYW1lICE9IG51bGwgfHwgcmVxdWVzdC5wYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxdWVzdC51c2VybmFtZSA/PyBcIlwiO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QucGFzc3dvcmQgPz8gXCJcIjtcbiAgICAgICAgYXV0aCA9IGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWA7XG4gICAgICB9XG4gICAgICBsZXQgcGF0aCA9IHJlcXVlc3QucGF0aDtcbiAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICBwYXRoICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICAgICAgfVxuICAgICAgaWYgKHJlcXVlc3QuZnJhZ21lbnQpIHtcbiAgICAgICAgcGF0aCArPSBgIyR7cmVxdWVzdC5mcmFnbWVudH1gO1xuICAgICAgfVxuICAgICAgbGV0IGhvc3RuYW1lID0gcmVxdWVzdC5ob3N0bmFtZSA/PyBcIlwiO1xuICAgICAgaWYgKGhvc3RuYW1lWzBdID09PSBcIltcIiAmJiBob3N0bmFtZS5lbmRzV2l0aChcIl1cIikpIHtcbiAgICAgICAgaG9zdG5hbWUgPSByZXF1ZXN0Lmhvc3RuYW1lLnNsaWNlKDEsIC0xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhvc3RuYW1lID0gcmVxdWVzdC5ob3N0bmFtZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5vZGVIdHRwc09wdGlvbnMgPSB7XG4gICAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycyxcbiAgICAgICAgaG9zdDogaG9zdG5hbWUsXG4gICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHBvcnQ6IHJlcXVlc3QucG9ydCxcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIGF1dGhcbiAgICAgIH07XG4gICAgICBjb25zdCByZXF1ZXN0RnVuYyA9IGlzU1NMID8gaW1wb3J0X2h0dHBzLnJlcXVlc3QgOiBpbXBvcnRfaHR0cC5yZXF1ZXN0O1xuICAgICAgY29uc3QgcmVxID0gcmVxdWVzdEZ1bmMobm9kZUh0dHBzT3B0aW9ucywgKHJlcykgPT4ge1xuICAgICAgICBjb25zdCBodHRwUmVzcG9uc2UgPSBuZXcgaW1wb3J0X3Byb3RvY29sX2h0dHAuSHR0cFJlc3BvbnNlKHtcbiAgICAgICAgICBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSB8fCAtMSxcbiAgICAgICAgICByZWFzb246IHJlcy5zdGF0dXNNZXNzYWdlLFxuICAgICAgICAgIGhlYWRlcnM6IGdldFRyYW5zZm9ybWVkSGVhZGVycyhyZXMuaGVhZGVycyksXG4gICAgICAgICAgYm9keTogcmVzXG4gICAgICAgIH0pO1xuICAgICAgICByZXNvbHZlKHsgcmVzcG9uc2U6IGh0dHBSZXNwb25zZSB9KTtcbiAgICAgIH0pO1xuICAgICAgcmVxLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgICBpZiAoTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMuaW5jbHVkZXMoZXJyLmNvZGUpKSB7XG4gICAgICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24oZXJyLCB7IG5hbWU6IFwiVGltZW91dEVycm9yXCIgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChhYm9ydFNpZ25hbCkge1xuICAgICAgICBjb25zdCBvbkFib3J0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiB7XG4gICAgICAgICAgcmVxLmRlc3Ryb3koKTtcbiAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICAgIHJlamVjdChhYm9ydEVycm9yKTtcbiAgICAgICAgfSwgXCJvbkFib3J0XCIpO1xuICAgICAgICBpZiAodHlwZW9mIGFib3J0U2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0U2lnbmFsO1xuICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgIHJlcS5vbmNlKFwiY2xvc2VcIiwgKCkgPT4gc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWJvcnRTaWduYWwub25hYm9ydCA9IG9uQWJvcnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRpbWVvdXRzLnB1c2goc2V0Q29ubmVjdGlvblRpbWVvdXQocmVxLCByZWplY3QsIHRoaXMuY29uZmlnLmNvbm5lY3Rpb25UaW1lb3V0KSk7XG4gICAgICB0aW1lb3V0cy5wdXNoKHNldFNvY2tldFRpbWVvdXQocmVxLCByZWplY3QsIHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0KSk7XG4gICAgICBjb25zdCBodHRwQWdlbnQgPSBub2RlSHR0cHNPcHRpb25zLmFnZW50O1xuICAgICAgaWYgKHR5cGVvZiBodHRwQWdlbnQgPT09IFwib2JqZWN0XCIgJiYgXCJrZWVwQWxpdmVcIiBpbiBodHRwQWdlbnQpIHtcbiAgICAgICAgdGltZW91dHMucHVzaChcbiAgICAgICAgICBzZXRTb2NrZXRLZWVwQWxpdmUocmVxLCB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGtlZXBBbGl2ZSBpcyBub3QgcHVibGljIG9uIGh0dHBBZ2VudC5cbiAgICAgICAgICAgIGtlZXBBbGl2ZTogaHR0cEFnZW50LmtlZXBBbGl2ZSxcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Iga2VlcEFsaXZlTXNlY3MgaXMgbm90IHB1YmxpYyBvbiBodHRwQWdlbnQuXG4gICAgICAgICAgICBrZWVwQWxpdmVNc2VjczogaHR0cEFnZW50LmtlZXBBbGl2ZU1zZWNzXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlID0gd3JpdGVSZXF1ZXN0Qm9keShyZXEsIHJlcXVlc3QsIHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICB0aW1lb3V0cy5mb3JFYWNoKHRpbWluZy5jbGVhclRpbWVvdXQpO1xuICAgICAgICByZXR1cm4gX3JlamVjdChlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHVwZGF0ZUh0dHBDbGllbnRDb25maWcoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuY29uZmlnID0gdm9pZCAwO1xuICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSB0aGlzLmNvbmZpZ1Byb3ZpZGVyLnRoZW4oKGNvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICBba2V5XTogdmFsdWVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgaHR0cEhhbmRsZXJDb25maWdzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZyA/PyB7fTtcbiAgfVxufTtcbl9fbmFtZShfTm9kZUh0dHBIYW5kbGVyLCBcIk5vZGVIdHRwSGFuZGxlclwiKTtcbnZhciBOb2RlSHR0cEhhbmRsZXIgPSBfTm9kZUh0dHBIYW5kbGVyO1xuXG4vLyBzcmMvbm9kZS1odHRwMi1oYW5kbGVyLnRzXG5cblxudmFyIGltcG9ydF9odHRwMjIgPSByZXF1aXJlKFwiaHR0cDJcIik7XG5cbi8vIHNyYy9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tbWFuYWdlci50c1xudmFyIGltcG9ydF9odHRwMiA9IF9fdG9FU00ocmVxdWlyZShcImh0dHAyXCIpKTtcblxuLy8gc3JjL25vZGUtaHR0cDItY29ubmVjdGlvbi1wb29sLnRzXG52YXIgX05vZGVIdHRwMkNvbm5lY3Rpb25Qb29sID0gY2xhc3MgX05vZGVIdHRwMkNvbm5lY3Rpb25Qb29sIHtcbiAgY29uc3RydWN0b3Ioc2Vzc2lvbnMpIHtcbiAgICB0aGlzLnNlc3Npb25zID0gW107XG4gICAgdGhpcy5zZXNzaW9ucyA9IHNlc3Npb25zID8/IFtdO1xuICB9XG4gIHBvbGwoKSB7XG4gICAgaWYgKHRoaXMuc2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnMuc2hpZnQoKTtcbiAgICB9XG4gIH1cbiAgb2ZmZXJMYXN0KHNlc3Npb24pIHtcbiAgICB0aGlzLnNlc3Npb25zLnB1c2goc2Vzc2lvbik7XG4gIH1cbiAgY29udGFpbnMoc2Vzc2lvbikge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zLmluY2x1ZGVzKHNlc3Npb24pO1xuICB9XG4gIHJlbW92ZShzZXNzaW9uKSB7XG4gICAgdGhpcy5zZXNzaW9ucyA9IHRoaXMuc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzICE9PSBzZXNzaW9uKTtcbiAgfVxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uc1tTeW1ib2wuaXRlcmF0b3JdKCk7XG4gIH1cbiAgZGVzdHJveShjb25uZWN0aW9uKSB7XG4gICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIHRoaXMuc2Vzc2lvbnMpIHtcbiAgICAgIGlmIChzZXNzaW9uID09PSBjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICghc2Vzc2lvbi5kZXN0cm95ZWQpIHtcbiAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbl9fbmFtZShfTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wsIFwiTm9kZUh0dHAyQ29ubmVjdGlvblBvb2xcIik7XG52YXIgTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wgPSBfTm9kZUh0dHAyQ29ubmVjdGlvblBvb2w7XG5cbi8vIHNyYy9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tbWFuYWdlci50c1xudmFyIF9Ob2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlciA9IGNsYXNzIF9Ob2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuc2Vzc2lvbkNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICBpZiAodGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgJiYgdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtYXhDb25jdXJyZW5jeSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlwiKTtcbiAgICB9XG4gIH1cbiAgbGVhc2UocmVxdWVzdENvbnRleHQsIGNvbm5lY3Rpb25Db25maWd1cmF0aW9uKSB7XG4gICAgY29uc3QgdXJsID0gdGhpcy5nZXRVcmxTdHJpbmcocmVxdWVzdENvbnRleHQpO1xuICAgIGNvbnN0IGV4aXN0aW5nUG9vbCA9IHRoaXMuc2Vzc2lvbkNhY2hlLmdldCh1cmwpO1xuICAgIGlmIChleGlzdGluZ1Bvb2wpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nU2Vzc2lvbiA9IGV4aXN0aW5nUG9vbC5wb2xsKCk7XG4gICAgICBpZiAoZXhpc3RpbmdTZXNzaW9uICYmICF0aGlzLmNvbmZpZy5kaXNhYmxlQ29uY3VycmVuY3kpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nU2Vzc2lvbjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGltcG9ydF9odHRwMi5kZWZhdWx0LmNvbm5lY3QodXJsKTtcbiAgICBpZiAodGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kpIHtcbiAgICAgIHNlc3Npb24uc2V0dGluZ3MoeyBtYXhDb25jdXJyZW50U3RyZWFtczogdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgfSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJGYWlsIHRvIHNldCBtYXhDb25jdXJyZW50U3RyZWFtcyB0byBcIiArIHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5ICsgXCJ3aGVuIGNyZWF0aW5nIG5ldyBzZXNzaW9uIGZvciBcIiArIHJlcXVlc3RDb250ZXh0LmRlc3RpbmF0aW9uLnRvU3RyaW5nKClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2Vzc2lvbi51bnJlZigpO1xuICAgIGNvbnN0IGRlc3Ryb3lTZXNzaW9uQ2IgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgICAgdGhpcy5kZWxldGVTZXNzaW9uKHVybCwgc2Vzc2lvbik7XG4gICAgfSwgXCJkZXN0cm95U2Vzc2lvbkNiXCIpO1xuICAgIHNlc3Npb24ub24oXCJnb2F3YXlcIiwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgc2Vzc2lvbi5vbihcImVycm9yXCIsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgIHNlc3Npb24ub24oXCJmcmFtZUVycm9yXCIsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgIHNlc3Npb24ub24oXCJjbG9zZVwiLCAoKSA9PiB0aGlzLmRlbGV0ZVNlc3Npb24odXJsLCBzZXNzaW9uKSk7XG4gICAgaWYgKGNvbm5lY3Rpb25Db25maWd1cmF0aW9uLnJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICBzZXNzaW9uLnNldFRpbWVvdXQoY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24ucmVxdWVzdFRpbWVvdXQsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgIH1cbiAgICBjb25zdCBjb25uZWN0aW9uUG9vbCA9IHRoaXMuc2Vzc2lvbkNhY2hlLmdldCh1cmwpIHx8IG5ldyBOb2RlSHR0cDJDb25uZWN0aW9uUG9vbCgpO1xuICAgIGNvbm5lY3Rpb25Qb29sLm9mZmVyTGFzdChzZXNzaW9uKTtcbiAgICB0aGlzLnNlc3Npb25DYWNoZS5zZXQodXJsLCBjb25uZWN0aW9uUG9vbCk7XG4gICAgcmV0dXJuIHNlc3Npb247XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHNlc3Npb24gZnJvbSB0aGUgY29ubmVjdGlvbiBwb29sLlxuICAgKiBAcGFyYW0gYXV0aG9yaXR5IFRoZSBhdXRob3JpdHkgb2YgdGhlIHNlc3Npb24gdG8gZGVsZXRlLlxuICAgKiBAcGFyYW0gc2Vzc2lvbiBUaGUgc2Vzc2lvbiB0byBkZWxldGUuXG4gICAqL1xuICBkZWxldGVTZXNzaW9uKGF1dGhvcml0eSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IGV4aXN0aW5nQ29ubmVjdGlvblBvb2wgPSB0aGlzLnNlc3Npb25DYWNoZS5nZXQoYXV0aG9yaXR5KTtcbiAgICBpZiAoIWV4aXN0aW5nQ29ubmVjdGlvblBvb2wpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFleGlzdGluZ0Nvbm5lY3Rpb25Qb29sLmNvbnRhaW5zKHNlc3Npb24pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV4aXN0aW5nQ29ubmVjdGlvblBvb2wucmVtb3ZlKHNlc3Npb24pO1xuICAgIHRoaXMuc2Vzc2lvbkNhY2hlLnNldChhdXRob3JpdHksIGV4aXN0aW5nQ29ubmVjdGlvblBvb2wpO1xuICB9XG4gIHJlbGVhc2UocmVxdWVzdENvbnRleHQsIHNlc3Npb24pIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldFVybFN0cmluZyhyZXF1ZXN0Q29udGV4dCk7XG4gICAgKF9hID0gdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KGNhY2hlS2V5KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm9mZmVyTGFzdChzZXNzaW9uKTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIGZvciAoY29uc3QgW2tleSwgY29ubmVjdGlvblBvb2xdIG9mIHRoaXMuc2Vzc2lvbkNhY2hlKSB7XG4gICAgICBmb3IgKGNvbnN0IHNlc3Npb24gb2YgY29ubmVjdGlvblBvb2wpIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uLmRlc3Ryb3llZCkge1xuICAgICAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Rpb25Qb29sLnJlbW92ZShzZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2Vzc2lvbkNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgfVxuICBzZXRNYXhDb25jdXJyZW50U3RyZWFtcyhtYXhDb25jdXJyZW50U3RyZWFtcykge1xuICAgIGlmIChtYXhDb25jdXJyZW50U3RyZWFtcyAmJiBtYXhDb25jdXJyZW50U3RyZWFtcyA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heENvbmN1cnJlbnRTdHJlYW1zIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIpO1xuICAgIH1cbiAgICB0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSA9IG1heENvbmN1cnJlbnRTdHJlYW1zO1xuICB9XG4gIHNldERpc2FibGVDb25jdXJyZW50U3RyZWFtcyhkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICB0aGlzLmNvbmZpZy5kaXNhYmxlQ29uY3VycmVuY3kgPSBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXM7XG4gIH1cbiAgZ2V0VXJsU3RyaW5nKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5kZXN0aW5hdGlvbi50b1N0cmluZygpO1xuICB9XG59O1xuX19uYW1lKF9Ob2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlciwgXCJOb2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlclwiKTtcbnZhciBOb2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlciA9IF9Ob2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlcjtcblxuLy8gc3JjL25vZGUtaHR0cDItaGFuZGxlci50c1xudmFyIF9Ob2RlSHR0cDJIYW5kbGVyID0gY2xhc3MgX05vZGVIdHRwMkhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5tZXRhZGF0YSA9IHsgaGFuZGxlclByb3RvY29sOiBcImgyXCIgfTtcbiAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IE5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyKHt9KTtcbiAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb3B0aW9ucygpLnRoZW4oKG9wdHMpID0+IHtcbiAgICAgICAgICByZXNvbHZlKG9wdHMgfHwge30pO1xuICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShvcHRpb25zIHx8IHt9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMgdGhlIGlucHV0IGlmIGl0IGlzIGFuIEh0dHBIYW5kbGVyIG9mIGFueSBjbGFzcyxcbiAgICogb3IgaW5zdGFudGlhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHRoaXMgaGFuZGxlci5cbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoaW5zdGFuY2VPck9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIChpbnN0YW5jZU9yT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2VPck9wdGlvbnMuaGFuZGxlKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2VPck9wdGlvbnM7XG4gICAgfVxuICAgIHJldHVybiBuZXcgX05vZGVIdHRwMkhhbmRsZXIoaW5zdGFuY2VPck9wdGlvbnMpO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5kZXN0cm95KCk7XG4gIH1cbiAgYXN5bmMgaGFuZGxlKHJlcXVlc3QsIHsgYWJvcnRTaWduYWwgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWcgPSBhd2FpdCB0aGlzLmNvbmZpZ1Byb3ZpZGVyO1xuICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5zZXREaXNhYmxlQ29uY3VycmVudFN0cmVhbXModGhpcy5jb25maWcuZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zIHx8IGZhbHNlKTtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW50U3RyZWFtcykge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLnNldE1heENvbmN1cnJlbnRTdHJlYW1zKHRoaXMuY29uZmlnLm1heENvbmN1cnJlbnRTdHJlYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyByZXF1ZXN0VGltZW91dCwgZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zIH0gPSB0aGlzLmNvbmZpZztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBsZXQgZnVsZmlsbGVkID0gZmFsc2U7XG4gICAgICBsZXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB2b2lkIDA7XG4gICAgICBjb25zdCByZXNvbHZlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShhc3luYyAoYXJnKSA9PiB7XG4gICAgICAgIGF3YWl0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlO1xuICAgICAgICBfcmVzb2x2ZShhcmcpO1xuICAgICAgfSwgXCJyZXNvbHZlXCIpO1xuICAgICAgY29uc3QgcmVqZWN0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShhc3luYyAoYXJnKSA9PiB7XG4gICAgICAgIGF3YWl0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlO1xuICAgICAgICBfcmVqZWN0KGFyZyk7XG4gICAgICB9LCBcInJlamVjdFwiKTtcbiAgICAgIGlmIChhYm9ydFNpZ25hbCA9PSBudWxsID8gdm9pZCAwIDogYWJvcnRTaWduYWwuYWJvcnRlZCkge1xuICAgICAgICBmdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgcmVqZWN0KGFib3J0RXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGhvc3RuYW1lLCBtZXRob2QsIHBvcnQsIHByb3RvY29sLCBxdWVyeSB9ID0gcmVxdWVzdDtcbiAgICAgIGxldCBhdXRoID0gXCJcIjtcbiAgICAgIGlmIChyZXF1ZXN0LnVzZXJuYW1lICE9IG51bGwgfHwgcmVxdWVzdC5wYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxdWVzdC51c2VybmFtZSA/PyBcIlwiO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QucGFzc3dvcmQgPz8gXCJcIjtcbiAgICAgICAgYXV0aCA9IGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfUBgO1xuICAgICAgfVxuICAgICAgY29uc3QgYXV0aG9yaXR5ID0gYCR7cHJvdG9jb2x9Ly8ke2F1dGh9JHtob3N0bmFtZX0ke3BvcnQgPyBgOiR7cG9ydH1gIDogXCJcIn1gO1xuICAgICAgY29uc3QgcmVxdWVzdENvbnRleHQgPSB7IGRlc3RpbmF0aW9uOiBuZXcgVVJMKGF1dGhvcml0eSkgfTtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmxlYXNlKHJlcXVlc3RDb250ZXh0LCB7XG4gICAgICAgIHJlcXVlc3RUaW1lb3V0OiAoX2EgPSB0aGlzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNlc3Npb25UaW1lb3V0LFxuICAgICAgICBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXM6IGRpc2FibGVDb25jdXJyZW50U3RyZWFtcyB8fCBmYWxzZVxuICAgICAgfSk7XG4gICAgICBjb25zdCByZWplY3RXaXRoRGVzdHJveSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGVycikgPT4ge1xuICAgICAgICBpZiAoZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgICAgdGhpcy5kZXN0cm95U2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBmdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIH0sIFwicmVqZWN0V2l0aERlc3Ryb3lcIik7XG4gICAgICBjb25zdCBxdWVyeVN0cmluZyA9ICgwLCBpbXBvcnRfcXVlcnlzdHJpbmdfYnVpbGRlci5idWlsZFF1ZXJ5U3RyaW5nKShxdWVyeSB8fCB7fSk7XG4gICAgICBsZXQgcGF0aCA9IHJlcXVlc3QucGF0aDtcbiAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICBwYXRoICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICAgICAgfVxuICAgICAgaWYgKHJlcXVlc3QuZnJhZ21lbnQpIHtcbiAgICAgICAgcGF0aCArPSBgIyR7cmVxdWVzdC5mcmFnbWVudH1gO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVxID0gc2Vzc2lvbi5yZXF1ZXN0KHtcbiAgICAgICAgLi4ucmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICBbaW1wb3J0X2h0dHAyMi5jb25zdGFudHMuSFRUUDJfSEVBREVSX1BBVEhdOiBwYXRoLFxuICAgICAgICBbaW1wb3J0X2h0dHAyMi5jb25zdGFudHMuSFRUUDJfSEVBREVSX01FVEhPRF06IG1ldGhvZFxuICAgICAgfSk7XG4gICAgICBzZXNzaW9uLnJlZigpO1xuICAgICAgcmVxLm9uKFwicmVzcG9uc2VcIiwgKGhlYWRlcnMpID0+IHtcbiAgICAgICAgY29uc3QgaHR0cFJlc3BvbnNlID0gbmV3IGltcG9ydF9wcm90b2NvbF9odHRwLkh0dHBSZXNwb25zZSh7XG4gICAgICAgICAgc3RhdHVzQ29kZTogaGVhZGVyc1tcIjpzdGF0dXNcIl0gfHwgLTEsXG4gICAgICAgICAgaGVhZGVyczogZ2V0VHJhbnNmb3JtZWRIZWFkZXJzKGhlYWRlcnMpLFxuICAgICAgICAgIGJvZHk6IHJlcVxuICAgICAgICB9KTtcbiAgICAgICAgZnVsZmlsbGVkID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZSh7IHJlc3BvbnNlOiBodHRwUmVzcG9uc2UgfSk7XG4gICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICBzZXNzaW9uLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5kZWxldGVTZXNzaW9uKGF1dGhvcml0eSwgc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICAgIHJlcS5zZXRUaW1lb3V0KHJlcXVlc3RUaW1lb3V0LCAoKSA9PiB7XG4gICAgICAgICAgcmVxLmNsb3NlKCk7XG4gICAgICAgICAgY29uc3QgdGltZW91dEVycm9yID0gbmV3IEVycm9yKGBTdHJlYW0gdGltZWQgb3V0IGJlY2F1c2Ugb2Ygbm8gYWN0aXZpdHkgZm9yICR7cmVxdWVzdFRpbWVvdXR9IG1zYCk7XG4gICAgICAgICAgdGltZW91dEVycm9yLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICAgICAgICAgIHJlamVjdFdpdGhEZXN0cm95KHRpbWVvdXRFcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGFib3J0U2lnbmFsKSB7XG4gICAgICAgIGNvbnN0IG9uQWJvcnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgICAgICAgICByZXEuY2xvc2UoKTtcbiAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICAgIHJlamVjdFdpdGhEZXN0cm95KGFib3J0RXJyb3IpO1xuICAgICAgICB9LCBcIm9uQWJvcnRcIik7XG4gICAgICAgIGlmICh0eXBlb2YgYWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc3Qgc2lnbmFsID0gYWJvcnRTaWduYWw7XG4gICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgcmVxLm9uY2UoXCJjbG9zZVwiLCAoKSA9PiBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYm9ydFNpZ25hbC5vbmFib3J0ID0gb25BYm9ydDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVxLm9uKFwiZnJhbWVFcnJvclwiLCAodHlwZSwgY29kZSwgaWQpID0+IHtcbiAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3kobmV3IEVycm9yKGBGcmFtZSB0eXBlIGlkICR7dHlwZX0gaW4gc3RyZWFtIGlkICR7aWR9IGhhcyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX0uYCkpO1xuICAgICAgfSk7XG4gICAgICByZXEub24oXCJlcnJvclwiLCByZWplY3RXaXRoRGVzdHJveSk7XG4gICAgICByZXEub24oXCJhYm9ydGVkXCIsICgpID0+IHtcbiAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3koXG4gICAgICAgICAgbmV3IEVycm9yKGBIVFRQLzIgc3RyZWFtIGlzIGFibm9ybWFsbHkgYWJvcnRlZCBpbiBtaWQtY29tbXVuaWNhdGlvbiB3aXRoIHJlc3VsdCBjb2RlICR7cmVxLnJzdENvZGV9LmApXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIHJlcS5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgc2Vzc2lvbi51bnJlZigpO1xuICAgICAgICBpZiAoZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmdWxmaWxsZWQpIHtcbiAgICAgICAgICByZWplY3RXaXRoRGVzdHJveShuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yOiBodHRwMiByZXF1ZXN0IGRpZCBub3QgZ2V0IGEgcmVzcG9uc2VcIikpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlID0gd3JpdGVSZXF1ZXN0Qm9keShyZXEsIHJlcXVlc3QsIHJlcXVlc3RUaW1lb3V0KTtcbiAgICB9KTtcbiAgfVxuICB1cGRhdGVIdHRwQ2xpZW50Q29uZmlnKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gdGhpcy5jb25maWdQcm92aWRlci50aGVuKChjb25maWcpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgW2tleV06IHZhbHVlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIGh0dHBIYW5kbGVyQ29uZmlncygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcgPz8ge307XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3lzIGEgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHNlc3Npb24gVGhlIHNlc3Npb24gdG8gZGVzdHJveS5cbiAgICovXG4gIGRlc3Ryb3lTZXNzaW9uKHNlc3Npb24pIHtcbiAgICBpZiAoIXNlc3Npb24uZGVzdHJveWVkKSB7XG4gICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5fX25hbWUoX05vZGVIdHRwMkhhbmRsZXIsIFwiTm9kZUh0dHAySGFuZGxlclwiKTtcbnZhciBOb2RlSHR0cDJIYW5kbGVyID0gX05vZGVIdHRwMkhhbmRsZXI7XG5cbi8vIHNyYy9zdHJlYW0tY29sbGVjdG9yL2NvbGxlY3Rvci50c1xuXG52YXIgX0NvbGxlY3RvciA9IGNsYXNzIF9Db2xsZWN0b3IgZXh0ZW5kcyBpbXBvcnRfc3RyZWFtLldyaXRhYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLmJ1ZmZlcmVkQnl0ZXMgPSBbXTtcbiAgfVxuICBfd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgIHRoaXMuYnVmZmVyZWRCeXRlcy5wdXNoKGNodW5rKTtcbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuX19uYW1lKF9Db2xsZWN0b3IsIFwiQ29sbGVjdG9yXCIpO1xudmFyIENvbGxlY3RvciA9IF9Db2xsZWN0b3I7XG5cbi8vIHNyYy9zdHJlYW0tY29sbGVjdG9yL2luZGV4LnRzXG52YXIgc3RyZWFtQ29sbGVjdG9yID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RyZWFtKSA9PiB7XG4gIGlmIChpc1JlYWRhYmxlU3RyZWFtSW5zdGFuY2Uoc3RyZWFtKSkge1xuICAgIHJldHVybiBjb2xsZWN0UmVhZGFibGVTdHJlYW0oc3RyZWFtKTtcbiAgfVxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGNvbGxlY3RvciA9IG5ldyBDb2xsZWN0b3IoKTtcbiAgICBzdHJlYW0ucGlwZShjb2xsZWN0b3IpO1xuICAgIHN0cmVhbS5vbihcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgIGNvbGxlY3Rvci5lbmQoKTtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH0pO1xuICAgIGNvbGxlY3Rvci5vbihcImVycm9yXCIsIHJlamVjdCk7XG4gICAgY29sbGVjdG9yLm9uKFwiZmluaXNoXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShCdWZmZXIuY29uY2F0KHRoaXMuYnVmZmVyZWRCeXRlcykpO1xuICAgICAgcmVzb2x2ZShieXRlcyk7XG4gICAgfSk7XG4gIH0pO1xufSwgXCJzdHJlYW1Db2xsZWN0b3JcIik7XG52YXIgaXNSZWFkYWJsZVN0cmVhbUluc3RhbmNlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RyZWFtKSA9PiB0eXBlb2YgUmVhZGFibGVTdHJlYW0gPT09IFwiZnVuY3Rpb25cIiAmJiBzdHJlYW0gaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSwgXCJpc1JlYWRhYmxlU3RyZWFtSW5zdGFuY2VcIik7XG5hc3luYyBmdW5jdGlvbiBjb2xsZWN0UmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG4gIGNvbnN0IGNodW5rcyA9IFtdO1xuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIGxldCBpc0RvbmUgPSBmYWxzZTtcbiAgbGV0IGxlbmd0aCA9IDA7XG4gIHdoaWxlICghaXNEb25lKSB7XG4gICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHZhbHVlKTtcbiAgICAgIGxlbmd0aCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGlzRG9uZSA9IGRvbmU7XG4gIH1cbiAgY29uc3QgY29sbGVjdGVkID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgY29sbGVjdGVkLnNldChjaHVuaywgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gY2h1bmsubGVuZ3RoO1xuICB9XG4gIHJldHVybiBjb2xsZWN0ZWQ7XG59XG5fX25hbWUoY29sbGVjdFJlYWRhYmxlU3RyZWFtLCBcImNvbGxlY3RSZWFkYWJsZVN0cmVhbVwiKTtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcblxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIERFRkFVTFRfUkVRVUVTVF9USU1FT1VULFxuICBOb2RlSHR0cEhhbmRsZXIsXG4gIE5vZGVIdHRwMkhhbmRsZXIsXG4gIHN0cmVhbUNvbGxlY3RvclxufSk7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-cjs/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/constants.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/constants.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NODEJS_TIMEOUT_ERROR_CODES: () => (/* binding */ NODEJS_TIMEOUT_ERROR_CODES)\n/* harmony export */ });\nconst NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"EPIPE\", \"ETIMEDOUT\"];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjEvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9jb25zdGFudHMuanM/NTk3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMgPSBbXCJFQ09OTlJFU0VUXCIsIFwiRVBJUEVcIiwgXCJFVElNRURPVVRcIl07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTransformedHeaders: () => (/* binding */ getTransformedHeaders)\n/* harmony export */ });\nconst getTransformedHeaders = (headers) => {\n    const transformedHeaders = {};\n    for (const name of Object.keys(headers)) {\n        const headerValues = headers[name];\n        transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(\",\") : headerValues;\n    }\n    return transformedHeaders;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL2dldC10cmFuc2Zvcm1lZC1oZWFkZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4xL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvZ2V0LXRyYW5zZm9ybWVkLWhlYWRlcnMuanM/N2ZhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnZXRUcmFuc2Zvcm1lZEhlYWRlcnMgPSAoaGVhZGVycykgPT4ge1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkSGVhZGVycyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhoZWFkZXJzKSkge1xuICAgICAgICBjb25zdCBoZWFkZXJWYWx1ZXMgPSBoZWFkZXJzW25hbWVdO1xuICAgICAgICB0cmFuc2Zvcm1lZEhlYWRlcnNbbmFtZV0gPSBBcnJheS5pc0FycmF5KGhlYWRlclZhbHVlcykgPyBoZWFkZXJWYWx1ZXMuam9pbihcIixcIikgOiBoZWFkZXJWYWx1ZXM7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1lZEhlYWRlcnM7XG59O1xuZXhwb3J0IHsgZ2V0VHJhbnNmb3JtZWRIZWFkZXJzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/index.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/index.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_REQUEST_TIMEOUT),\n/* harmony export */   NodeHttp2Handler: () => (/* reexport safe */ _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2Handler),\n/* harmony export */   NodeHttpHandler: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.NodeHttpHandler),\n/* harmony export */   streamCollector: () => (/* reexport safe */ _stream_collector__WEBPACK_IMPORTED_MODULE_2__.streamCollector)\n/* harmony export */ });\n/* harmony import */ var _node_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node-http-handler */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js\");\n/* harmony import */ var _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-handler */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js\");\n/* harmony import */ var _stream_collector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stream-collector */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBb0M7QUFDQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4xL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvaW5kZXguanM/YjhiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9ub2RlLWh0dHAtaGFuZGxlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbm9kZS1odHRwMi1oYW5kbGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHJlYW0tY29sbGVjdG9yXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* binding */ DEFAULT_REQUEST_TIMEOUT),\n/* harmony export */   NodeHttpHandler: () => (/* binding */ NodeHttpHandler)\n/* harmony export */ });\n/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/./node_modules/.pnpm/@smithy+protocol-http@4.1.7/node_modules/@smithy/protocol-http/dist-es/index.js\");\n/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/./node_modules/.pnpm/@smithy+querystring-builder@3.0.10/node_modules/@smithy/querystring-builder/dist-es/index.js\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/constants.js\");\n/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-transformed-headers */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\");\n/* harmony import */ var _set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./set-connection-timeout */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js\");\n/* harmony import */ var _set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./set-socket-keep-alive */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js\");\n/* harmony import */ var _set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./set-socket-timeout */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js\");\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./timing */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./write-request-body */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_REQUEST_TIMEOUT = 0;\nclass NodeHttpHandler {\n    static create(instanceOrOptions) {\n        if (typeof instanceOrOptions?.handle === \"function\") {\n            return instanceOrOptions;\n        }\n        return new NodeHttpHandler(instanceOrOptions);\n    }\n    static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {\n        const { sockets, requests, maxSockets } = agent;\n        if (typeof maxSockets !== \"number\" || maxSockets === Infinity) {\n            return socketWarningTimestamp;\n        }\n        const interval = 15000;\n        if (Date.now() - interval < socketWarningTimestamp) {\n            return socketWarningTimestamp;\n        }\n        if (sockets && requests) {\n            for (const origin in sockets) {\n                const socketsInUse = sockets[origin]?.length ?? 0;\n                const requestsEnqueued = requests[origin]?.length ?? 0;\n                if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {\n                    logger?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`);\n                    return Date.now();\n                }\n            }\n        }\n        return socketWarningTimestamp;\n    }\n    constructor(options) {\n        this.socketWarningTimestamp = 0;\n        this.metadata = { handlerProtocol: \"http/1.1\" };\n        this.configProvider = new Promise((resolve, reject) => {\n            if (typeof options === \"function\") {\n                options()\n                    .then((_options) => {\n                    resolve(this.resolveDefaultConfig(_options));\n                })\n                    .catch(reject);\n            }\n            else {\n                resolve(this.resolveDefaultConfig(options));\n            }\n        });\n    }\n    resolveDefaultConfig(options) {\n        const { requestTimeout, connectionTimeout, socketTimeout, httpAgent, httpsAgent } = options || {};\n        const keepAlive = true;\n        const maxSockets = 50;\n        return {\n            connectionTimeout,\n            requestTimeout: requestTimeout ?? socketTimeout,\n            httpAgent: (() => {\n                if (httpAgent instanceof http__WEBPACK_IMPORTED_MODULE_2__.Agent || typeof httpAgent?.destroy === \"function\") {\n                    return httpAgent;\n                }\n                return new http__WEBPACK_IMPORTED_MODULE_2__.Agent({ keepAlive, maxSockets, ...httpAgent });\n            })(),\n            httpsAgent: (() => {\n                if (httpsAgent instanceof https__WEBPACK_IMPORTED_MODULE_3__.Agent || typeof httpsAgent?.destroy === \"function\") {\n                    return httpsAgent;\n                }\n                return new https__WEBPACK_IMPORTED_MODULE_3__.Agent({ keepAlive, maxSockets, ...httpsAgent });\n            })(),\n            logger: console,\n        };\n    }\n    destroy() {\n        this.config?.httpAgent?.destroy();\n        this.config?.httpsAgent?.destroy();\n    }\n    async handle(request, { abortSignal } = {}) {\n        if (!this.config) {\n            this.config = await this.configProvider;\n        }\n        return new Promise((_resolve, _reject) => {\n            let writeRequestBodyPromise = undefined;\n            const timeouts = [];\n            const resolve = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                _resolve(arg);\n            };\n            const reject = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                _reject(arg);\n            };\n            if (!this.config) {\n                throw new Error(\"Node HTTP request handler config is not resolved\");\n            }\n            if (abortSignal?.aborted) {\n                const abortError = new Error(\"Request aborted\");\n                abortError.name = \"AbortError\";\n                reject(abortError);\n                return;\n            }\n            const isSSL = request.protocol === \"https:\";\n            const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;\n            timeouts.push(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.setTimeout(() => {\n                this.socketWarningTimestamp = NodeHttpHandler.checkSocketUsage(agent, this.socketWarningTimestamp, this.config.logger);\n            }, this.config.socketAcquisitionWarningTimeout ??\n                (this.config.requestTimeout ?? 2000) + (this.config.connectionTimeout ?? 1000)));\n            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(request.query || {});\n            let auth = undefined;\n            if (request.username != null || request.password != null) {\n                const username = request.username ?? \"\";\n                const password = request.password ?? \"\";\n                auth = `${username}:${password}`;\n            }\n            let path = request.path;\n            if (queryString) {\n                path += `?${queryString}`;\n            }\n            if (request.fragment) {\n                path += `#${request.fragment}`;\n            }\n            let hostname = request.hostname ?? \"\";\n            if (hostname[0] === \"[\" && hostname.endsWith(\"]\")) {\n                hostname = request.hostname.slice(1, -1);\n            }\n            else {\n                hostname = request.hostname;\n            }\n            const nodeHttpsOptions = {\n                headers: request.headers,\n                host: hostname,\n                method: request.method,\n                path,\n                port: request.port,\n                agent,\n                auth,\n            };\n            const requestFunc = isSSL ? https__WEBPACK_IMPORTED_MODULE_3__.request : http__WEBPACK_IMPORTED_MODULE_2__.request;\n            const req = requestFunc(nodeHttpsOptions, (res) => {\n                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({\n                    statusCode: res.statusCode || -1,\n                    reason: res.statusMessage,\n                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__.getTransformedHeaders)(res.headers),\n                    body: res,\n                });\n                resolve({ response: httpResponse });\n            });\n            req.on(\"error\", (err) => {\n                if (_constants__WEBPACK_IMPORTED_MODULE_4__.NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {\n                    reject(Object.assign(err, { name: \"TimeoutError\" }));\n                }\n                else {\n                    reject(err);\n                }\n            });\n            if (abortSignal) {\n                const onAbort = () => {\n                    req.destroy();\n                    const abortError = new Error(\"Request aborted\");\n                    abortError.name = \"AbortError\";\n                    reject(abortError);\n                };\n                if (typeof abortSignal.addEventListener === \"function\") {\n                    const signal = abortSignal;\n                    signal.addEventListener(\"abort\", onAbort, { once: true });\n                    req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n                }\n                else {\n                    abortSignal.onabort = onAbort;\n                }\n            }\n            timeouts.push((0,_set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__.setConnectionTimeout)(req, reject, this.config.connectionTimeout));\n            timeouts.push((0,_set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__.setSocketTimeout)(req, reject, this.config.requestTimeout));\n            const httpAgent = nodeHttpsOptions.agent;\n            if (typeof httpAgent === \"object\" && \"keepAlive\" in httpAgent) {\n                timeouts.push((0,_set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__.setSocketKeepAlive)(req, {\n                    keepAlive: httpAgent.keepAlive,\n                    keepAliveMsecs: httpAgent.keepAliveMsecs,\n                }));\n            }\n            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_10__.writeRequestBody)(req, request, this.config.requestTimeout).catch((e) => {\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                return _reject(e);\n            });\n        });\n    }\n    updateHttpClientConfig(key, value) {\n        this.config = undefined;\n        this.configProvider = this.configProvider.then((config) => {\n            return {\n                ...config,\n                [key]: value,\n            };\n        });\n    }\n    httpHandlerConfigs() {\n        return this.config ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cC1oYW5kbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRDtBQUNVO0FBQ0g7QUFDRztBQUNOO0FBQ1M7QUFDRjtBQUNIO0FBQ0w7QUFDdEI7QUFDc0I7QUFDakQ7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdDQUFnQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnR0FBZ0csY0FBYyxNQUFNLGtCQUFrQjtBQUN0STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdCQUFnQiwwRUFBMEU7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHVDQUFNO0FBQy9DO0FBQ0E7QUFDQSwyQkFBMkIsdUNBQU0sR0FBRyxxQ0FBcUM7QUFDekUsYUFBYTtBQUNiO0FBQ0EsMENBQTBDLHdDQUFPO0FBQ2pEO0FBQ0E7QUFDQSwyQkFBMkIsd0NBQU8sR0FBRyxzQ0FBc0M7QUFDM0UsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWMsSUFBSTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJDQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJDQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJDQUFNO0FBQ2hDO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0NBQWdDLDZFQUFnQixvQkFBb0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsU0FBUyxHQUFHLFNBQVM7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEM7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwQ0FBUyxHQUFHLHlDQUFRO0FBQzVEO0FBQ0EseUNBQXlDLCtEQUFZO0FBQ3JEO0FBQ0E7QUFDQSw2QkFBNkIsK0VBQXFCO0FBQ2xEO0FBQ0EsaUJBQWlCO0FBQ2pCLDBCQUEwQix3QkFBd0I7QUFDbEQsYUFBYTtBQUNiO0FBQ0Esb0JBQW9CLGtFQUEwQjtBQUM5QyxnREFBZ0Qsc0JBQXNCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxZQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2RUFBb0I7QUFDOUMsMEJBQTBCLHFFQUFnQjtBQUMxQztBQUNBO0FBQ0EsOEJBQThCLDBFQUFrQjtBQUNoRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0Esc0NBQXNDLHNFQUFnQjtBQUN0RCxpQ0FBaUMsMkNBQU07QUFDdkM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cC1oYW5kbGVyLmpzPzViNmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSBcIkBzbWl0aHkvcHJvdG9jb2wtaHR0cFwiO1xuaW1wb3J0IHsgYnVpbGRRdWVyeVN0cmluZyB9IGZyb20gXCJAc21pdGh5L3F1ZXJ5c3RyaW5nLWJ1aWxkZXJcIjtcbmltcG9ydCB7IEFnZW50IGFzIGhBZ2VudCwgcmVxdWVzdCBhcyBoUmVxdWVzdCB9IGZyb20gXCJodHRwXCI7XG5pbXBvcnQgeyBBZ2VudCBhcyBoc0FnZW50LCByZXF1ZXN0IGFzIGhzUmVxdWVzdCB9IGZyb20gXCJodHRwc1wiO1xuaW1wb3J0IHsgTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFRyYW5zZm9ybWVkSGVhZGVycyB9IGZyb20gXCIuL2dldC10cmFuc2Zvcm1lZC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBzZXRDb25uZWN0aW9uVGltZW91dCB9IGZyb20gXCIuL3NldC1jb25uZWN0aW9uLXRpbWVvdXRcIjtcbmltcG9ydCB7IHNldFNvY2tldEtlZXBBbGl2ZSB9IGZyb20gXCIuL3NldC1zb2NrZXQta2VlcC1hbGl2ZVwiO1xuaW1wb3J0IHsgc2V0U29ja2V0VGltZW91dCB9IGZyb20gXCIuL3NldC1zb2NrZXQtdGltZW91dFwiO1xuaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5pbXBvcnQgeyB3cml0ZVJlcXVlc3RCb2R5IH0gZnJvbSBcIi4vd3JpdGUtcmVxdWVzdC1ib2R5XCI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9SRVFVRVNUX1RJTUVPVVQgPSAwO1xuZXhwb3J0IGNsYXNzIE5vZGVIdHRwSGFuZGxlciB7XG4gICAgc3RhdGljIGNyZWF0ZShpbnN0YW5jZU9yT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGluc3RhbmNlT3JPcHRpb25zPy5oYW5kbGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlT3JPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUh0dHBIYW5kbGVyKGluc3RhbmNlT3JPcHRpb25zKTtcbiAgICB9XG4gICAgc3RhdGljIGNoZWNrU29ja2V0VXNhZ2UoYWdlbnQsIHNvY2tldFdhcm5pbmdUaW1lc3RhbXAsIGxvZ2dlciA9IGNvbnNvbGUpIHtcbiAgICAgICAgY29uc3QgeyBzb2NrZXRzLCByZXF1ZXN0cywgbWF4U29ja2V0cyB9ID0gYWdlbnQ7XG4gICAgICAgIGlmICh0eXBlb2YgbWF4U29ja2V0cyAhPT0gXCJudW1iZXJcIiB8fCBtYXhTb2NrZXRzID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHNvY2tldFdhcm5pbmdUaW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSAxNTAwMDtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBpbnRlcnZhbCA8IHNvY2tldFdhcm5pbmdUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIHJldHVybiBzb2NrZXRXYXJuaW5nVGltZXN0YW1wO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb2NrZXRzICYmIHJlcXVlc3RzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9yaWdpbiBpbiBzb2NrZXRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc29ja2V0c0luVXNlID0gc29ja2V0c1tvcmlnaW5dPy5sZW5ndGggPz8gMDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0c0VucXVldWVkID0gcmVxdWVzdHNbb3JpZ2luXT8ubGVuZ3RoID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKHNvY2tldHNJblVzZSA+PSBtYXhTb2NrZXRzICYmIHJlcXVlc3RzRW5xdWV1ZWQgPj0gMiAqIG1heFNvY2tldHMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyPy53YXJuPy4oYEBzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXI6V0FSTiAtIHNvY2tldCB1c2FnZSBhdCBjYXBhY2l0eT0ke3NvY2tldHNJblVzZX0gYW5kICR7cmVxdWVzdHNFbnF1ZXVlZH0gYWRkaXRpb25hbCByZXF1ZXN0cyBhcmUgZW5xdWV1ZWQuXG5TZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL3Nkay1mb3ItamF2YXNjcmlwdC92My9kZXZlbG9wZXItZ3VpZGUvbm9kZS1jb25maWd1cmluZy1tYXhzb2NrZXRzLmh0bWxcbm9yIGluY3JlYXNlIHNvY2tldEFjcXVpc2l0aW9uV2FybmluZ1RpbWVvdXQ9KG1pbGxpcykgaW4gdGhlIE5vZGVIdHRwSGFuZGxlciBjb25maWcuYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ja2V0V2FybmluZ1RpbWVzdGFtcDtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnNvY2tldFdhcm5pbmdUaW1lc3RhbXAgPSAwO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0geyBoYW5kbGVyUHJvdG9jb2w6IFwiaHR0cC8xLjFcIiB9O1xuICAgICAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKF9vcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNvbHZlRGVmYXVsdENvbmZpZyhfb3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc29sdmVEZWZhdWx0Q29uZmlnKG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc29sdmVEZWZhdWx0Q29uZmlnKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyByZXF1ZXN0VGltZW91dCwgY29ubmVjdGlvblRpbWVvdXQsIHNvY2tldFRpbWVvdXQsIGh0dHBBZ2VudCwgaHR0cHNBZ2VudCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgY29uc3Qga2VlcEFsaXZlID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbWF4U29ja2V0cyA9IDUwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29ubmVjdGlvblRpbWVvdXQsXG4gICAgICAgICAgICByZXF1ZXN0VGltZW91dDogcmVxdWVzdFRpbWVvdXQgPz8gc29ja2V0VGltZW91dCxcbiAgICAgICAgICAgIGh0dHBBZ2VudDogKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaHR0cEFnZW50IGluc3RhbmNlb2YgaEFnZW50IHx8IHR5cGVvZiBodHRwQWdlbnQ/LmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cEFnZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGhBZ2VudCh7IGtlZXBBbGl2ZSwgbWF4U29ja2V0cywgLi4uaHR0cEFnZW50IH0pO1xuICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgIGh0dHBzQWdlbnQ6ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGh0dHBzQWdlbnQgaW5zdGFuY2VvZiBoc0FnZW50IHx8IHR5cGVvZiBodHRwc0FnZW50Py5kZXN0cm95ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGh0dHBzQWdlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaHNBZ2VudCh7IGtlZXBBbGl2ZSwgbWF4U29ja2V0cywgLi4uaHR0cHNBZ2VudCB9KTtcbiAgICAgICAgICAgIH0pKCksXG4gICAgICAgICAgICBsb2dnZXI6IGNvbnNvbGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuY29uZmlnPy5odHRwQWdlbnQ/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWc/Lmh0dHBzQWdlbnQ/LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlKHJlcXVlc3QsIHsgYWJvcnRTaWduYWwgfSA9IHt9KSB7XG4gICAgICAgIGlmICghdGhpcy5jb25maWcpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gYXdhaXQgdGhpcy5jb25maWdQcm92aWRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0cyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9IGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0cy5mb3JFYWNoKHRpbWluZy5jbGVhclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIF9yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVqZWN0ID0gYXN5bmMgKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlO1xuICAgICAgICAgICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgICAgICAgICAgX3JlamVjdChhcmcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIEhUVFAgcmVxdWVzdCBoYW5kbGVyIGNvbmZpZyBpcyBub3QgcmVzb2x2ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWJvcnRTaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICAgICAgICAgIHJlamVjdChhYm9ydEVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc1NTTCA9IHJlcXVlc3QucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG4gICAgICAgICAgICBjb25zdCBhZ2VudCA9IGlzU1NMID8gdGhpcy5jb25maWcuaHR0cHNBZ2VudCA6IHRoaXMuY29uZmlnLmh0dHBBZ2VudDtcbiAgICAgICAgICAgIHRpbWVvdXRzLnB1c2godGltaW5nLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCA9IE5vZGVIdHRwSGFuZGxlci5jaGVja1NvY2tldFVzYWdlKGFnZW50LCB0aGlzLnNvY2tldFdhcm5pbmdUaW1lc3RhbXAsIHRoaXMuY29uZmlnLmxvZ2dlcik7XG4gICAgICAgICAgICB9LCB0aGlzLmNvbmZpZy5zb2NrZXRBY3F1aXNpdGlvbldhcm5pbmdUaW1lb3V0ID8/XG4gICAgICAgICAgICAgICAgKHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0ID8/IDIwMDApICsgKHRoaXMuY29uZmlnLmNvbm5lY3Rpb25UaW1lb3V0ID8/IDEwMDApKSk7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcocmVxdWVzdC5xdWVyeSB8fCB7fSk7XG4gICAgICAgICAgICBsZXQgYXV0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVzZXJuYW1lICE9IG51bGwgfHwgcmVxdWVzdC5wYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXF1ZXN0LnVzZXJuYW1lID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSByZXF1ZXN0LnBhc3N3b3JkID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgYXV0aCA9IGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGF0aCA9IHJlcXVlc3QucGF0aDtcbiAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHBhdGggKz0gYD8ke3F1ZXJ5U3RyaW5nfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5mcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHBhdGggKz0gYCMke3JlcXVlc3QuZnJhZ21lbnR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBob3N0bmFtZSA9IHJlcXVlc3QuaG9zdG5hbWUgPz8gXCJcIjtcbiAgICAgICAgICAgIGlmIChob3N0bmFtZVswXSA9PT0gXCJbXCIgJiYgaG9zdG5hbWUuZW5kc1dpdGgoXCJdXCIpKSB7XG4gICAgICAgICAgICAgICAgaG9zdG5hbWUgPSByZXF1ZXN0Lmhvc3RuYW1lLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RuYW1lID0gcmVxdWVzdC5ob3N0bmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGVIdHRwc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGhvc3Q6IGhvc3RuYW1lLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICBwb3J0OiByZXF1ZXN0LnBvcnQsXG4gICAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgICAgYXV0aCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RnVuYyA9IGlzU1NMID8gaHNSZXF1ZXN0IDogaFJlcXVlc3Q7XG4gICAgICAgICAgICBjb25zdCByZXEgPSByZXF1ZXN0RnVuYyhub2RlSHR0cHNPcHRpb25zLCAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHR0cFJlc3BvbnNlID0gbmV3IEh0dHBSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlIHx8IC0xLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlcy5zdGF0dXNNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBnZXRUcmFuc2Zvcm1lZEhlYWRlcnMocmVzLmhlYWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiByZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IHJlc3BvbnNlOiBodHRwUmVzcG9uc2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcS5vbihcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMuaW5jbHVkZXMoZXJyLmNvZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChPYmplY3QuYXNzaWduKGVyciwgeyBuYW1lOiBcIlRpbWVvdXRFcnJvclwiIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb25BYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJvcnRFcnJvciA9IG5ldyBFcnJvcihcIlJlcXVlc3QgYWJvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChhYm9ydEVycm9yKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0U2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uY2UoXCJjbG9zZVwiLCAoKSA9PiBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0U2lnbmFsLm9uYWJvcnQgPSBvbkFib3J0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVvdXRzLnB1c2goc2V0Q29ubmVjdGlvblRpbWVvdXQocmVxLCByZWplY3QsIHRoaXMuY29uZmlnLmNvbm5lY3Rpb25UaW1lb3V0KSk7XG4gICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHNldFNvY2tldFRpbWVvdXQocmVxLCByZWplY3QsIHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0KSk7XG4gICAgICAgICAgICBjb25zdCBodHRwQWdlbnQgPSBub2RlSHR0cHNPcHRpb25zLmFnZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBodHRwQWdlbnQgPT09IFwib2JqZWN0XCIgJiYgXCJrZWVwQWxpdmVcIiBpbiBodHRwQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHNldFNvY2tldEtlZXBBbGl2ZShyZXEsIHtcbiAgICAgICAgICAgICAgICAgICAga2VlcEFsaXZlOiBodHRwQWdlbnQua2VlcEFsaXZlLFxuICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmVNc2VjczogaHR0cEFnZW50LmtlZXBBbGl2ZU1zZWNzLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlID0gd3JpdGVSZXF1ZXN0Qm9keShyZXEsIHJlcXVlc3QsIHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWplY3QoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZUh0dHBDbGllbnRDb25maWcoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb25maWdQcm92aWRlciA9IHRoaXMuY29uZmlnUHJvdmlkZXIudGhlbigoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBba2V5XTogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaHR0cEhhbmRsZXJDb25maWdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcgPz8ge307XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2ConnectionManager: () => (/* binding */ NodeHttp2ConnectionManager)\n/* harmony export */ });\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http2 */ \"http2\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-connection-pool */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js\");\n\n\nclass NodeHttp2ConnectionManager {\n    constructor(config) {\n        this.sessionCache = new Map();\n        this.config = config;\n        if (this.config.maxConcurrency && this.config.maxConcurrency <= 0) {\n            throw new RangeError(\"maxConcurrency must be greater than zero.\");\n        }\n    }\n    lease(requestContext, connectionConfiguration) {\n        const url = this.getUrlString(requestContext);\n        const existingPool = this.sessionCache.get(url);\n        if (existingPool) {\n            const existingSession = existingPool.poll();\n            if (existingSession && !this.config.disableConcurrency) {\n                return existingSession;\n            }\n        }\n        const session = http2__WEBPACK_IMPORTED_MODULE_0___default().connect(url);\n        if (this.config.maxConcurrency) {\n            session.settings({ maxConcurrentStreams: this.config.maxConcurrency }, (err) => {\n                if (err) {\n                    throw new Error(\"Fail to set maxConcurrentStreams to \" +\n                        this.config.maxConcurrency +\n                        \"when creating new session for \" +\n                        requestContext.destination.toString());\n                }\n            });\n        }\n        session.unref();\n        const destroySessionCb = () => {\n            session.destroy();\n            this.deleteSession(url, session);\n        };\n        session.on(\"goaway\", destroySessionCb);\n        session.on(\"error\", destroySessionCb);\n        session.on(\"frameError\", destroySessionCb);\n        session.on(\"close\", () => this.deleteSession(url, session));\n        if (connectionConfiguration.requestTimeout) {\n            session.setTimeout(connectionConfiguration.requestTimeout, destroySessionCb);\n        }\n        const connectionPool = this.sessionCache.get(url) || new _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2ConnectionPool();\n        connectionPool.offerLast(session);\n        this.sessionCache.set(url, connectionPool);\n        return session;\n    }\n    deleteSession(authority, session) {\n        const existingConnectionPool = this.sessionCache.get(authority);\n        if (!existingConnectionPool) {\n            return;\n        }\n        if (!existingConnectionPool.contains(session)) {\n            return;\n        }\n        existingConnectionPool.remove(session);\n        this.sessionCache.set(authority, existingConnectionPool);\n    }\n    release(requestContext, session) {\n        const cacheKey = this.getUrlString(requestContext);\n        this.sessionCache.get(cacheKey)?.offerLast(session);\n    }\n    destroy() {\n        for (const [key, connectionPool] of this.sessionCache) {\n            for (const session of connectionPool) {\n                if (!session.destroyed) {\n                    session.destroy();\n                }\n                connectionPool.remove(session);\n            }\n            this.sessionCache.delete(key);\n        }\n    }\n    setMaxConcurrentStreams(maxConcurrentStreams) {\n        if (maxConcurrentStreams && maxConcurrentStreams <= 0) {\n            throw new RangeError(\"maxConcurrentStreams must be greater than zero.\");\n        }\n        this.config.maxConcurrency = maxConcurrentStreams;\n    }\n    setDisableConcurrentStreams(disableConcurrentStreams) {\n        this.config.disableConcurrency = disableConcurrentStreams;\n    }\n    getUrlString(request) {\n        return request.destination.toString();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItY29ubmVjdGlvbi1tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEI7QUFDNkM7QUFDaEU7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBYTtBQUNyQztBQUNBLCtCQUErQixrREFBa0Q7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUF1QjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItY29ubmVjdGlvbi1tYW5hZ2VyLmpzP2MxOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGh0dHAyIGZyb20gXCJodHRwMlwiO1xuaW1wb3J0IHsgTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wgfSBmcm9tIFwiLi9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tcG9vbFwiO1xuZXhwb3J0IGNsYXNzIE5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICBpZiAodGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgJiYgdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtYXhDb25jdXJyZW5jeSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZWFzZShyZXF1ZXN0Q29udGV4dCwgY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5nZXRVcmxTdHJpbmcocmVxdWVzdENvbnRleHQpO1xuICAgICAgICBjb25zdCBleGlzdGluZ1Bvb2wgPSB0aGlzLnNlc3Npb25DYWNoZS5nZXQodXJsKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nUG9vbCkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gZXhpc3RpbmdQb29sLnBvbGwoKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Nlc3Npb24gJiYgIXRoaXMuY29uZmlnLmRpc2FibGVDb25jdXJyZW5jeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1Nlc3Npb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGh0dHAyLmNvbm5lY3QodXJsKTtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5KSB7XG4gICAgICAgICAgICBzZXNzaW9uLnNldHRpbmdzKHsgbWF4Q29uY3VycmVudFN0cmVhbXM6IHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5IH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWwgdG8gc2V0IG1heENvbmN1cnJlbnRTdHJlYW1zIHRvIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5ICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2hlbiBjcmVhdGluZyBuZXcgc2Vzc2lvbiBmb3IgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENvbnRleHQuZGVzdGluYXRpb24udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvbi51bnJlZigpO1xuICAgICAgICBjb25zdCBkZXN0cm95U2Vzc2lvbkNiID0gKCkgPT4ge1xuICAgICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZVNlc3Npb24odXJsLCBzZXNzaW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2Vzc2lvbi5vbihcImdvYXdheVwiLCBkZXN0cm95U2Vzc2lvbkNiKTtcbiAgICAgICAgc2Vzc2lvbi5vbihcImVycm9yXCIsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgICAgICBzZXNzaW9uLm9uKFwiZnJhbWVFcnJvclwiLCBkZXN0cm95U2Vzc2lvbkNiKTtcbiAgICAgICAgc2Vzc2lvbi5vbihcImNsb3NlXCIsICgpID0+IHRoaXMuZGVsZXRlU2Vzc2lvbih1cmwsIHNlc3Npb24pKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25Db25maWd1cmF0aW9uLnJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICAgICAgICBzZXNzaW9uLnNldFRpbWVvdXQoY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24ucmVxdWVzdFRpbWVvdXQsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25Qb29sID0gdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KHVybCkgfHwgbmV3IE5vZGVIdHRwMkNvbm5lY3Rpb25Qb29sKCk7XG4gICAgICAgIGNvbm5lY3Rpb25Qb29sLm9mZmVyTGFzdChzZXNzaW9uKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUuc2V0KHVybCwgY29ubmVjdGlvblBvb2wpO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgZGVsZXRlU2Vzc2lvbihhdXRob3JpdHksIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDb25uZWN0aW9uUG9vbCA9IHRoaXMuc2Vzc2lvbkNhY2hlLmdldChhdXRob3JpdHkpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nQ29ubmVjdGlvblBvb2wpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV4aXN0aW5nQ29ubmVjdGlvblBvb2wuY29udGFpbnMoc2Vzc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBleGlzdGluZ0Nvbm5lY3Rpb25Qb29sLnJlbW92ZShzZXNzaW9uKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUuc2V0KGF1dGhvcml0eSwgZXhpc3RpbmdDb25uZWN0aW9uUG9vbCk7XG4gICAgfVxuICAgIHJlbGVhc2UocmVxdWVzdENvbnRleHQsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldFVybFN0cmluZyhyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbkNhY2hlLmdldChjYWNoZUtleSk/Lm9mZmVyTGFzdChzZXNzaW9uKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBjb25uZWN0aW9uUG9vbF0gb2YgdGhpcy5zZXNzaW9uQ2FjaGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiBjb25uZWN0aW9uUG9vbCkge1xuICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbi5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25Qb29sLnJlbW92ZShzZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbkNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldE1heENvbmN1cnJlbnRTdHJlYW1zKG1heENvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgIGlmIChtYXhDb25jdXJyZW50U3RyZWFtcyAmJiBtYXhDb25jdXJyZW50U3RyZWFtcyA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heENvbmN1cnJlbnRTdHJlYW1zIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVudFN0cmVhbXM7XG4gICAgfVxuICAgIHNldERpc2FibGVDb25jdXJyZW50U3RyZWFtcyhkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgdGhpcy5jb25maWcuZGlzYWJsZUNvbmN1cnJlbmN5ID0gZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zO1xuICAgIH1cbiAgICBnZXRVcmxTdHJpbmcocmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdC5kZXN0aW5hdGlvbi50b1N0cmluZygpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2ConnectionPool: () => (/* binding */ NodeHttp2ConnectionPool)\n/* harmony export */ });\nclass NodeHttp2ConnectionPool {\n    constructor(sessions) {\n        this.sessions = [];\n        this.sessions = sessions ?? [];\n    }\n    poll() {\n        if (this.sessions.length > 0) {\n            return this.sessions.shift();\n        }\n    }\n    offerLast(session) {\n        this.sessions.push(session);\n    }\n    contains(session) {\n        return this.sessions.includes(session);\n    }\n    remove(session) {\n        this.sessions = this.sessions.filter((s) => s !== session);\n    }\n    [Symbol.iterator]() {\n        return this.sessions[Symbol.iterator]();\n    }\n    destroy(connection) {\n        for (const session of this.sessions) {\n            if (session === connection) {\n                if (!session.destroyed) {\n                    session.destroy();\n                }\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItY29ubmVjdGlvbi1wb29sLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4xL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvbm9kZS1odHRwMi1jb25uZWN0aW9uLXBvb2wuanM/YjkxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wge1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25zKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5zZXNzaW9ucyA9IHNlc3Npb25zID8/IFtdO1xuICAgIH1cbiAgICBwb2xsKCkge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9ucy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9mZmVyTGFzdChzZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbnMucHVzaChzZXNzaW9uKTtcbiAgICB9XG4gICAgY29udGFpbnMoc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9ucy5pbmNsdWRlcyhzZXNzaW9uKTtcbiAgICB9XG4gICAgcmVtb3ZlKHNlc3Npb24pIHtcbiAgICAgICAgdGhpcy5zZXNzaW9ucyA9IHRoaXMuc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzICE9PSBzZXNzaW9uKTtcbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25zW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICB9XG4gICAgZGVzdHJveShjb25uZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiB0aGlzLnNlc3Npb25zKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiA9PT0gY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbi5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2Handler: () => (/* binding */ NodeHttp2Handler)\n/* harmony export */ });\n/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/./node_modules/.pnpm/@smithy+protocol-http@4.1.7/node_modules/@smithy/protocol-http/dist-es/index.js\");\n/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/./node_modules/.pnpm/@smithy+querystring-builder@3.0.10/node_modules/@smithy/querystring-builder/dist-es/index.js\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http2 */ \"http2\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get-transformed-headers */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\");\n/* harmony import */ var _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node-http2-connection-manager */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js\");\n/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./write-request-body */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\");\n\n\n\n\n\n\nclass NodeHttp2Handler {\n    static create(instanceOrOptions) {\n        if (typeof instanceOrOptions?.handle === \"function\") {\n            return instanceOrOptions;\n        }\n        return new NodeHttp2Handler(instanceOrOptions);\n    }\n    constructor(options) {\n        this.metadata = { handlerProtocol: \"h2\" };\n        this.connectionManager = new _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__.NodeHttp2ConnectionManager({});\n        this.configProvider = new Promise((resolve, reject) => {\n            if (typeof options === \"function\") {\n                options()\n                    .then((opts) => {\n                    resolve(opts || {});\n                })\n                    .catch(reject);\n            }\n            else {\n                resolve(options || {});\n            }\n        });\n    }\n    destroy() {\n        this.connectionManager.destroy();\n    }\n    async handle(request, { abortSignal } = {}) {\n        if (!this.config) {\n            this.config = await this.configProvider;\n            this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams || false);\n            if (this.config.maxConcurrentStreams) {\n                this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams);\n            }\n        }\n        const { requestTimeout, disableConcurrentStreams } = this.config;\n        return new Promise((_resolve, _reject) => {\n            let fulfilled = false;\n            let writeRequestBodyPromise = undefined;\n            const resolve = async (arg) => {\n                await writeRequestBodyPromise;\n                _resolve(arg);\n            };\n            const reject = async (arg) => {\n                await writeRequestBodyPromise;\n                _reject(arg);\n            };\n            if (abortSignal?.aborted) {\n                fulfilled = true;\n                const abortError = new Error(\"Request aborted\");\n                abortError.name = \"AbortError\";\n                reject(abortError);\n                return;\n            }\n            const { hostname, method, port, protocol, query } = request;\n            let auth = \"\";\n            if (request.username != null || request.password != null) {\n                const username = request.username ?? \"\";\n                const password = request.password ?? \"\";\n                auth = `${username}:${password}@`;\n            }\n            const authority = `${protocol}//${auth}${hostname}${port ? `:${port}` : \"\"}`;\n            const requestContext = { destination: new URL(authority) };\n            const session = this.connectionManager.lease(requestContext, {\n                requestTimeout: this.config?.sessionTimeout,\n                disableConcurrentStreams: disableConcurrentStreams || false,\n            });\n            const rejectWithDestroy = (err) => {\n                if (disableConcurrentStreams) {\n                    this.destroySession(session);\n                }\n                fulfilled = true;\n                reject(err);\n            };\n            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(query || {});\n            let path = request.path;\n            if (queryString) {\n                path += `?${queryString}`;\n            }\n            if (request.fragment) {\n                path += `#${request.fragment}`;\n            }\n            const req = session.request({\n                ...request.headers,\n                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_PATH]: path,\n                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_METHOD]: method,\n            });\n            session.ref();\n            req.on(\"response\", (headers) => {\n                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({\n                    statusCode: headers[\":status\"] || -1,\n                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__.getTransformedHeaders)(headers),\n                    body: req,\n                });\n                fulfilled = true;\n                resolve({ response: httpResponse });\n                if (disableConcurrentStreams) {\n                    session.close();\n                    this.connectionManager.deleteSession(authority, session);\n                }\n            });\n            if (requestTimeout) {\n                req.setTimeout(requestTimeout, () => {\n                    req.close();\n                    const timeoutError = new Error(`Stream timed out because of no activity for ${requestTimeout} ms`);\n                    timeoutError.name = \"TimeoutError\";\n                    rejectWithDestroy(timeoutError);\n                });\n            }\n            if (abortSignal) {\n                const onAbort = () => {\n                    req.close();\n                    const abortError = new Error(\"Request aborted\");\n                    abortError.name = \"AbortError\";\n                    rejectWithDestroy(abortError);\n                };\n                if (typeof abortSignal.addEventListener === \"function\") {\n                    const signal = abortSignal;\n                    signal.addEventListener(\"abort\", onAbort, { once: true });\n                    req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n                }\n                else {\n                    abortSignal.onabort = onAbort;\n                }\n            }\n            req.on(\"frameError\", (type, code, id) => {\n                rejectWithDestroy(new Error(`Frame type id ${type} in stream id ${id} has failed with code ${code}.`));\n            });\n            req.on(\"error\", rejectWithDestroy);\n            req.on(\"aborted\", () => {\n                rejectWithDestroy(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${req.rstCode}.`));\n            });\n            req.on(\"close\", () => {\n                session.unref();\n                if (disableConcurrentStreams) {\n                    session.destroy();\n                }\n                if (!fulfilled) {\n                    rejectWithDestroy(new Error(\"Unexpected error: http2 request did not get a response\"));\n                }\n            });\n            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_5__.writeRequestBody)(req, request, requestTimeout);\n        });\n    }\n    updateHttpClientConfig(key, value) {\n        this.config = undefined;\n        this.configProvider = this.configProvider.then((config) => {\n            return {\n                ...config,\n                [key]: value,\n            };\n        });\n    }\n    httpHandlerConfigs() {\n        return this.config ?? {};\n    }\n    destroySession(session) {\n        if (!session.destroyed) {\n            session.destroy();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQUNVO0FBQzdCO0FBQ2dDO0FBQ1c7QUFDckI7QUFDakQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixxQ0FBcUMsc0ZBQTBCLEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjLElBQUk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkNBQTJDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBMEM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsU0FBUyxHQUFHLFNBQVM7QUFDL0M7QUFDQSxpQ0FBaUMsU0FBUyxJQUFJLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxLQUFLLE9BQU87QUFDdkYscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2RUFBZ0IsWUFBWTtBQUM1RDtBQUNBO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEM7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDRDQUFTO0FBQzFCLGlCQUFpQiw0Q0FBUztBQUMxQixhQUFhO0FBQ2I7QUFDQTtBQUNBLHlDQUF5QywrREFBWTtBQUNyRDtBQUNBLDZCQUE2QiwrRUFBcUI7QUFDbEQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSwwQkFBMEIsd0JBQXdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRyxnQkFBZ0I7QUFDbEg7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxZQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELE1BQU0sZUFBZSxJQUFJLHVCQUF1QixLQUFLO0FBQ2xILGFBQWE7QUFDYjtBQUNBO0FBQ0EseUhBQXlILFlBQVk7QUFDckksYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isc0NBQXNDLHFFQUFnQjtBQUN0RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItaGFuZGxlci5qcz8yZjAwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBSZXNwb25zZSB9IGZyb20gXCJAc21pdGh5L3Byb3RvY29sLWh0dHBcIjtcbmltcG9ydCB7IGJ1aWxkUXVlcnlTdHJpbmcgfSBmcm9tIFwiQHNtaXRoeS9xdWVyeXN0cmluZy1idWlsZGVyXCI7XG5pbXBvcnQgeyBjb25zdGFudHMgfSBmcm9tIFwiaHR0cDJcIjtcbmltcG9ydCB7IGdldFRyYW5zZm9ybWVkSGVhZGVycyB9IGZyb20gXCIuL2dldC10cmFuc2Zvcm1lZC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBOb2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlciB9IGZyb20gXCIuL25vZGUtaHR0cDItY29ubmVjdGlvbi1tYW5hZ2VyXCI7XG5pbXBvcnQgeyB3cml0ZVJlcXVlc3RCb2R5IH0gZnJvbSBcIi4vd3JpdGUtcmVxdWVzdC1ib2R5XCI7XG5leHBvcnQgY2xhc3MgTm9kZUh0dHAySGFuZGxlciB7XG4gICAgc3RhdGljIGNyZWF0ZShpbnN0YW5jZU9yT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGluc3RhbmNlT3JPcHRpb25zPy5oYW5kbGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlT3JPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUh0dHAySGFuZGxlcihpbnN0YW5jZU9yT3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHsgaGFuZGxlclByb3RvY29sOiBcImgyXCIgfTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlciA9IG5ldyBOb2RlSHR0cDJDb25uZWN0aW9uTWFuYWdlcih7fSk7XG4gICAgICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigob3B0cykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG9wdHMgfHwge30pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShvcHRpb25zIHx8IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGUocmVxdWVzdCwgeyBhYm9ydFNpZ25hbCB9ID0ge30pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhd2FpdCB0aGlzLmNvbmZpZ1Byb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5zZXREaXNhYmxlQ29uY3VycmVudFN0cmVhbXModGhpcy5jb25maWcuZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zIHx8IGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW50U3RyZWFtcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuc2V0TWF4Q29uY3VycmVudFN0cmVhbXModGhpcy5jb25maWcubWF4Q29uY3VycmVudFN0cmVhbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgcmVxdWVzdFRpbWVvdXQsIGRpc2FibGVDb25jdXJyZW50U3RyZWFtcyB9ID0gdGhpcy5jb25maWc7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCBmdWxmaWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmUgPSBhc3luYyAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgICAgICAgICAgX3Jlc29sdmUoYXJnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZWplY3QgPSBhc3luYyAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgICAgICAgICAgX3JlamVjdChhcmcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChhYm9ydFNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgYWJvcnRFcnJvciA9IG5ldyBFcnJvcihcIlJlcXVlc3QgYWJvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgICAgICAgICByZWplY3QoYWJvcnRFcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBob3N0bmFtZSwgbWV0aG9kLCBwb3J0LCBwcm90b2NvbCwgcXVlcnkgfSA9IHJlcXVlc3Q7XG4gICAgICAgICAgICBsZXQgYXV0aCA9IFwiXCI7XG4gICAgICAgICAgICBpZiAocmVxdWVzdC51c2VybmFtZSAhPSBudWxsIHx8IHJlcXVlc3QucGFzc3dvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxdWVzdC51c2VybmFtZSA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gcmVxdWVzdC5wYXNzd29yZCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGF1dGggPSBgJHt1c2VybmFtZX06JHtwYXNzd29yZH1AYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1dGhvcml0eSA9IGAke3Byb3RvY29sfS8vJHthdXRofSR7aG9zdG5hbWV9JHtwb3J0ID8gYDoke3BvcnR9YCA6IFwiXCJ9YDtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RDb250ZXh0ID0geyBkZXN0aW5hdGlvbjogbmV3IFVSTChhdXRob3JpdHkpIH07XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5sZWFzZShyZXF1ZXN0Q29udGV4dCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUaW1lb3V0OiB0aGlzLmNvbmZpZz8uc2Vzc2lvblRpbWVvdXQsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zOiBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMgfHwgZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlamVjdFdpdGhEZXN0cm95ID0gKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95U2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcocXVlcnkgfHwge30pO1xuICAgICAgICAgICAgbGV0IHBhdGggPSByZXF1ZXN0LnBhdGg7XG4gICAgICAgICAgICBpZiAocXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBwYXRoICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3QuZnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBwYXRoICs9IGAjJHtyZXF1ZXN0LmZyYWdtZW50fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXEgPSBzZXNzaW9uLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3QuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBbY29uc3RhbnRzLkhUVFAyX0hFQURFUl9QQVRIXTogcGF0aCxcbiAgICAgICAgICAgICAgICBbY29uc3RhbnRzLkhUVFAyX0hFQURFUl9NRVRIT0RdOiBtZXRob2QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlc3Npb24ucmVmKCk7XG4gICAgICAgICAgICByZXEub24oXCJyZXNwb25zZVwiLCAoaGVhZGVycykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0dHBSZXNwb25zZSA9IG5ldyBIdHRwUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBoZWFkZXJzW1wiOnN0YXR1c1wiXSB8fCAtMSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogZ2V0VHJhbnNmb3JtZWRIZWFkZXJzKGhlYWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiByZXEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgcmVzcG9uc2U6IGh0dHBSZXNwb25zZSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5kZWxldGVTZXNzaW9uKGF1dGhvcml0eSwgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICByZXEuc2V0VGltZW91dChyZXF1ZXN0VGltZW91dCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXEuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZW91dEVycm9yID0gbmV3IEVycm9yKGBTdHJlYW0gdGltZWQgb3V0IGJlY2F1c2Ugb2Ygbm8gYWN0aXZpdHkgZm9yICR7cmVxdWVzdFRpbWVvdXR9IG1zYCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRFcnJvci5uYW1lID0gXCJUaW1lb3V0RXJyb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3kodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9uQWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3koYWJvcnRFcnJvcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFib3J0U2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduYWwgPSBhYm9ydFNpZ25hbDtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmNlKFwiY2xvc2VcIiwgKCkgPT4gc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhYm9ydFNpZ25hbC5vbmFib3J0ID0gb25BYm9ydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEub24oXCJmcmFtZUVycm9yXCIsICh0eXBlLCBjb2RlLCBpZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdFdpdGhEZXN0cm95KG5ldyBFcnJvcihgRnJhbWUgdHlwZSBpZCAke3R5cGV9IGluIHN0cmVhbSBpZCAke2lkfSBoYXMgZmFpbGVkIHdpdGggY29kZSAke2NvZGV9LmApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxLm9uKFwiZXJyb3JcIiwgcmVqZWN0V2l0aERlc3Ryb3kpO1xuICAgICAgICAgICAgcmVxLm9uKFwiYWJvcnRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3kobmV3IEVycm9yKGBIVFRQLzIgc3RyZWFtIGlzIGFibm9ybWFsbHkgYWJvcnRlZCBpbiBtaWQtY29tbXVuaWNhdGlvbiB3aXRoIHJlc3VsdCBjb2RlICR7cmVxLnJzdENvZGV9LmApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlc3Npb24udW5yZWYoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZ1bGZpbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3RXaXRoRGVzdHJveShuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yOiBodHRwMiByZXF1ZXN0IGRpZCBub3QgZ2V0IGEgcmVzcG9uc2VcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB3cml0ZVJlcXVlc3RCb2R5KHJlcSwgcmVxdWVzdCwgcmVxdWVzdFRpbWVvdXQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlSHR0cENsaWVudENvbmZpZyhrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gdGhpcy5jb25maWdQcm92aWRlci50aGVuKChjb25maWcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBodHRwSGFuZGxlckNvbmZpZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZyA/PyB7fTtcbiAgICB9XG4gICAgZGVzdHJveVNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICBpZiAoIXNlc3Npb24uZGVzdHJveWVkKSB7XG4gICAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setConnectionTimeout: () => (/* binding */ setConnectionTimeout)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 1000;\nconst setConnectionTimeout = (request, reject, timeoutInMs = 0) => {\n    if (!timeoutInMs) {\n        return -1;\n    }\n    const registerTimeout = (offset) => {\n        const timeoutId = _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(() => {\n            request.destroy();\n            reject(Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {\n                name: \"TimeoutError\",\n            }));\n        }, timeoutInMs - offset);\n        const doWithSocket = (socket) => {\n            if (socket?.connecting) {\n                socket.on(\"connect\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);\n                });\n            }\n            else {\n                _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);\n            }\n        };\n        if (request.socket) {\n            doWithSocket(request.socket);\n        }\n        else {\n            request.on(\"socket\", doWithSocket);\n        }\n    };\n    if (timeoutInMs < 2000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3NldC1jb25uZWN0aW9uLXRpbWVvdXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJDQUFNO0FBQ2hDO0FBQ0Esd0dBQXdHLGFBQWE7QUFDckg7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBTTtBQUMxQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdCQUFnQiwyQ0FBTTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQU07QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjEvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zZXQtY29ubmVjdGlvbi10aW1lb3V0LmpzP2YzMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5jb25zdCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FID0gMTAwMDtcbmV4cG9ydCBjb25zdCBzZXRDb25uZWN0aW9uVGltZW91dCA9IChyZXF1ZXN0LCByZWplY3QsIHRpbWVvdXRJbk1zID0gMCkgPT4ge1xuICAgIGlmICghdGltZW91dEluTXMpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBjb25zdCByZWdpc3RlclRpbWVvdXQgPSAob2Zmc2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRpbWluZy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24obmV3IEVycm9yKGBTb2NrZXQgdGltZWQgb3V0IHdpdGhvdXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvbiB3aXRoaW4gJHt0aW1lb3V0SW5Nc30gbXNgKSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiVGltZW91dEVycm9yXCIsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIHRpbWVvdXRJbk1zIC0gb2Zmc2V0KTtcbiAgICAgICAgY29uc3QgZG9XaXRoU29ja2V0ID0gKHNvY2tldCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNvY2tldD8uY29ubmVjdGluZykge1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbihcImNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZXF1ZXN0LnNvY2tldCkge1xuICAgICAgICAgICAgZG9XaXRoU29ja2V0KHJlcXVlc3Quc29ja2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3Qub24oXCJzb2NrZXRcIiwgZG9XaXRoU29ja2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKHRpbWVvdXRJbk1zIDwgMjAwMCkge1xuICAgICAgICByZWdpc3RlclRpbWVvdXQoMCk7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGltaW5nLnNldFRpbWVvdXQocmVnaXN0ZXJUaW1lb3V0LmJpbmQobnVsbCwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSksIERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setSocketKeepAlive: () => (/* binding */ setSocketKeepAlive)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nconst setSocketKeepAlive = (request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME) => {\n    if (keepAlive !== true) {\n        return -1;\n    }\n    const registerListener = () => {\n        if (request.socket) {\n            request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n        }\n        else {\n            request.on(\"socket\", (socket) => {\n                socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n            });\n        }\n    };\n    if (deferTimeMs === 0) {\n        registerListener();\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerListener, deferTimeMs);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3NldC1zb2NrZXQta2VlcC1hbGl2ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrQztBQUNsQztBQUNPLHVDQUF1QywyQkFBMkI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQ0FBTTtBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3NldC1zb2NrZXQta2VlcC1hbGl2ZS5qcz8wNTRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRpbWluZyB9IGZyb20gXCIuL3RpbWluZ1wiO1xuY29uc3QgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSA9IDMwMDA7XG5leHBvcnQgY29uc3Qgc2V0U29ja2V0S2VlcEFsaXZlID0gKHJlcXVlc3QsIHsga2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB9LCBkZWZlclRpbWVNcyA9IERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUpID0+IHtcbiAgICBpZiAoa2VlcEFsaXZlICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgY29uc3QgcmVnaXN0ZXJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICAgICAgICByZXF1ZXN0LnNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3Qub24oXCJzb2NrZXRcIiwgKHNvY2tldCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZGVmZXJUaW1lTXMgPT09IDApIHtcbiAgICAgICAgcmVnaXN0ZXJMaXN0ZW5lcigpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRpbWluZy5zZXRUaW1lb3V0KHJlZ2lzdGVyTGlzdGVuZXIsIGRlZmVyVGltZU1zKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setSocketTimeout: () => (/* binding */ setSocketTimeout)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nconst setSocketTimeout = (request, reject, timeoutInMs = 0) => {\n    const registerTimeout = (offset) => {\n        request.setTimeout(timeoutInMs - offset, () => {\n            request.destroy();\n            reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n        });\n    };\n    if (0 < timeoutInMs && timeoutInMs < 6000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3NldC1zb2NrZXQtdGltZW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrQztBQUNsQztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLGFBQWEsUUFBUSxzQkFBc0I7QUFDcEgsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJDQUFNO0FBQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4xL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvc2V0LXNvY2tldC10aW1lb3V0LmpzPzNlMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5jb25zdCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FID0gMzAwMDtcbmV4cG9ydCBjb25zdCBzZXRTb2NrZXRUaW1lb3V0ID0gKHJlcXVlc3QsIHJlamVjdCwgdGltZW91dEluTXMgPSAwKSA9PiB7XG4gICAgY29uc3QgcmVnaXN0ZXJUaW1lb3V0ID0gKG9mZnNldCkgPT4ge1xuICAgICAgICByZXF1ZXN0LnNldFRpbWVvdXQodGltZW91dEluTXMgLSBvZmZzZXQsICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24obmV3IEVycm9yKGBDb25uZWN0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXRJbk1zfSBtc2ApLCB7IG5hbWU6IFwiVGltZW91dEVycm9yXCIgfSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGlmICgwIDwgdGltZW91dEluTXMgJiYgdGltZW91dEluTXMgPCA2MDAwKSB7XG4gICAgICAgIHJlZ2lzdGVyVGltZW91dCgwKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChyZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCB0aW1lb3V0SW5NcyA9PT0gMCA/IDAgOiBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FKSwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Collector: () => (/* binding */ Collector)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n\nclass Collector extends stream__WEBPACK_IMPORTED_MODULE_0__.Writable {\n    constructor() {\n        super(...arguments);\n        this.bufferedBytes = [];\n    }\n    _write(chunk, encoding, callback) {\n        this.bufferedBytes.push(chunk);\n        callback();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3N0cmVhbS1jb2xsZWN0b3IvY29sbGVjdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrQztBQUMzQix3QkFBd0IsNENBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4xL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvc3RyZWFtLWNvbGxlY3Rvci9jb2xsZWN0b3IuanM/Mzg5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXcml0YWJsZSB9IGZyb20gXCJzdHJlYW1cIjtcbmV4cG9ydCBjbGFzcyBDb2xsZWN0b3IgZXh0ZW5kcyBXcml0YWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuYnVmZmVyZWRCeXRlcyA9IFtdO1xuICAgIH1cbiAgICBfd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmJ1ZmZlcmVkQnl0ZXMucHVzaChjaHVuayk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   streamCollector: () => (/* binding */ streamCollector)\n/* harmony export */ });\n/* harmony import */ var _collector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collector */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js\");\n\nconst streamCollector = (stream) => {\n    if (isReadableStreamInstance(stream)) {\n        return collectReadableStream(stream);\n    }\n    return new Promise((resolve, reject) => {\n        const collector = new _collector__WEBPACK_IMPORTED_MODULE_0__.Collector();\n        stream.pipe(collector);\n        stream.on(\"error\", (err) => {\n            collector.end();\n            reject(err);\n        });\n        collector.on(\"error\", reject);\n        collector.on(\"finish\", function () {\n            const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));\n            resolve(bytes);\n        });\n    });\n};\nconst isReadableStreamInstance = (stream) => typeof ReadableStream === \"function\" && stream instanceof ReadableStream;\nasync function collectReadableStream(stream) {\n    const chunks = [];\n    const reader = stream.getReader();\n    let isDone = false;\n    let length = 0;\n    while (!isDone) {\n        const { done, value } = await reader.read();\n        if (value) {\n            chunks.push(value);\n            length += value.length;\n        }\n        isDone = done;\n    }\n    const collected = new Uint8Array(length);\n    let offset = 0;\n    for (const chunk of chunks) {\n        collected.set(chunk, offset);\n        offset += chunk.length;\n    }\n    return collected;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3N0cmVhbS1jb2xsZWN0b3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDakM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpREFBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjEvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zdHJlYW0tY29sbGVjdG9yL2luZGV4LmpzPzZhNWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sbGVjdG9yIH0gZnJvbSBcIi4vY29sbGVjdG9yXCI7XG5leHBvcnQgY29uc3Qgc3RyZWFtQ29sbGVjdG9yID0gKHN0cmVhbSkgPT4ge1xuICAgIGlmIChpc1JlYWRhYmxlU3RyZWFtSW5zdGFuY2Uoc3RyZWFtKSkge1xuICAgICAgICByZXR1cm4gY29sbGVjdFJlYWRhYmxlU3RyZWFtKHN0cmVhbSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbGxlY3RvciA9IG5ldyBDb2xsZWN0b3IoKTtcbiAgICAgICAgc3RyZWFtLnBpcGUoY29sbGVjdG9yKTtcbiAgICAgICAgc3RyZWFtLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgICAgICAgY29sbGVjdG9yLmVuZCgpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICBjb2xsZWN0b3Iub24oXCJlcnJvclwiLCByZWplY3QpO1xuICAgICAgICBjb2xsZWN0b3Iub24oXCJmaW5pc2hcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShCdWZmZXIuY29uY2F0KHRoaXMuYnVmZmVyZWRCeXRlcykpO1xuICAgICAgICAgICAgcmVzb2x2ZShieXRlcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbmNvbnN0IGlzUmVhZGFibGVTdHJlYW1JbnN0YW5jZSA9IChzdHJlYW0pID0+IHR5cGVvZiBSZWFkYWJsZVN0cmVhbSA9PT0gXCJmdW5jdGlvblwiICYmIHN0cmVhbSBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtO1xuYXN5bmMgZnVuY3Rpb24gY29sbGVjdFJlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICBsZXQgaXNEb25lID0gZmFsc2U7XG4gICAgbGV0IGxlbmd0aCA9IDA7XG4gICAgd2hpbGUgKCFpc0RvbmUpIHtcbiAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBjaHVua3MucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICBsZW5ndGggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlzRG9uZSA9IGRvbmU7XG4gICAgfVxuICAgIGNvbnN0IGNvbGxlY3RlZCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgICAgY29sbGVjdGVkLnNldChjaHVuaywgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIGNvbGxlY3RlZDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   timing: () => (/* binding */ timing)\n/* harmony export */ });\nconst timing = {\n    setTimeout: setTimeout,\n    clearTimeout: clearTimeout,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3RpbWluZy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjEvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy90aW1pbmcuanM/ZTE1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdGltaW5nID0ge1xuICAgIHNldFRpbWVvdXQ6IHNldFRpbWVvdXQsXG4gICAgY2xlYXJUaW1lb3V0OiBjbGVhclRpbWVvdXQsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   writeRequestBody: () => (/* binding */ writeRequestBody)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timing */ \"(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\n\nconst MIN_WAIT_TIME = 1000;\nasync function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {\n    const headers = request.headers ?? {};\n    const expect = headers[\"Expect\"] || headers[\"expect\"];\n    let timeoutId = -1;\n    let hasError = false;\n    if (expect === \"100-continue\") {\n        await Promise.race([\n            new Promise((resolve) => {\n                timeoutId = Number(_timing__WEBPACK_IMPORTED_MODULE_1__.timing.setTimeout(resolve, Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));\n            }),\n            new Promise((resolve) => {\n                httpRequest.on(\"continue\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);\n                    resolve();\n                });\n                httpRequest.on(\"error\", () => {\n                    hasError = true;\n                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);\n                    resolve();\n                });\n            }),\n        ]);\n    }\n    if (!hasError) {\n        writeBody(httpRequest, request.body);\n    }\n}\nfunction writeBody(httpRequest, body) {\n    if (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable) {\n        body.pipe(httpRequest);\n        return;\n    }\n    if (body) {\n        if (Buffer.isBuffer(body) || typeof body === \"string\") {\n            httpRequest.end(body);\n            return;\n        }\n        const uint8 = body;\n        if (typeof uint8 === \"object\" &&\n            uint8.buffer &&\n            typeof uint8.byteOffset === \"number\" &&\n            typeof uint8.byteLength === \"number\") {\n            httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));\n            return;\n        }\n        httpRequest.end(Buffer.from(body));\n        return;\n    }\n    httpRequest.end();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3dyaXRlLXJlcXVlc3QtYm9keS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtDO0FBQ0E7QUFDbEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDJDQUFNO0FBQ3pDLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLDJDQUFNO0FBQzFCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQU07QUFDMUI7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRDQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMS9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3dyaXRlLXJlcXVlc3QtYm9keS5qcz8zNTg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5jb25zdCBNSU5fV0FJVF9USU1FID0gMTAwMDtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZVJlcXVlc3RCb2R5KGh0dHBSZXF1ZXN0LCByZXF1ZXN0LCBtYXhDb250aW51ZVRpbWVvdXRNcyA9IE1JTl9XQUlUX1RJTUUpIHtcbiAgICBjb25zdCBoZWFkZXJzID0gcmVxdWVzdC5oZWFkZXJzID8/IHt9O1xuICAgIGNvbnN0IGV4cGVjdCA9IGhlYWRlcnNbXCJFeHBlY3RcIl0gfHwgaGVhZGVyc1tcImV4cGVjdFwiXTtcbiAgICBsZXQgdGltZW91dElkID0gLTE7XG4gICAgbGV0IGhhc0Vycm9yID0gZmFsc2U7XG4gICAgaWYgKGV4cGVjdCA9PT0gXCIxMDAtY29udGludWVcIikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBOdW1iZXIodGltaW5nLnNldFRpbWVvdXQocmVzb2x2ZSwgTWF0aC5tYXgoTUlOX1dBSVRfVElNRSwgbWF4Q29udGludWVUaW1lb3V0TXMpKSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJjb250aW51ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGh0dHBSZXF1ZXN0Lm9uKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoIWhhc0Vycm9yKSB7XG4gICAgICAgIHdyaXRlQm9keShodHRwUmVxdWVzdCwgcmVxdWVzdC5ib2R5KTtcbiAgICB9XG59XG5mdW5jdGlvbiB3cml0ZUJvZHkoaHR0cFJlcXVlc3QsIGJvZHkpIHtcbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIFJlYWRhYmxlKSB7XG4gICAgICAgIGJvZHkucGlwZShodHRwUmVxdWVzdCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGJvZHkpIHtcbiAgICAgICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSB8fCB0eXBlb2YgYm9keSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaHR0cFJlcXVlc3QuZW5kKGJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVpbnQ4ID0gYm9keTtcbiAgICAgICAgaWYgKHR5cGVvZiB1aW50OCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgdWludDguYnVmZmVyICYmXG4gICAgICAgICAgICB0eXBlb2YgdWludDguYnl0ZU9mZnNldCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIHVpbnQ4LmJ5dGVMZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0LmVuZChCdWZmZXIuZnJvbSh1aW50OC5idWZmZXIsIHVpbnQ4LmJ5dGVPZmZzZXQsIHVpbnQ4LmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBodHRwUmVxdWVzdC5lbmQoQnVmZmVyLmZyb20oYm9keSkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGh0dHBSZXF1ZXN0LmVuZCgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@smithy+node-http-handler@3.3.1/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\n");

/***/ })

};
;