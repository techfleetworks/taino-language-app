"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq";
exports.ids = ["vendor-chunks/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/email.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/email.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   payloadCloudEmail: () => (/* binding */ payloadCloudEmail)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_email_nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/email-nodemailer */ \"(rsc)/./node_modules/.pnpm/@payloadcms+email-nodemailer@3.0.0_payload@3.0.0_graphql@16.9.0_monaco-editor@0.52.0_react-do_lydvdiaq4owfq5ihdbttq2xhhy/node_modules/@payloadcms/email-nodemailer/dist/index.js\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/.pnpm/nodemailer@6.9.10/node_modules/nodemailer/lib/nodemailer.js\");\n\n\nconst payloadCloudEmail = async (args)=>{\n    if (process.env.PAYLOAD_CLOUD !== 'true' || !args) {\n        return undefined;\n    }\n    if (!args.apiKey) {\n        throw new Error('apiKey must be provided to use Payload Cloud Email');\n    }\n    if (!args.defaultDomain) {\n        throw new Error('defaultDomain must be provided to use Payload Cloud Email');\n    }\n    // Check if already has email configuration\n    if (args.config.email) {\n        // eslint-disable-next-line no-console\n        console.log('Payload Cloud Email is enabled but email configuration is already provided in Payload config. If this is intentional, set `email: false` in the Payload Cloud plugin options.');\n        return args.config.email;\n    }\n    const { apiKey, defaultDomain, skipVerify } = args;\n    const customDomainEnvs = Object.keys(process.env).filter((e)=>e.startsWith('PAYLOAD_CLOUD_EMAIL_DOMAIN_') && !e.endsWith('API_KEY'));\n    const customDomains = customDomainEnvs.map((e)=>process.env[e]).filter(Boolean);\n    if (customDomains.length) {\n        // eslint-disable-next-line no-console\n        console.log(`Configuring Payload Cloud Email for ${[\n            defaultDomain,\n            ...customDomains || []\n        ].join(', ')}`);\n    }\n    const defaultFromName = args.defaultFromName || 'Payload CMS';\n    const defaultFromAddress = args.defaultFromAddress || `cms@${customDomains.length ? customDomains[0] : defaultDomain}`;\n    const emailAdapter = await (0,_payloadcms_email_nodemailer__WEBPACK_IMPORTED_MODULE_0__.nodemailerAdapter)({\n        defaultFromAddress,\n        defaultFromName,\n        skipVerify,\n        transport: nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n            auth: {\n                pass: apiKey,\n                user: 'resend'\n            },\n            host: 'smtp.resend.com',\n            port: 465,\n            secure: true\n        })\n    });\n    return emailAdapter;\n};\n\n//# sourceMappingURL=email.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvZW1haWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlFO0FBQzdCO0FBQzdCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQ0FBb0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUVBQWlFLHdEQUF3RDtBQUN6SCwrQkFBK0IsK0VBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBMEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvZW1haWwuanM/NGNiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub2RlbWFpbGVyQWRhcHRlciB9IGZyb20gJ0BwYXlsb2FkY21zL2VtYWlsLW5vZGVtYWlsZXInO1xuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG5leHBvcnQgY29uc3QgcGF5bG9hZENsb3VkRW1haWwgPSBhc3luYyAoYXJncyk9PntcbiAgICBpZiAocHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRCAhPT0gJ3RydWUnIHx8ICFhcmdzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghYXJncy5hcGlLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhcGlLZXkgbXVzdCBiZSBwcm92aWRlZCB0byB1c2UgUGF5bG9hZCBDbG91ZCBFbWFpbCcpO1xuICAgIH1cbiAgICBpZiAoIWFyZ3MuZGVmYXVsdERvbWFpbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlZmF1bHREb21haW4gbXVzdCBiZSBwcm92aWRlZCB0byB1c2UgUGF5bG9hZCBDbG91ZCBFbWFpbCcpO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiBhbHJlYWR5IGhhcyBlbWFpbCBjb25maWd1cmF0aW9uXG4gICAgaWYgKGFyZ3MuY29uZmlnLmVtYWlsKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKCdQYXlsb2FkIENsb3VkIEVtYWlsIGlzIGVuYWJsZWQgYnV0IGVtYWlsIGNvbmZpZ3VyYXRpb24gaXMgYWxyZWFkeSBwcm92aWRlZCBpbiBQYXlsb2FkIGNvbmZpZy4gSWYgdGhpcyBpcyBpbnRlbnRpb25hbCwgc2V0IGBlbWFpbDogZmFsc2VgIGluIHRoZSBQYXlsb2FkIENsb3VkIHBsdWdpbiBvcHRpb25zLicpO1xuICAgICAgICByZXR1cm4gYXJncy5jb25maWcuZW1haWw7XG4gICAgfVxuICAgIGNvbnN0IHsgYXBpS2V5LCBkZWZhdWx0RG9tYWluLCBza2lwVmVyaWZ5IH0gPSBhcmdzO1xuICAgIGNvbnN0IGN1c3RvbURvbWFpbkVudnMgPSBPYmplY3Qua2V5cyhwcm9jZXNzLmVudikuZmlsdGVyKChlKT0+ZS5zdGFydHNXaXRoKCdQQVlMT0FEX0NMT1VEX0VNQUlMX0RPTUFJTl8nKSAmJiAhZS5lbmRzV2l0aCgnQVBJX0tFWScpKTtcbiAgICBjb25zdCBjdXN0b21Eb21haW5zID0gY3VzdG9tRG9tYWluRW52cy5tYXAoKGUpPT5wcm9jZXNzLmVudltlXSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChjdXN0b21Eb21haW5zLmxlbmd0aCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZyhgQ29uZmlndXJpbmcgUGF5bG9hZCBDbG91ZCBFbWFpbCBmb3IgJHtbXG4gICAgICAgICAgICBkZWZhdWx0RG9tYWluLFxuICAgICAgICAgICAgLi4uY3VzdG9tRG9tYWlucyB8fCBbXVxuICAgICAgICBdLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRGcm9tTmFtZSA9IGFyZ3MuZGVmYXVsdEZyb21OYW1lIHx8ICdQYXlsb2FkIENNUyc7XG4gICAgY29uc3QgZGVmYXVsdEZyb21BZGRyZXNzID0gYXJncy5kZWZhdWx0RnJvbUFkZHJlc3MgfHwgYGNtc0Ake2N1c3RvbURvbWFpbnMubGVuZ3RoID8gY3VzdG9tRG9tYWluc1swXSA6IGRlZmF1bHREb21haW59YDtcbiAgICBjb25zdCBlbWFpbEFkYXB0ZXIgPSBhd2FpdCBub2RlbWFpbGVyQWRhcHRlcih7XG4gICAgICAgIGRlZmF1bHRGcm9tQWRkcmVzcyxcbiAgICAgICAgZGVmYXVsdEZyb21OYW1lLFxuICAgICAgICBza2lwVmVyaWZ5LFxuICAgICAgICB0cmFuc3BvcnQ6IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgICAgICBwYXNzOiBhcGlLZXksXG4gICAgICAgICAgICAgICAgdXNlcjogJ3Jlc2VuZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBob3N0OiAnc210cC5yZXNlbmQuY29tJyxcbiAgICAgICAgICAgIHBvcnQ6IDQ2NSxcbiAgICAgICAgICAgIHNlY3VyZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIHJldHVybiBlbWFpbEFkYXB0ZXI7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWFpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/email.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAfterDeleteHook: () => (/* binding */ getAfterDeleteHook)\n/* harmony export */ });\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\nconst getAfterDeleteHook = ({ collection })=>{\n    return async ({ doc, req })=>{\n        try {\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__.getStorageClient)();\n            const filesToDelete = [\n                doc.filename,\n                ...Object.values(doc?.sizes || []).map((resizedFileData)=>resizedFileData?.filename)\n            ];\n            const promises = filesToDelete.map(async (filename)=>{\n                await storageClient.deleteObject({\n                    Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                    Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__.createKey)({\n                        collection: collection.slug,\n                        filename,\n                        identityID\n                    })\n                });\n            });\n            await Promise.all(promises);\n        } catch (err) {\n            req.payload.logger.error(`There was an error while deleting files corresponding to the ${collection.labels?.singular} with ID ${doc.id}:`);\n            req.payload.logger.error(err);\n        }\n        return doc;\n    };\n};\n\n//# sourceMappingURL=afterDelete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYWZ0ZXJEZWxldGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ2M7QUFDN0QsOEJBQThCLFlBQVk7QUFDakQsb0JBQW9CLFVBQVU7QUFDOUI7QUFDQSxvQkFBb0IsNEJBQTRCLFFBQVEsZ0ZBQWdCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtFQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsVUFBVTtBQUNWLHFHQUFxRyw2QkFBNkIsVUFBVSxPQUFPO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4wLjBfQGF3cy1zZGsrY2xpZW50LXNzby1vaWRjQDMuNjkzLjBfQGF3cy1zZGsrY2xpZW50LXN0c0AzLjY5My4wX182Nmt6YTUyZ29tdW0yM2FxZHFvbWdiN2dwcS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L2hvb2tzL2FmdGVyRGVsZXRlLmpzPzQyNjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlS2V5IH0gZnJvbSAnLi4vdXRpbGl0aWVzL2NyZWF0ZUtleS5qcyc7XG5pbXBvcnQgeyBnZXRTdG9yYWdlQ2xpZW50IH0gZnJvbSAnLi4vdXRpbGl0aWVzL2dldFN0b3JhZ2VDbGllbnQuanMnO1xuZXhwb3J0IGNvbnN0IGdldEFmdGVyRGVsZXRlSG9vayA9ICh7IGNvbGxlY3Rpb24gfSk9PntcbiAgICByZXR1cm4gYXN5bmMgKHsgZG9jLCByZXEgfSk9PntcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpdHlJRCwgc3RvcmFnZUNsaWVudCB9ID0gYXdhaXQgZ2V0U3RvcmFnZUNsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZXNUb0RlbGV0ZSA9IFtcbiAgICAgICAgICAgICAgICBkb2MuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LnZhbHVlcyhkb2M/LnNpemVzIHx8IFtdKS5tYXAoKHJlc2l6ZWRGaWxlRGF0YSk9PnJlc2l6ZWRGaWxlRGF0YT8uZmlsZW5hbWUpXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBmaWxlc1RvRGVsZXRlLm1hcChhc3luYyAoZmlsZW5hbWUpPT57XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RvcmFnZUNsaWVudC5kZWxldGVPYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQlVDS0VULFxuICAgICAgICAgICAgICAgICAgICBLZXk6IGNyZWF0ZUtleSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5SURcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5lcnJvcihgVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGRlbGV0aW5nIGZpbGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlICR7Y29sbGVjdGlvbi5sYWJlbHM/LnNpbmd1bGFyfSB3aXRoIElEICR7ZG9jLmlkfTpgKTtcbiAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFmdGVyRGVsZXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js":
/*!***********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js ***!
  \***********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBeforeChangeHook: () => (/* binding */ getBeforeChangeHook)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/lib-storage */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+lib-storage@3.693.0_@aws-sdk+client-s3@3.693.0/node_modules/@aws-sdk/lib-storage/dist-es/index.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getIncomingFiles_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/getIncomingFiles.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n\n\n\nconst MB = 1024 * 1024;\nconst getBeforeChangeHook = ({ collection })=>async ({ data, req })=>{\n        try {\n            const files = (0,_utilities_getIncomingFiles_js__WEBPACK_IMPORTED_MODULE_3__.getIncomingFiles)({\n                data,\n                req\n            });\n            req.payload.logger.debug({\n                msg: `Preparing to upload ${files.length} files`\n            });\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_4__.getStorageClient)();\n            const promises = files.map(async (file)=>{\n                const fileKey = file.filename;\n                req.payload.logger.debug({\n                    fileKey,\n                    msg: `File buffer length: ${file.buffer.length / MB}MB`,\n                    tempFilePath: file.tempFilePath ?? 'undefined'\n                });\n                const fileBufferOrStream = file.tempFilePath ? fs__WEBPACK_IMPORTED_MODULE_1__.createReadStream(file.tempFilePath) : file.buffer;\n                if (file.buffer.length > 0) {\n                    req.payload.logger.debug({\n                        fileKey,\n                        msg: `Uploading ${fileKey} from buffer. Size: ${file.buffer.length / MB}MB`\n                    });\n                    await storageClient.putObject({\n                        Body: fileBufferOrStream,\n                        Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                        ContentType: file.mimeType,\n                        Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__.createKey)({\n                            collection: collection.slug,\n                            filename: fileKey,\n                            identityID\n                        })\n                    });\n                }\n                // This will buffer at max 4 * 5MB = 20MB. Default queueSize is 4 and default partSize is 5MB.\n                const parallelUploadS3 = new _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_0__.Upload({\n                    client: storageClient,\n                    params: {\n                        Body: fileBufferOrStream,\n                        Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                        ContentType: file.mimeType,\n                        Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__.createKey)({\n                            collection: collection.slug,\n                            filename: fileKey,\n                            identityID\n                        })\n                    }\n                });\n                parallelUploadS3.on('httpUploadProgress', (progress)=>{\n                    if (progress.total) {\n                        req.payload.logger.debug({\n                            fileKey,\n                            msg: `Uploaded part ${progress.part} - ${(progress.loaded || 0) / MB}MB out of ${(progress.total || 0) / MB}MB`\n                        });\n                    }\n                });\n                await parallelUploadS3.done();\n            });\n            await Promise.all(promises);\n        } catch (err) {\n            req.payload.logger.error(`There was an error while uploading files corresponding to the collection ${collection.slug} with filename ${data.filename}:`);\n            req.payload.logger.error(err);\n        }\n        return data;\n    };\n\n//# sourceMappingURL=beforeChange.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYmVmb3JlQ2hhbmdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QztBQUMxQjtBQUNrQztBQUNjO0FBQ0E7QUFDcEU7QUFDTywrQkFBK0IsWUFBWSxZQUFZLFdBQVc7QUFDekU7QUFDQSwwQkFBMEIsZ0ZBQWdCO0FBQzFDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw0Q0FBNEMsY0FBYztBQUMxRCxhQUFhO0FBQ2Isb0JBQW9CLDRCQUE0QixRQUFRLGdGQUFnQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3QkFBd0I7QUFDeEU7QUFDQSxpQkFBaUI7QUFDakIsK0RBQStELGdEQUFtQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsU0FBUyxxQkFBcUIsd0JBQXdCO0FBQ2hHLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRUFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw2Q0FBNkMsd0RBQU07QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRUFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZUFBZSxJQUFJLDRCQUE0QixZQUFZLDJCQUEyQjtBQUN4SSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxVQUFVO0FBQ1YsaUhBQWlILGlCQUFpQixnQkFBZ0IsY0FBYztBQUNoSztBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYmVmb3JlQ2hhbmdlLmpzPzY3NzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXBsb2FkIH0gZnJvbSAnQGF3cy1zZGsvbGliLXN0b3JhZ2UnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IGNyZWF0ZUtleSB9IGZyb20gJy4uL3V0aWxpdGllcy9jcmVhdGVLZXkuanMnO1xuaW1wb3J0IHsgZ2V0SW5jb21pbmdGaWxlcyB9IGZyb20gJy4uL3V0aWxpdGllcy9nZXRJbmNvbWluZ0ZpbGVzLmpzJztcbmltcG9ydCB7IGdldFN0b3JhZ2VDbGllbnQgfSBmcm9tICcuLi91dGlsaXRpZXMvZ2V0U3RvcmFnZUNsaWVudC5qcyc7XG5jb25zdCBNQiA9IDEwMjQgKiAxMDI0O1xuZXhwb3J0IGNvbnN0IGdldEJlZm9yZUNoYW5nZUhvb2sgPSAoeyBjb2xsZWN0aW9uIH0pPT5hc3luYyAoeyBkYXRhLCByZXEgfSk9PntcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZ2V0SW5jb21pbmdGaWxlcyh7XG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgICAgICAgICBtc2c6IGBQcmVwYXJpbmcgdG8gdXBsb2FkICR7ZmlsZXMubGVuZ3RofSBmaWxlc2BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgeyBpZGVudGl0eUlELCBzdG9yYWdlQ2xpZW50IH0gPSBhd2FpdCBnZXRTdG9yYWdlQ2xpZW50KCk7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IGZpbGVzLm1hcChhc3luYyAoZmlsZSk9PntcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlS2V5ID0gZmlsZS5maWxlbmFtZTtcbiAgICAgICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgICAgICAgICBmaWxlS2V5LFxuICAgICAgICAgICAgICAgICAgICBtc2c6IGBGaWxlIGJ1ZmZlciBsZW5ndGg6ICR7ZmlsZS5idWZmZXIubGVuZ3RoIC8gTUJ9TUJgLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wRmlsZVBhdGg6IGZpbGUudGVtcEZpbGVQYXRoID8/ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUJ1ZmZlck9yU3RyZWFtID0gZmlsZS50ZW1wRmlsZVBhdGggPyBmcy5jcmVhdGVSZWFkU3RyZWFtKGZpbGUudGVtcEZpbGVQYXRoKSA6IGZpbGUuYnVmZmVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBgVXBsb2FkaW5nICR7ZmlsZUtleX0gZnJvbSBidWZmZXIuIFNpemU6ICR7ZmlsZS5idWZmZXIubGVuZ3RoIC8gTUJ9TUJgXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdG9yYWdlQ2xpZW50LnB1dE9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBCb2R5OiBmaWxlQnVmZmVyT3JTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQlVDS0VULFxuICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudFR5cGU6IGZpbGUubWltZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBLZXk6IGNyZWF0ZUtleSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5SURcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYnVmZmVyIGF0IG1heCA0ICogNU1CID0gMjBNQi4gRGVmYXVsdCBxdWV1ZVNpemUgaXMgNCBhbmQgZGVmYXVsdCBwYXJ0U2l6ZSBpcyA1TUIuXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYWxsZWxVcGxvYWRTMyA9IG5ldyBVcGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6IHN0b3JhZ2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQm9keTogZmlsZUJ1ZmZlck9yU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0JVQ0tFVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnRUeXBlOiBmaWxlLm1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5OiBjcmVhdGVLZXkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24uc2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eUlEXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGFyYWxsZWxVcGxvYWRTMy5vbignaHR0cFVwbG9hZFByb2dyZXNzJywgKHByb2dyZXNzKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MudG90YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGBVcGxvYWRlZCBwYXJ0ICR7cHJvZ3Jlc3MucGFydH0gLSAkeyhwcm9ncmVzcy5sb2FkZWQgfHwgMCkgLyBNQn1NQiBvdXQgb2YgJHsocHJvZ3Jlc3MudG90YWwgfHwgMCkgLyBNQn1NQmBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGFyYWxsZWxVcGxvYWRTMy5kb25lKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZXJyb3IoYFRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSB1cGxvYWRpbmcgZmlsZXMgY29ycmVzcG9uZGluZyB0byB0aGUgY29sbGVjdGlvbiAke2NvbGxlY3Rpb24uc2x1Z30gd2l0aCBmaWxlbmFtZSAke2RhdGEuZmlsZW5hbWV9OmApO1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmVmb3JlQ2hhbmdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCacheUploadsAfterChangeHook: () => (/* binding */ getCacheUploadsAfterChangeHook),\n/* harmony export */   getCacheUploadsAfterDeleteHook: () => (/* binding */ getCacheUploadsAfterDeleteHook)\n/* harmony export */ });\nconst getCacheUploadsAfterChangeHook = ({ endpoint })=>({ doc, operation, req })=>{\n        if (!req || !process.env.PAYLOAD_CLOUD_CACHE_KEY) {\n            return doc;\n        }\n        // WARNING:\n        // TODO: Test this for 3.0\n        const { payloadAPI } = req;\n        if (payloadAPI !== 'local') {\n            if (operation === 'update') {\n                // Unawaited promise\n                void purge({\n                    doc,\n                    endpoint,\n                    operation,\n                    req\n                });\n            }\n        }\n        return doc;\n    };\nconst getCacheUploadsAfterDeleteHook = ({ endpoint })=>({ doc, req })=>{\n        if (!req || !process.env.PAYLOAD_CLOUD_CACHE_KEY) {\n            return doc;\n        }\n        const { payloadAPI } = req;\n        // WARNING:\n        // TODO: Test this for 3.0\n        if (payloadAPI !== 'local') {\n            // Unawaited promise\n            void purge({\n                doc,\n                endpoint,\n                operation: 'delete',\n                req\n            });\n        }\n        return doc;\n    };\nasync function purge({ doc, endpoint, operation, req }) {\n    const filePath = doc.url;\n    if (!filePath) {\n        req.payload.logger.error({\n            msg: 'No url found on doc',\n            project: {\n                id: process.env.PAYLOAD_CLOUD_PROJECT_ID\n            }\n        });\n        return;\n    }\n    const body = {\n        cacheKey: process.env.PAYLOAD_CLOUD_CACHE_KEY,\n        filepath: doc.url,\n        projectID: process.env.PAYLOAD_CLOUD_PROJECT_ID\n    };\n    req.payload.logger.debug({\n        filepath: doc.url,\n        msg: 'Attempting to purge cache',\n        operation,\n        project: {\n            id: process.env.PAYLOAD_CLOUD_PROJECT_ID\n        }\n    });\n    try {\n        const purgeRes = await fetch(`${endpoint}/api/purge-cache`, {\n            body: JSON.stringify({\n                ...body\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            method: 'POST'\n        });\n        req.payload.logger.debug({\n            msg: 'Purge cache result',\n            operation,\n            statusCode: purgeRes.status\n        });\n    } catch (err) {\n        req.payload.logger.error({\n            body,\n            err,\n            msg: '/purge-cache call failed'\n        });\n    }\n}\n\n//# sourceMappingURL=uploadCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvdXBsb2FkQ2FjaGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTywwQ0FBMEMsVUFBVSxNQUFNLHFCQUFxQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNPLDBDQUEwQyxVQUFVLE1BQU0sVUFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtCQUErQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esd0NBQXdDLFNBQVM7QUFDakQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMC4wX0Bhd3Mtc2RrK2NsaWVudC1zc28tb2lkY0AzLjY5My4wX0Bhd3Mtc2RrK2NsaWVudC1zdHNAMy42OTMuMF9fNjZremE1MmdvbXVtMjNhcWRxb21nYjdncHEvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC9ob29rcy91cGxvYWRDYWNoZS5qcz80MTYzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBnZXRDYWNoZVVwbG9hZHNBZnRlckNoYW5nZUhvb2sgPSAoeyBlbmRwb2ludCB9KT0+KHsgZG9jLCBvcGVyYXRpb24sIHJlcSB9KT0+e1xuICAgICAgICBpZiAoIXJlcSB8fCAhcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DQUNIRV9LRVkpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV0FSTklORzpcbiAgICAgICAgLy8gVE9ETzogVGVzdCB0aGlzIGZvciAzLjBcbiAgICAgICAgY29uc3QgeyBwYXlsb2FkQVBJIH0gPSByZXE7XG4gICAgICAgIGlmIChwYXlsb2FkQVBJICE9PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgICAgICAgICAgIC8vIFVuYXdhaXRlZCBwcm9taXNlXG4gICAgICAgICAgICAgICAgdm9pZCBwdXJnZSh7XG4gICAgICAgICAgICAgICAgICAgIGRvYyxcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmVxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9O1xuZXhwb3J0IGNvbnN0IGdldENhY2hlVXBsb2Fkc0FmdGVyRGVsZXRlSG9vayA9ICh7IGVuZHBvaW50IH0pPT4oeyBkb2MsIHJlcSB9KT0+e1xuICAgICAgICBpZiAoIXJlcSB8fCAhcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DQUNIRV9LRVkpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBwYXlsb2FkQVBJIH0gPSByZXE7XG4gICAgICAgIC8vIFdBUk5JTkc6XG4gICAgICAgIC8vIFRPRE86IFRlc3QgdGhpcyBmb3IgMy4wXG4gICAgICAgIGlmIChwYXlsb2FkQVBJICE9PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICAvLyBVbmF3YWl0ZWQgcHJvbWlzZVxuICAgICAgICAgICAgdm9pZCBwdXJnZSh7XG4gICAgICAgICAgICAgICAgZG9jLFxuICAgICAgICAgICAgICAgIGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgcmVxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jO1xuICAgIH07XG5hc3luYyBmdW5jdGlvbiBwdXJnZSh7IGRvYywgZW5kcG9pbnQsIG9wZXJhdGlvbiwgcmVxIH0pIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGRvYy51cmw7XG4gICAgaWYgKCFmaWxlUGF0aCkge1xuICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgbXNnOiAnTm8gdXJsIGZvdW5kIG9uIGRvYycsXG4gICAgICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfUFJPSkVDVF9JRFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICBjYWNoZUtleTogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DQUNIRV9LRVksXG4gICAgICAgIGZpbGVwYXRoOiBkb2MudXJsLFxuICAgICAgICBwcm9qZWN0SUQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfUFJPSkVDVF9JRFxuICAgIH07XG4gICAgcmVxLnBheWxvYWQubG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgZmlsZXBhdGg6IGRvYy51cmwsXG4gICAgICAgIG1zZzogJ0F0dGVtcHRpbmcgdG8gcHVyZ2UgY2FjaGUnLFxuICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIHByb2plY3Q6IHtcbiAgICAgICAgICAgIGlkOiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX1BST0pFQ1RfSURcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHB1cmdlUmVzID0gYXdhaXQgZmV0Y2goYCR7ZW5kcG9pbnR9L2FwaS9wdXJnZS1jYWNoZWAsIHtcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAuLi5ib2R5XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCdcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICBtc2c6ICdQdXJnZSBjYWNoZSByZXN1bHQnLFxuICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogcHVyZ2VSZXMuc3RhdHVzXG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgIG1zZzogJy9wdXJnZS1jYWNoZSBjYWxsIGZhaWxlZCdcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGxvYWRDYWNoZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/index.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/index.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKey: () => (/* reexport safe */ _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_1__.createKey),\n/* harmony export */   getStorageClient: () => (/* reexport safe */ _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_2__.getStorageClient),\n/* harmony export */   payloadCloudPlugin: () => (/* reexport safe */ _plugin_js__WEBPACK_IMPORTED_MODULE_0__.payloadCloudPlugin)\n/* harmony export */ });\n/* harmony import */ var _plugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/plugin.js\");\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlEO0FBQ0k7QUFDYzs7QUFFbkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4wLjBfQGF3cy1zZGsrY2xpZW50LXNzby1vaWRjQDMuNjkzLjBfQGF3cy1zZGsrY2xpZW50LXN0c0AzLjY5My4wX182Nmt6YTUyZ29tdW0yM2FxZHFvbWdiN2dwcS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L2luZGV4LmpzP2I5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgcGF5bG9hZENsb3VkUGx1Z2luIH0gZnJvbSAnLi9wbHVnaW4uanMnO1xuZXhwb3J0IHsgY3JlYXRlS2V5IH0gZnJvbSAnLi91dGlsaXRpZXMvY3JlYXRlS2V5LmpzJztcbmV4cG9ydCB7IGdldFN0b3JhZ2VDbGllbnQgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTdG9yYWdlQ2xpZW50LmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/plugin.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/plugin.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   payloadCloudPlugin: () => (/* binding */ payloadCloudPlugin)\n/* harmony export */ });\n/* harmony import */ var _email_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./email.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/email.js\");\n/* harmony import */ var _hooks_afterDelete_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hooks/afterDelete.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js\");\n/* harmony import */ var _hooks_beforeChange_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks/beforeChange.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js\");\n/* harmony import */ var _hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hooks/uploadCache.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js\");\n/* harmony import */ var _staticHandler_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./staticHandler.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js\");\n\n\n\n\n\nconst payloadCloudPlugin = (pluginOptions)=>async (incomingConfig)=>{\n        let config = {\n            ...incomingConfig\n        };\n        if (process.env.PAYLOAD_CLOUD !== 'true') {\n            return config;\n        }\n        const cachingEnabled = pluginOptions?.uploadCaching !== false && !!process.env.PAYLOAD_CLOUD_CACHE_KEY;\n        const apiEndpoint = pluginOptions?.endpoint || 'https://cloud-api.payloadcms.com';\n        // Configure cloud storage\n        if (pluginOptions?.storage !== false) {\n            config = {\n                ...config,\n                collections: (config.collections || []).map((collection)=>{\n                    if (collection.upload) {\n                        return {\n                            ...collection,\n                            hooks: {\n                                ...collection.hooks || {},\n                                afterChange: [\n                                    ...collection.hooks?.afterChange || [],\n                                    ...cachingEnabled ? [\n                                        (0,_hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__.getCacheUploadsAfterChangeHook)({\n                                            endpoint: apiEndpoint\n                                        })\n                                    ] : []\n                                ],\n                                afterDelete: [\n                                    ...collection.hooks?.afterDelete || [],\n                                    (0,_hooks_afterDelete_js__WEBPACK_IMPORTED_MODULE_1__.getAfterDeleteHook)({\n                                        collection\n                                    }),\n                                    ...cachingEnabled ? [\n                                        (0,_hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__.getCacheUploadsAfterDeleteHook)({\n                                            endpoint: apiEndpoint\n                                        })\n                                    ] : []\n                                ],\n                                beforeChange: [\n                                    ...collection.hooks?.beforeChange || [],\n                                    (0,_hooks_beforeChange_js__WEBPACK_IMPORTED_MODULE_2__.getBeforeChangeHook)({\n                                        collection\n                                    })\n                                ]\n                            },\n                            upload: {\n                                ...typeof collection.upload === 'object' ? collection.upload : {},\n                                disableLocalStorage: true,\n                                handlers: [\n                                    ...typeof collection.upload === 'object' && Array.isArray(collection.upload.handlers) ? collection.upload.handlers : [],\n                                    (0,_staticHandler_js__WEBPACK_IMPORTED_MODULE_4__.getStaticHandler)({\n                                        cachingOptions: pluginOptions?.uploadCaching,\n                                        collection\n                                    })\n                                ]\n                            }\n                        };\n                    }\n                    return collection;\n                }),\n                upload: {\n                    ...config.upload || {},\n                    useTempFiles: true\n                }\n            };\n        }\n        // Configure cloud email\n        const apiKey = process.env.PAYLOAD_CLOUD_EMAIL_API_KEY;\n        const defaultDomain = process.env.PAYLOAD_CLOUD_DEFAULT_DOMAIN;\n        if (pluginOptions?.email !== false && apiKey && defaultDomain) {\n            config.email = await (0,_email_js__WEBPACK_IMPORTED_MODULE_0__.payloadCloudEmail)({\n                apiKey,\n                config,\n                defaultDomain,\n                defaultFromAddress: pluginOptions?.email?.defaultFromAddress,\n                defaultFromName: pluginOptions?.email?.defaultFromName,\n                skipVerify: pluginOptions?.email?.skipVerify\n            });\n        }\n        return config;\n    };\n\n//# sourceMappingURL=plugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvcGx1Z2luLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQztBQUNhO0FBQ0U7QUFDMEM7QUFDbEQ7QUFDL0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxRkFBOEI7QUFDdEU7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUVBQWtCO0FBQ3REO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0Esd0NBQXdDLHFGQUE4QjtBQUN0RTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywyRUFBbUI7QUFDdkQ7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxpR0FBaUc7QUFDakc7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1FQUFnQjtBQUNwRDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0REFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvcGx1Z2luLmpzPzQxMmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGF5bG9hZENsb3VkRW1haWwgfSBmcm9tICcuL2VtYWlsLmpzJztcbmltcG9ydCB7IGdldEFmdGVyRGVsZXRlSG9vayB9IGZyb20gJy4vaG9va3MvYWZ0ZXJEZWxldGUuanMnO1xuaW1wb3J0IHsgZ2V0QmVmb3JlQ2hhbmdlSG9vayB9IGZyb20gJy4vaG9va3MvYmVmb3JlQ2hhbmdlLmpzJztcbmltcG9ydCB7IGdldENhY2hlVXBsb2Fkc0FmdGVyQ2hhbmdlSG9vaywgZ2V0Q2FjaGVVcGxvYWRzQWZ0ZXJEZWxldGVIb29rIH0gZnJvbSAnLi9ob29rcy91cGxvYWRDYWNoZS5qcyc7XG5pbXBvcnQgeyBnZXRTdGF0aWNIYW5kbGVyIH0gZnJvbSAnLi9zdGF0aWNIYW5kbGVyLmpzJztcbmV4cG9ydCBjb25zdCBwYXlsb2FkQ2xvdWRQbHVnaW4gPSAocGx1Z2luT3B0aW9ucyk9PmFzeW5jIChpbmNvbWluZ0NvbmZpZyk9PntcbiAgICAgICAgbGV0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmluY29taW5nQ29uZmlnXG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FjaGluZ0VuYWJsZWQgPSBwbHVnaW5PcHRpb25zPy51cGxvYWRDYWNoaW5nICE9PSBmYWxzZSAmJiAhIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ0FDSEVfS0VZO1xuICAgICAgICBjb25zdCBhcGlFbmRwb2ludCA9IHBsdWdpbk9wdGlvbnM/LmVuZHBvaW50IHx8ICdodHRwczovL2Nsb3VkLWFwaS5wYXlsb2FkY21zLmNvbSc7XG4gICAgICAgIC8vIENvbmZpZ3VyZSBjbG91ZCBzdG9yYWdlXG4gICAgICAgIGlmIChwbHVnaW5PcHRpb25zPy5zdG9yYWdlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uczogKGNvbmZpZy5jb2xsZWN0aW9ucyB8fCBbXSkubWFwKChjb2xsZWN0aW9uKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sbGVjdGlvbi51cGxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uLmhvb2tzIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlckNoYW5nZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29sbGVjdGlvbi5ob29rcz8uYWZ0ZXJDaGFuZ2UgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jYWNoaW5nRW5hYmxlZCA/IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYWNoZVVwbG9hZHNBZnRlckNoYW5nZUhvb2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogYXBpRW5kcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyRGVsZXRlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uLmhvb2tzPy5hZnRlckRlbGV0ZSB8fCBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEFmdGVyRGVsZXRlSG9vayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jYWNoaW5nRW5hYmxlZCA/IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYWNoZVVwbG9hZHNBZnRlckRlbGV0ZUhvb2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogYXBpRW5kcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZUNoYW5nZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29sbGVjdGlvbi5ob29rcz8uYmVmb3JlQ2hhbmdlIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QmVmb3JlQ2hhbmdlSG9vayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnR5cGVvZiBjb2xsZWN0aW9uLnVwbG9hZCA9PT0gJ29iamVjdCcgPyBjb2xsZWN0aW9uLnVwbG9hZCA6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTG9jYWxTdG9yYWdlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udHlwZW9mIGNvbGxlY3Rpb24udXBsb2FkID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KGNvbGxlY3Rpb24udXBsb2FkLmhhbmRsZXJzKSA/IGNvbGxlY3Rpb24udXBsb2FkLmhhbmRsZXJzIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTdGF0aWNIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoaW5nT3B0aW9uczogcGx1Z2luT3B0aW9ucz8udXBsb2FkQ2FjaGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLnVwbG9hZCB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgdXNlVGVtcEZpbGVzOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb25maWd1cmUgY2xvdWQgZW1haWxcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9FTUFJTF9BUElfS0VZO1xuICAgICAgICBjb25zdCBkZWZhdWx0RG9tYWluID0gcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9ERUZBVUxUX0RPTUFJTjtcbiAgICAgICAgaWYgKHBsdWdpbk9wdGlvbnM/LmVtYWlsICE9PSBmYWxzZSAmJiBhcGlLZXkgJiYgZGVmYXVsdERvbWFpbikge1xuICAgICAgICAgICAgY29uZmlnLmVtYWlsID0gYXdhaXQgcGF5bG9hZENsb3VkRW1haWwoe1xuICAgICAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgZGVmYXVsdERvbWFpbixcbiAgICAgICAgICAgICAgICBkZWZhdWx0RnJvbUFkZHJlc3M6IHBsdWdpbk9wdGlvbnM/LmVtYWlsPy5kZWZhdWx0RnJvbUFkZHJlc3MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZyb21OYW1lOiBwbHVnaW5PcHRpb25zPy5lbWFpbD8uZGVmYXVsdEZyb21OYW1lLFxuICAgICAgICAgICAgICAgIHNraXBWZXJpZnk6IHBsdWdpbk9wdGlvbnM/LmVtYWlsPy5za2lwVmVyaWZ5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWdpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/plugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStaticHandler: () => (/* binding */ getStaticHandler)\n/* harmony export */ });\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n// Convert a stream into a promise that resolves with a Buffer\nconst streamToBuffer = async (readableStream)=>{\n    const chunks = [];\n    for await (const chunk of readableStream){\n        chunks.push(typeof chunk === 'string' ? Buffer.from(chunk) : chunk);\n    }\n    return Buffer.concat(chunks);\n};\nconst getStaticHandler = ({ cachingOptions, collection })=>{\n    let maxAge = 86400 // 24 hours default\n    ;\n    let collCacheConfig;\n    if (cachingOptions !== false) {\n        // Set custom maxAge for all collections\n        maxAge = cachingOptions?.maxAge || maxAge;\n        collCacheConfig = cachingOptions?.collections?.[collection.slug] || {};\n    }\n    // Set maxAge using collection-specific override\n    maxAge = collCacheConfig?.maxAge || maxAge;\n    const cachingEnabled = cachingOptions !== false && !!process.env.PAYLOAD_CLOUD_CACHE_KEY && collCacheConfig?.enabled !== false;\n    return async (req, { params })=>{\n        try {\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__.getStorageClient)();\n            const Key = (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__.createKey)({\n                collection: collection.slug,\n                filename: params.filename,\n                identityID\n            });\n            const object = await storageClient.getObject({\n                Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                Key\n            });\n            if (!object.Body) {\n                return new Response(null, {\n                    status: 404,\n                    statusText: 'Not Found'\n                });\n            }\n            const bodyBuffer = await streamToBuffer(object.Body);\n            return new Response(bodyBuffer, {\n                headers: new Headers({\n                    'Content-Length': String(object.ContentLength),\n                    'Content-Type': object.ContentType,\n                    ...cachingEnabled && {\n                        'Cache-Control': `public, max-age=${maxAge}`\n                    },\n                    ETag: object.ETag\n                }),\n                status: 200\n            });\n        } catch (err) {\n            req.payload.logger.error({\n                err,\n                msg: 'Error getting file from cloud storage'\n            });\n            return new Response('Internal Server Error', {\n                status: 500\n            });\n        }\n    };\n};\n\n//# sourceMappingURL=staticHandler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3Qvc3RhdGljSGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDYztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNEJBQTRCLDRCQUE0QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFFBQVE7QUFDakM7QUFDQSxvQkFBb0IsNEJBQTRCLFFBQVEsZ0ZBQWdCO0FBQ3hFLHdCQUF3QixrRUFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELE9BQU87QUFDbkUscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4wLjBfQGF3cy1zZGsrY2xpZW50LXNzby1vaWRjQDMuNjkzLjBfQGF3cy1zZGsrY2xpZW50LXN0c0AzLjY5My4wX182Nmt6YTUyZ29tdW0yM2FxZHFvbWdiN2dwcS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L3N0YXRpY0hhbmRsZXIuanM/NTM4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVLZXkgfSBmcm9tICcuL3V0aWxpdGllcy9jcmVhdGVLZXkuanMnO1xuaW1wb3J0IHsgZ2V0U3RvcmFnZUNsaWVudCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFN0b3JhZ2VDbGllbnQuanMnO1xuLy8gQ29udmVydCBhIHN0cmVhbSBpbnRvIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBCdWZmZXJcbmNvbnN0IHN0cmVhbVRvQnVmZmVyID0gYXN5bmMgKHJlYWRhYmxlU3RyZWFtKT0+e1xuICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZGFibGVTdHJlYW0pe1xuICAgICAgICBjaHVua3MucHVzaCh0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnID8gQnVmZmVyLmZyb20oY2h1bmspIDogY2h1bmspO1xuICAgIH1cbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChjaHVua3MpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNIYW5kbGVyID0gKHsgY2FjaGluZ09wdGlvbnMsIGNvbGxlY3Rpb24gfSk9PntcbiAgICBsZXQgbWF4QWdlID0gODY0MDAgLy8gMjQgaG91cnMgZGVmYXVsdFxuICAgIDtcbiAgICBsZXQgY29sbENhY2hlQ29uZmlnO1xuICAgIGlmIChjYWNoaW5nT3B0aW9ucyAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gU2V0IGN1c3RvbSBtYXhBZ2UgZm9yIGFsbCBjb2xsZWN0aW9uc1xuICAgICAgICBtYXhBZ2UgPSBjYWNoaW5nT3B0aW9ucz8ubWF4QWdlIHx8IG1heEFnZTtcbiAgICAgICAgY29sbENhY2hlQ29uZmlnID0gY2FjaGluZ09wdGlvbnM/LmNvbGxlY3Rpb25zPy5bY29sbGVjdGlvbi5zbHVnXSB8fCB7fTtcbiAgICB9XG4gICAgLy8gU2V0IG1heEFnZSB1c2luZyBjb2xsZWN0aW9uLXNwZWNpZmljIG92ZXJyaWRlXG4gICAgbWF4QWdlID0gY29sbENhY2hlQ29uZmlnPy5tYXhBZ2UgfHwgbWF4QWdlO1xuICAgIGNvbnN0IGNhY2hpbmdFbmFibGVkID0gY2FjaGluZ09wdGlvbnMgIT09IGZhbHNlICYmICEhcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DQUNIRV9LRVkgJiYgY29sbENhY2hlQ29uZmlnPy5lbmFibGVkICE9PSBmYWxzZTtcbiAgICByZXR1cm4gYXN5bmMgKHJlcSwgeyBwYXJhbXMgfSk9PntcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpdHlJRCwgc3RvcmFnZUNsaWVudCB9ID0gYXdhaXQgZ2V0U3RvcmFnZUNsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgS2V5ID0gY3JlYXRlS2V5KHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHBhcmFtcy5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICBpZGVudGl0eUlEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IGF3YWl0IHN0b3JhZ2VDbGllbnQuZ2V0T2JqZWN0KHtcbiAgICAgICAgICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQlVDS0VULFxuICAgICAgICAgICAgICAgIEtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW9iamVjdC5Cb2R5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAnTm90IEZvdW5kJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYm9keUJ1ZmZlciA9IGF3YWl0IHN0cmVhbVRvQnVmZmVyKG9iamVjdC5Cb2R5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoYm9keUJ1ZmZlciwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogU3RyaW5nKG9iamVjdC5Db250ZW50TGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IG9iamVjdC5Db250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGluZ0VuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiBgcHVibGljLCBtYXgtYWdlPSR7bWF4QWdlfWBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgRVRhZzogb2JqZWN0LkVUYWdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICAgICAgbXNnOiAnRXJyb3IgZ2V0dGluZyBmaWxlIGZyb20gY2xvdWQgc3RvcmFnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnSW50ZXJuYWwgU2VydmVyIEVycm9yJywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0aWNIYW5kbGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authAsCognitoUser: () => (/* binding */ authAsCognitoUser)\n/* harmony export */ });\n/* harmony import */ var amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! amazon-cognito-identity-js */ \"(rsc)/./node_modules/.pnpm/amazon-cognito-identity-js@6.3.12/node_modules/amazon-cognito-identity-js/es/index.js\");\n\nlet sessionAndToken = null;\nconst authAsCognitoUser = async (username, password)=>{\n    // TODO: Check that isValid evaluates expiration\n    if (sessionAndToken?.isValid()) {\n        return sessionAndToken;\n    }\n    const userPool = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.CognitoUserPool({\n        ClientId: process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_CLIENT_ID,\n        UserPoolId: process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_ID\n    });\n    const authenticationDetails = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.AuthenticationDetails({\n        Password: password,\n        Username: username\n    });\n    const cognitoUser = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.CognitoUser({\n        Pool: userPool,\n        Username: username\n    });\n    const result = await new Promise((resolve, reject)=>{\n        cognitoUser.authenticateUser(authenticationDetails, {\n            onFailure: (err)=>{\n                reject(err);\n            },\n            onSuccess: (res)=>{\n                resolve(res);\n            }\n        });\n    });\n    sessionAndToken = result;\n    return sessionAndToken;\n};\n\n//# sourceMappingURL=authAsCognitoUser.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2F1dGhBc0NvZ25pdG9Vc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlHO0FBQ2pHO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1RUFBZTtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMLHNDQUFzQyw2RUFBcUI7QUFDM0Q7QUFDQTtBQUNBLEtBQUs7QUFDTCw0QkFBNEIsbUVBQVc7QUFDdkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlc3Nvbi1hdXRob3JpbmcvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2F1dGhBc0NvZ25pdG9Vc2VyLmpzPzFhYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXV0aGVudGljYXRpb25EZXRhaWxzLCBDb2duaXRvVXNlciwgQ29nbml0b1VzZXJQb29sIH0gZnJvbSAnYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMnO1xubGV0IHNlc3Npb25BbmRUb2tlbiA9IG51bGw7XG5leHBvcnQgY29uc3QgYXV0aEFzQ29nbml0b1VzZXIgPSBhc3luYyAodXNlcm5hbWUsIHBhc3N3b3JkKT0+e1xuICAgIC8vIFRPRE86IENoZWNrIHRoYXQgaXNWYWxpZCBldmFsdWF0ZXMgZXhwaXJhdGlvblxuICAgIGlmIChzZXNzaW9uQW5kVG9rZW4/LmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gc2Vzc2lvbkFuZFRva2VuO1xuICAgIH1cbiAgICBjb25zdCB1c2VyUG9vbCA9IG5ldyBDb2duaXRvVXNlclBvb2woe1xuICAgICAgICBDbGllbnRJZDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DT0dOSVRPX1VTRVJfUE9PTF9DTElFTlRfSUQsXG4gICAgICAgIFVzZXJQb29sSWQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19VU0VSX1BPT0xfSURcbiAgICB9KTtcbiAgICBjb25zdCBhdXRoZW50aWNhdGlvbkRldGFpbHMgPSBuZXcgQXV0aGVudGljYXRpb25EZXRhaWxzKHtcbiAgICAgICAgUGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICBVc2VybmFtZTogdXNlcm5hbWVcbiAgICB9KTtcbiAgICBjb25zdCBjb2duaXRvVXNlciA9IG5ldyBDb2duaXRvVXNlcih7XG4gICAgICAgIFBvb2w6IHVzZXJQb29sLFxuICAgICAgICBVc2VybmFtZTogdXNlcm5hbWVcbiAgICB9KTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICBjb2duaXRvVXNlci5hdXRoZW50aWNhdGVVc2VyKGF1dGhlbnRpY2F0aW9uRGV0YWlscywge1xuICAgICAgICAgICAgb25GYWlsdXJlOiAoZXJyKT0+e1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uU3VjY2VzczogKHJlcyk9PntcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHNlc3Npb25BbmRUb2tlbiA9IHJlc3VsdDtcbiAgICByZXR1cm4gc2Vzc2lvbkFuZFRva2VuO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXV0aEFzQ29nbml0b1VzZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKey: () => (/* binding */ createKey)\n/* harmony export */ });\nconst createKey = ({ collection, filename, identityID })=>`${identityID}/${process.env.PAYLOAD_CLOUD_ENVIRONMENT}/${collection}/${filename}`;\n\n//# sourceMappingURL=createKey.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2NyZWF0ZUtleS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8scUJBQXFCLGtDQUFrQyxNQUFNLFdBQVcsR0FBRyxzQ0FBc0MsR0FBRyxXQUFXLEdBQUcsU0FBUzs7QUFFbEoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4wLjBfQGF3cy1zZGsrY2xpZW50LXNzby1vaWRjQDMuNjkzLjBfQGF3cy1zZGsrY2xpZW50LXN0c0AzLjY5My4wX182Nmt6YTUyZ29tdW0yM2FxZHFvbWdiN2dwcS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L3V0aWxpdGllcy9jcmVhdGVLZXkuanM/NTVjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY3JlYXRlS2V5ID0gKHsgY29sbGVjdGlvbiwgZmlsZW5hbWUsIGlkZW50aXR5SUQgfSk9PmAke2lkZW50aXR5SUR9LyR7cHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9FTlZJUk9OTUVOVH0vJHtjb2xsZWN0aW9ufS8ke2ZpbGVuYW1lfWA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZUtleS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIncomingFiles: () => (/* binding */ getIncomingFiles)\n/* harmony export */ });\nfunction getIncomingFiles({ data, req }) {\n    const file = req.file;\n    let files = [];\n    if (file && data.filename && data.mimeType) {\n        const mainFile = {\n            buffer: file.data,\n            filename: data.filename,\n            filesize: file.size,\n            mimeType: data.mimeType,\n            tempFilePath: file.tempFilePath\n        };\n        files = [\n            mainFile\n        ];\n        if (data?.sizes) {\n            Object.entries(data.sizes).forEach(([key, resizedFileData])=>{\n                if (req.payloadUploadSizes?.[key] && data.mimeType) {\n                    files = files.concat([\n                        {\n                            buffer: req.payloadUploadSizes[key],\n                            filename: `${resizedFileData.filename}`,\n                            filesize: req.payloadUploadSizes[key].length,\n                            mimeType: data.mimeType\n                        }\n                    ]);\n                }\n            });\n        }\n    }\n    return files;\n}\n\n//# sourceMappingURL=getIncomingFiles.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2dldEluY29taW5nRmlsZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLDRCQUE0QixXQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlCQUF5QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzc29uLWF1dGhvcmluZy8uL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMC4wX0Bhd3Mtc2RrK2NsaWVudC1zc28tb2lkY0AzLjY5My4wX0Bhd3Mtc2RrK2NsaWVudC1zdHNAMy42OTMuMF9fNjZremE1MmdvbXVtMjNhcWRxb21nYjdncHEvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC91dGlsaXRpZXMvZ2V0SW5jb21pbmdGaWxlcy5qcz85NzU3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZXRJbmNvbWluZ0ZpbGVzKHsgZGF0YSwgcmVxIH0pIHtcbiAgICBjb25zdCBmaWxlID0gcmVxLmZpbGU7XG4gICAgbGV0IGZpbGVzID0gW107XG4gICAgaWYgKGZpbGUgJiYgZGF0YS5maWxlbmFtZSAmJiBkYXRhLm1pbWVUeXBlKSB7XG4gICAgICAgIGNvbnN0IG1haW5GaWxlID0ge1xuICAgICAgICAgICAgYnVmZmVyOiBmaWxlLmRhdGEsXG4gICAgICAgICAgICBmaWxlbmFtZTogZGF0YS5maWxlbmFtZSxcbiAgICAgICAgICAgIGZpbGVzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICBtaW1lVHlwZTogZGF0YS5taW1lVHlwZSxcbiAgICAgICAgICAgIHRlbXBGaWxlUGF0aDogZmlsZS50ZW1wRmlsZVBhdGhcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZXMgPSBbXG4gICAgICAgICAgICBtYWluRmlsZVxuICAgICAgICBdO1xuICAgICAgICBpZiAoZGF0YT8uc2l6ZXMpIHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEuc2l6ZXMpLmZvckVhY2goKFtrZXksIHJlc2l6ZWRGaWxlRGF0YV0pPT57XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5wYXlsb2FkVXBsb2FkU2l6ZXM/LltrZXldICYmIGRhdGEubWltZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBmaWxlcy5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogcmVxLnBheWxvYWRVcGxvYWRTaXplc1trZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBgJHtyZXNpemVkRmlsZURhdGEuZmlsZW5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc2l6ZTogcmVxLnBheWxvYWRVcGxvYWRTaXplc1trZXldLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZGF0YS5taW1lVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmlsZXM7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEluY29taW5nRmlsZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStorageClient: () => (/* binding */ getStorageClient)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_cognito_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+client-cognito-identity@3.693.0/node_modules/@aws-sdk/client-cognito-identity/dist-es/CognitoIdentityClient.js\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+client-s3@3.693.0/node_modules/@aws-sdk/client-s3/dist-es/S3.js\");\n/* harmony import */ var _aws_sdk_credential_providers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/credential-providers */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+credential-providers@3.693.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0_/node_modules/@aws-sdk/credential-providers/dist-es/fromCognitoIdentityPool.js\");\n/* harmony import */ var _authAsCognitoUser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authAsCognitoUser.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js\");\n\n\n\n\nlet storageClient = null;\nlet session = null;\nlet identityID;\nconst getStorageClient = async ()=>{\n    if (storageClient && session?.isValid()) {\n        return {\n            identityID,\n            storageClient\n        };\n    }\n    session = await (0,_authAsCognitoUser_js__WEBPACK_IMPORTED_MODULE_0__.authAsCognitoUser)(process.env.PAYLOAD_CLOUD_PROJECT_ID, process.env.PAYLOAD_CLOUD_COGNITO_PASSWORD);\n    const cognitoIdentity = new _aws_sdk_client_cognito_identity__WEBPACK_IMPORTED_MODULE_1__.CognitoIdentityClient({\n        credentials: (0,_aws_sdk_credential_providers__WEBPACK_IMPORTED_MODULE_2__.fromCognitoIdentityPool)({\n            clientConfig: {\n                region: 'us-east-1'\n            },\n            identityPoolId: process.env.PAYLOAD_CLOUD_COGNITO_IDENTITY_POOL_ID,\n            logins: {\n                [`cognito-idp.us-east-1.amazonaws.com/${process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_ID}`]: session.getIdToken().getJwtToken()\n            }\n        })\n    });\n    const credentials = await cognitoIdentity.config.credentials();\n    // @ts-expect-error - Incorrect AWS types\n    identityID = credentials.identityId;\n    storageClient = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_3__.S3({\n        credentials,\n        region: process.env.PAYLOAD_CLOUD_BUCKET_REGION\n    });\n    return {\n        identityID,\n        storageClient\n    };\n};\n\n//# sourceMappingURL=getStorageClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjAuMF9AYXdzLXNkaytjbGllbnQtc3NvLW9pZGNAMy42OTMuMF9AYXdzLXNkaytjbGllbnQtc3RzQDMuNjkzLjBfXzY2a3phNTJnb211bTIzYXFkcW9tZ2I3Z3BxL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2dldFN0b3JhZ2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUU7QUFDL0I7QUFDOEI7QUFDYjtBQUMzRDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3RUFBaUI7QUFDckMsZ0NBQWdDLG1GQUFxQjtBQUNyRCxxQkFBcUIsc0ZBQXVCO0FBQzVDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHdEQUF3RCwrQ0FBK0M7QUFDdkc7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrREFBTTtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXNzb24tYXV0aG9yaW5nLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4wLjBfQGF3cy1zZGsrY2xpZW50LXNzby1vaWRjQDMuNjkzLjBfQGF3cy1zZGsrY2xpZW50LXN0c0AzLjY5My4wX182Nmt6YTUyZ29tdW0yM2FxZHFvbWdiN2dwcS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L3V0aWxpdGllcy9nZXRTdG9yYWdlQ2xpZW50LmpzPzZhOTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29nbml0b0lkZW50aXR5Q2xpZW50IH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWNvZ25pdG8taWRlbnRpdHknO1xuaW1wb3J0ICogYXMgQVdTIGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XG5pbXBvcnQgeyBmcm9tQ29nbml0b0lkZW50aXR5UG9vbCB9IGZyb20gJ0Bhd3Mtc2RrL2NyZWRlbnRpYWwtcHJvdmlkZXJzJztcbmltcG9ydCB7IGF1dGhBc0NvZ25pdG9Vc2VyIH0gZnJvbSAnLi9hdXRoQXNDb2duaXRvVXNlci5qcyc7XG5sZXQgc3RvcmFnZUNsaWVudCA9IG51bGw7XG5sZXQgc2Vzc2lvbiA9IG51bGw7XG5sZXQgaWRlbnRpdHlJRDtcbmV4cG9ydCBjb25zdCBnZXRTdG9yYWdlQ2xpZW50ID0gYXN5bmMgKCk9PntcbiAgICBpZiAoc3RvcmFnZUNsaWVudCAmJiBzZXNzaW9uPy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkZW50aXR5SUQsXG4gICAgICAgICAgICBzdG9yYWdlQ2xpZW50XG4gICAgICAgIH07XG4gICAgfVxuICAgIHNlc3Npb24gPSBhd2FpdCBhdXRoQXNDb2duaXRvVXNlcihwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX1BST0pFQ1RfSUQsIHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19QQVNTV09SRCk7XG4gICAgY29uc3QgY29nbml0b0lkZW50aXR5ID0gbmV3IENvZ25pdG9JZGVudGl0eUNsaWVudCh7XG4gICAgICAgIGNyZWRlbnRpYWxzOiBmcm9tQ29nbml0b0lkZW50aXR5UG9vbCh7XG4gICAgICAgICAgICBjbGllbnRDb25maWc6IHtcbiAgICAgICAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWRlbnRpdHlQb29sSWQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19JREVOVElUWV9QT09MX0lELFxuICAgICAgICAgICAgbG9naW5zOiB7XG4gICAgICAgICAgICAgICAgW2Bjb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS8ke3Byb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19VU0VSX1BPT0xfSUR9YF06IHNlc3Npb24uZ2V0SWRUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IGF3YWl0IGNvZ25pdG9JZGVudGl0eS5jb25maWcuY3JlZGVudGlhbHMoKTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gSW5jb3JyZWN0IEFXUyB0eXBlc1xuICAgIGlkZW50aXR5SUQgPSBjcmVkZW50aWFscy5pZGVudGl0eUlkO1xuICAgIHN0b3JhZ2VDbGllbnQgPSBuZXcgQVdTLlMzKHtcbiAgICAgICAgY3JlZGVudGlhbHMsXG4gICAgICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9CVUNLRVRfUkVHSU9OXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWRlbnRpdHlJRCxcbiAgICAgICAgc3RvcmFnZUNsaWVudFxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRTdG9yYWdlQ2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.0.0_@aws-sdk+client-sso-oidc@3.693.0_@aws-sdk+client-sts@3.693.0__66kza52gomum23aqdqomgb7gpq/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\n");

/***/ })

};
;